function o1(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _l(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(t,i);return new o}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var ss={},a1={get exports(){return ss},set exports(e){ss=e}},bl={},ee={},l1={get exports(){return ee},set exports(e){ee=e}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ns=Symbol.for("react.element"),c1=Symbol.for("react.portal"),u1=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),d1=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),h1=Symbol.for("react.context"),m1=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),g1=Symbol.for("react.memo"),v1=Symbol.for("react.lazy"),Kd=Symbol.iterator;function x1(e){return e===null||typeof e!="object"?null:(e=Kd&&e[Kd]||e["@@iterator"],typeof e=="function"?e:null)}var Rm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mm=Object.assign,Dm={};function po(e,t,n){this.props=e,this.context=t,this.refs=Dm,this.updater=n||Rm}po.prototype.isReactComponent={};po.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};po.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Im(){}Im.prototype=po.prototype;function gf(e,t,n){this.props=e,this.context=t,this.refs=Dm,this.updater=n||Rm}var vf=gf.prototype=new Im;vf.constructor=gf;Mm(vf,po.prototype);vf.isPureReactComponent=!0;var Yd=Array.isArray,Am=Object.prototype.hasOwnProperty,xf={current:null},Nm={key:!0,ref:!0,__self:!0,__source:!0};function Lm(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Am.call(t,r)&&!Nm.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ns,type:e,key:o,ref:s,props:i,_owner:xf.current}}function S1(e,t){return{$$typeof:Ns,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ns}function C1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jd=/\/+/g;function oc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?C1(""+e.key):t.toString(36)}function va(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ns:case c1:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+oc(s,0):r,Yd(i)?(n="",e!=null&&(n=e.replace(Jd,"$&/")+"/"),va(i,t,n,"",function(c){return c})):i!=null&&(Sf(i)&&(i=S1(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Jd,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Yd(e))for(var l=0;l<e.length;l++){o=e[l];var a=r+oc(o,l);s+=va(o,t,n,a,i)}else if(a=x1(e),typeof a=="function")for(e=a.call(e),l=0;!(o=e.next()).done;)o=o.value,a=r+oc(o,l++),s+=va(o,t,n,a,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Hs(e,t,n){if(e==null)return e;var r=[],i=0;return va(e,r,"","",function(o){return t.call(n,o,i++)}),r}function _1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gn={current:null},xa={transition:null},b1={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:xa,ReactCurrentOwner:xf};Ue.Children={map:Hs,forEach:function(e,t,n){Hs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hs(e,function(){t++}),t},toArray:function(e){return Hs(e,function(t){return t})||[]},only:function(e){if(!Sf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ue.Component=po;Ue.Fragment=u1;Ue.Profiler=d1;Ue.PureComponent=gf;Ue.StrictMode=f1;Ue.Suspense=y1;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b1;Ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Mm({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=xf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Am.call(t,a)&&!Nm.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ns,type:e.type,key:i,ref:o,props:r,_owner:s}};Ue.createContext=function(e){return e={$$typeof:h1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:p1,_context:e},e.Consumer=e};Ue.createElement=Lm;Ue.createFactory=function(e){var t=Lm.bind(null,e);return t.type=e,t};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(e){return{$$typeof:m1,render:e}};Ue.isValidElement=Sf;Ue.lazy=function(e){return{$$typeof:v1,_payload:{_status:-1,_result:e},_init:_1}};Ue.memo=function(e,t){return{$$typeof:g1,type:e,compare:t===void 0?null:t}};Ue.startTransition=function(e){var t=xa.transition;xa.transition={};try{e()}finally{xa.transition=t}};Ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ue.useCallback=function(e,t){return gn.current.useCallback(e,t)};Ue.useContext=function(e){return gn.current.useContext(e)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(e){return gn.current.useDeferredValue(e)};Ue.useEffect=function(e,t){return gn.current.useEffect(e,t)};Ue.useId=function(){return gn.current.useId()};Ue.useImperativeHandle=function(e,t,n){return gn.current.useImperativeHandle(e,t,n)};Ue.useInsertionEffect=function(e,t){return gn.current.useInsertionEffect(e,t)};Ue.useLayoutEffect=function(e,t){return gn.current.useLayoutEffect(e,t)};Ue.useMemo=function(e,t){return gn.current.useMemo(e,t)};Ue.useReducer=function(e,t,n){return gn.current.useReducer(e,t,n)};Ue.useRef=function(e){return gn.current.useRef(e)};Ue.useState=function(e){return gn.current.useState(e)};Ue.useSyncExternalStore=function(e,t,n){return gn.current.useSyncExternalStore(e,t,n)};Ue.useTransition=function(){return gn.current.useTransition()};Ue.version="18.2.0";(function(e){e.exports=Ue})(l1);const ue=s1(ee),Wc=o1({__proto__:null,default:ue},[ee]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=ee,E1=Symbol.for("react.element"),P1=Symbol.for("react.fragment"),k1=Object.prototype.hasOwnProperty,T1=w1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O1={key:!0,ref:!0,__self:!0,__source:!0};function jm(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)k1.call(t,r)&&!O1.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:E1,type:e,key:o,ref:s,props:i,_owner:T1.current}}bl.Fragment=P1;bl.jsx=jm;bl.jsxs=jm;(function(e){e.exports=bl})(a1);const wl=ss.Fragment,$=ss.jsx,ar=ss.jsxs;var Kc={},Yc={},R1={get exports(){return Yc},set exports(e){Yc=e}},jn={},Jc={},M1={get exports(){return Jc},set exports(e){Jc=e}},Bm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,de){var Ce=H.length;H.push(de);e:for(;0<Ce;){var He=Ce-1>>>1,Ze=H[He];if(0<i(Ze,de))H[He]=de,H[Ce]=Ze,Ce=He;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var de=H[0],Ce=H.pop();if(Ce!==de){H[0]=Ce;e:for(var He=0,Ze=H.length,pt=Ze>>>1;He<pt;){var qe=2*(He+1)-1,he=H[qe],Ae=qe+1,ln=H[Ae];if(0>i(he,Ce))Ae<Ze&&0>i(ln,he)?(H[He]=ln,H[Ae]=Ce,He=Ae):(H[He]=he,H[qe]=Ce,He=qe);else if(Ae<Ze&&0>i(ln,Ce))H[He]=ln,H[Ae]=Ce,He=Ae;else break e}}return de}function i(H,de){var Ce=H.sortIndex-de.sortIndex;return Ce!==0?Ce:H.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var a=[],c=[],f=1,d=null,p=3,S=!1,x=!1,_=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var de=n(c);de!==null;){if(de.callback===null)r(c);else if(de.startTime<=H)r(c),de.sortIndex=de.expirationTime,t(a,de);else break;de=n(c)}}function P(H){if(_=!1,w(H),!x)if(n(a)!==null)x=!0,_t(B);else{var de=n(c);de!==null&&Ut(P,de.startTime-H)}}function B(H,de){x=!1,_&&(_=!1,C(Q),Q=-1),S=!0;var Ce=p;try{for(w(de),d=n(a);d!==null&&(!(d.expirationTime>de)||H&&!at());){var He=d.callback;if(typeof He=="function"){d.callback=null,p=d.priorityLevel;var Ze=He(d.expirationTime<=de);de=e.unstable_now(),typeof Ze=="function"?d.callback=Ze:d===n(a)&&r(a),w(de)}else r(a);d=n(a)}if(d!==null)var pt=!0;else{var qe=n(c);qe!==null&&Ut(P,qe.startTime-de),pt=!1}return pt}finally{d=null,p=Ce,S=!1}}var K=!1,J=null,Q=-1,Fe=5,Y=-1;function at(){return!(e.unstable_now()-Y<Fe)}function lt(){if(J!==null){var H=e.unstable_now();Y=H;var de=!0;try{de=J(!0,H)}finally{de?Rt():(K=!1,J=null)}}else K=!1}var Rt;if(typeof g=="function")Rt=function(){g(lt)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,Lt=$e.port2;$e.port1.onmessage=lt,Rt=function(){Lt.postMessage(null)}}else Rt=function(){I(lt,0)};function _t(H){J=H,K||(K=!0,Rt())}function Ut(H,de){Q=I(function(){H(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){x||S||(x=!0,_t(B))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Fe=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(H){switch(p){case 1:case 2:case 3:var de=3;break;default:de=p}var Ce=p;p=de;try{return H()}finally{p=Ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,de){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Ce=p;p=H;try{return de()}finally{p=Ce}},e.unstable_scheduleCallback=function(H,de,Ce){var He=e.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?He+Ce:He):Ce=He,H){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=Ce+Ze,H={id:f++,callback:de,priorityLevel:H,startTime:Ce,expirationTime:Ze,sortIndex:-1},Ce>He?(H.sortIndex=Ce,t(c,H),n(a)===null&&H===n(c)&&(_?(C(Q),Q=-1):_=!0,Ut(P,Ce-He))):(H.sortIndex=Ze,t(a,H),x||S||(x=!0,_t(B))),H},e.unstable_shouldYield=at,e.unstable_wrapCallback=function(H){var de=p;return function(){var Ce=p;p=de;try{return H.apply(this,arguments)}finally{p=Ce}}}})(Bm);(function(e){e.exports=Bm})(M1);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm=ee,An=Jc;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Um=new Set,as={};function Ai(e,t){ro(e,t),ro(e+"Capture",t)}function ro(e,t){for(as[e]=t,e=0;e<t.length;e++)Um.add(t[e])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qc=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qd={},qd={};function I1(e){return Qc.call(qd,e)?!0:Qc.call(Qd,e)?!1:D1.test(e)?qd[e]=!0:(Qd[e]=!0,!1)}function A1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N1(e,t,n,r){if(t===null||typeof t>"u"||A1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vn(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wt[e]=new vn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wt[t]=new vn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wt[e]=new vn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wt[e]=new vn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wt[e]=new vn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wt[e]=new vn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wt[e]=new vn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wt[e]=new vn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wt[e]=new vn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cf=/[\-:]([a-z])/g;function _f(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cf,_f);Wt[t]=new vn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cf,_f);Wt[t]=new vn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cf,_f);Wt[t]=new vn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wt[e]=new vn(e,1,!1,e.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wt[e]=new vn(e,1,!1,e.toLowerCase(),null,!0,!0)});function bf(e,t,n,r){var i=Wt.hasOwnProperty(t)?Wt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(N1(t,n,i,r)&&(n=null),r||i===null?I1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var jr=Fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ws=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),wf=Symbol.for("react.strict_mode"),qc=Symbol.for("react.profiler"),$m=Symbol.for("react.provider"),zm=Symbol.for("react.context"),Ef=Symbol.for("react.forward_ref"),Xc=Symbol.for("react.suspense"),Zc=Symbol.for("react.suspense_list"),Pf=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),Vm=Symbol.for("react.offscreen"),Xd=Symbol.iterator;function bo(e){return e===null||typeof e!="object"?null:(e=Xd&&e[Xd]||e["@@iterator"],typeof e=="function"?e:null)}var yt=Object.assign,sc;function Bo(e){if(sc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);sc=t&&t[1]||""}return`
`+sc+e}var ac=!1;function lc(e,t){if(!e||ac)return"";ac=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=s&&0<=l);break}}}finally{ac=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bo(e):""}function L1(e){switch(e.tag){case 5:return Bo(e.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return e=lc(e.type,!1),e;case 11:return e=lc(e.type.render,!1),e;case 1:return e=lc(e.type,!0),e;default:return""}}function eu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bi:return"Fragment";case ji:return"Portal";case qc:return"Profiler";case wf:return"StrictMode";case Xc:return"Suspense";case Zc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zm:return(e.displayName||"Context")+".Consumer";case $m:return(e._context.displayName||"Context")+".Provider";case Ef:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pf:return t=e.displayName||null,t!==null?t:eu(e.type)||"Memo";case zr:t=e._payload,e=e._init;try{return eu(e(t))}catch{}}return null}function j1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eu(t);case 8:return t===wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ri(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function B1(e){var t=Gm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ks(e){e._valueTracker||(e._valueTracker=B1(e))}function Hm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Gm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ja(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tu(e,t){var n=t.checked;return yt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ri(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wm(e,t){t=t.checked,t!=null&&bf(e,"checked",t,!1)}function nu(e,t){Wm(e,t);var n=ri(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ru(e,t.type,n):t.hasOwnProperty("defaultValue")&&ru(e,t.type,ri(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ep(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ru(e,t,n){(t!=="number"||ja(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fo=Array.isArray;function Qi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ri(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function iu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return yt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(Fo(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ri(n)}}function Km(e,t){var n=ri(t.value),r=ri(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function np(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ym(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ou(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ym(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ys,Jm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ls(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F1=["Webkit","ms","Moz","O"];Object.keys(Yo).forEach(function(e){F1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yo[t]=Yo[e]})});function Qm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yo.hasOwnProperty(e)&&Yo[e]?(""+t).trim():t+"px"}function qm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var U1=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(e,t){if(t){if(U1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function au(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lu=null;function kf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cu=null,qi=null,Xi=null;function rp(e){if(e=Bs(e)){if(typeof cu!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Ol(t),cu(e.stateNode,e.type,t))}}function Xm(e){qi?Xi?Xi.push(e):Xi=[e]:qi=e}function Zm(){if(qi){var e=qi,t=Xi;if(Xi=qi=null,rp(e),t)for(e=0;e<t.length;e++)rp(t[e])}}function ey(e,t){return e(t)}function ty(){}var cc=!1;function ny(e,t,n){if(cc)return e(t,n);cc=!0;try{return ey(e,t,n)}finally{cc=!1,(qi!==null||Xi!==null)&&(ty(),Zm())}}function cs(e,t){var n=e.stateNode;if(n===null)return null;var r=Ol(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var uu=!1;if(Dr)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){uu=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{uu=!1}function $1(e,t,n,r,i,o,s,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Jo=!1,Ba=null,Fa=!1,fu=null,z1={onError:function(e){Jo=!0,Ba=e}};function V1(e,t,n,r,i,o,s,l,a){Jo=!1,Ba=null,$1.apply(z1,arguments)}function G1(e,t,n,r,i,o,s,l,a){if(V1.apply(this,arguments),Jo){if(Jo){var c=Ba;Jo=!1,Ba=null}else throw Error(G(198));Fa||(Fa=!0,fu=c)}}function Ni(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ry(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ip(e){if(Ni(e)!==e)throw Error(G(188))}function H1(e){var t=e.alternate;if(!t){if(t=Ni(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ip(i),e;if(o===r)return ip(i),t;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function iy(e){return e=H1(e),e!==null?oy(e):null}function oy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=oy(e);if(t!==null)return t;e=e.sibling}return null}var sy=An.unstable_scheduleCallback,op=An.unstable_cancelCallback,W1=An.unstable_shouldYield,K1=An.unstable_requestPaint,Pt=An.unstable_now,Y1=An.unstable_getCurrentPriorityLevel,Tf=An.unstable_ImmediatePriority,ay=An.unstable_UserBlockingPriority,Ua=An.unstable_NormalPriority,J1=An.unstable_LowPriority,ly=An.unstable_IdlePriority,El=null,cr=null;function Q1(e){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(El,e,void 0,(e.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:Z1,q1=Math.log,X1=Math.LN2;function Z1(e){return e>>>=0,e===0?32:31-(q1(e)/X1|0)|0}var Js=64,Qs=4194304;function Uo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $a(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Uo(l):(o&=s,o!==0&&(r=Uo(o)))}else s=n&~i,s!==0?r=Uo(s):o!==0&&(r=Uo(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-er(t),i=1<<n,r|=e[n],t&=~i;return r}function ex(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-er(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=ex(l,t)):a<=t&&(e.expiredLanes|=l),o&=~l}}function du(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cy(){var e=Js;return Js<<=1,!(Js&4194240)&&(Js=64),e}function uc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ls(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-er(t),e[t]=n}function nx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-er(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Of(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-er(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var rt=0;function uy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fy,Rf,dy,py,hy,pu=!1,qs=[],Jr=null,Qr=null,qr=null,us=new Map,fs=new Map,Gr=[],rx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sp(e,t){switch(e){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fs.delete(t.pointerId)}}function Eo(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Bs(t),t!==null&&Rf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ix(e,t,n,r,i){switch(t){case"focusin":return Jr=Eo(Jr,e,t,n,r,i),!0;case"dragenter":return Qr=Eo(Qr,e,t,n,r,i),!0;case"mouseover":return qr=Eo(qr,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return us.set(o,Eo(us.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,fs.set(o,Eo(fs.get(o)||null,e,t,n,r,i)),!0}return!1}function my(e){var t=Si(e.target);if(t!==null){var n=Ni(t);if(n!==null){if(t=n.tag,t===13){if(t=ry(n),t!==null){e.blockedOn=t,hy(e.priority,function(){dy(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);lu=r,n.target.dispatchEvent(r),lu=null}else return t=Bs(n),t!==null&&Rf(t),e.blockedOn=n,!1;t.shift()}return!0}function ap(e,t,n){Sa(e)&&n.delete(t)}function ox(){pu=!1,Jr!==null&&Sa(Jr)&&(Jr=null),Qr!==null&&Sa(Qr)&&(Qr=null),qr!==null&&Sa(qr)&&(qr=null),us.forEach(ap),fs.forEach(ap)}function Po(e,t){e.blockedOn===t&&(e.blockedOn=null,pu||(pu=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,ox)))}function ds(e){function t(i){return Po(i,e)}if(0<qs.length){Po(qs[0],e);for(var n=1;n<qs.length;n++){var r=qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Jr!==null&&Po(Jr,e),Qr!==null&&Po(Qr,e),qr!==null&&Po(qr,e),us.forEach(t),fs.forEach(t),n=0;n<Gr.length;n++)r=Gr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)my(n),n.blockedOn===null&&Gr.shift()}var Zi=jr.ReactCurrentBatchConfig,za=!0;function sx(e,t,n,r){var i=rt,o=Zi.transition;Zi.transition=null;try{rt=1,Mf(e,t,n,r)}finally{rt=i,Zi.transition=o}}function ax(e,t,n,r){var i=rt,o=Zi.transition;Zi.transition=null;try{rt=4,Mf(e,t,n,r)}finally{rt=i,Zi.transition=o}}function Mf(e,t,n,r){if(za){var i=hu(e,t,n,r);if(i===null)Sc(e,t,r,Va,n),sp(e,r);else if(ix(i,e,t,n,r))r.stopPropagation();else if(sp(e,r),t&4&&-1<rx.indexOf(e)){for(;i!==null;){var o=Bs(i);if(o!==null&&fy(o),o=hu(e,t,n,r),o===null&&Sc(e,t,r,Va,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Sc(e,t,r,null,n)}}var Va=null;function hu(e,t,n,r){if(Va=null,e=kf(r),e=Si(e),e!==null)if(t=Ni(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ry(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Va=e,null}function yy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y1()){case Tf:return 1;case ay:return 4;case Ua:case J1:return 16;case ly:return 536870912;default:return 16}default:return 16}}var Wr=null,Df=null,Ca=null;function gy(){if(Ca)return Ca;var e,t=Df,n=t.length,r,i="value"in Wr?Wr.value:Wr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Ca=i.slice(e,1<r?1-r:void 0)}function _a(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xs(){return!0}function lp(){return!1}function Bn(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xs:lp,this.isPropagationStopped=lp,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),t}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},If=Bn(ho),js=yt({},ho,{view:0,detail:0}),lx=Bn(js),fc,dc,ko,Pl=yt({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Af,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ko&&(ko&&e.type==="mousemove"?(fc=e.screenX-ko.screenX,dc=e.screenY-ko.screenY):dc=fc=0,ko=e),fc)},movementY:function(e){return"movementY"in e?e.movementY:dc}}),cp=Bn(Pl),cx=yt({},Pl,{dataTransfer:0}),ux=Bn(cx),fx=yt({},js,{relatedTarget:0}),pc=Bn(fx),dx=yt({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),px=Bn(dx),hx=yt({},ho,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mx=Bn(hx),yx=yt({},ho,{data:0}),up=Bn(yx),gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xx[e])?!!t[e]:!1}function Af(){return Sx}var Cx=yt({},js,{key:function(e){if(e.key){var t=gx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_a(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Af,charCode:function(e){return e.type==="keypress"?_a(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_a(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_x=Bn(Cx),bx=yt({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fp=Bn(bx),wx=yt({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Af}),Ex=Bn(wx),Px=yt({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),kx=Bn(Px),Tx=yt({},Pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ox=Bn(Tx),Rx=[9,13,27,32],Nf=Dr&&"CompositionEvent"in window,Qo=null;Dr&&"documentMode"in document&&(Qo=document.documentMode);var Mx=Dr&&"TextEvent"in window&&!Qo,vy=Dr&&(!Nf||Qo&&8<Qo&&11>=Qo),dp=String.fromCharCode(32),pp=!1;function xy(e,t){switch(e){case"keyup":return Rx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fi=!1;function Dx(e,t){switch(e){case"compositionend":return Sy(t);case"keypress":return t.which!==32?null:(pp=!0,dp);case"textInput":return e=t.data,e===dp&&pp?null:e;default:return null}}function Ix(e,t){if(Fi)return e==="compositionend"||!Nf&&xy(e,t)?(e=gy(),Ca=Df=Wr=null,Fi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vy&&t.locale!=="ko"?null:t.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ax[e.type]:t==="textarea"}function Cy(e,t,n,r){Xm(r),t=Ga(t,"onChange"),0<t.length&&(n=new If("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qo=null,ps=null;function Nx(e){Dy(e,0)}function kl(e){var t=zi(e);if(Hm(t))return e}function Lx(e,t){if(e==="change")return t}var _y=!1;if(Dr){var hc;if(Dr){var mc="oninput"in document;if(!mc){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),mc=typeof mp.oninput=="function"}hc=mc}else hc=!1;_y=hc&&(!document.documentMode||9<document.documentMode)}function yp(){qo&&(qo.detachEvent("onpropertychange",by),ps=qo=null)}function by(e){if(e.propertyName==="value"&&kl(ps)){var t=[];Cy(t,ps,e,kf(e)),ny(Nx,t)}}function jx(e,t,n){e==="focusin"?(yp(),qo=t,ps=n,qo.attachEvent("onpropertychange",by)):e==="focusout"&&yp()}function Bx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kl(ps)}function Fx(e,t){if(e==="click")return kl(t)}function Ux(e,t){if(e==="input"||e==="change")return kl(t)}function $x(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nr=typeof Object.is=="function"?Object.is:$x;function hs(e,t){if(nr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qc.call(t,i)||!nr(e[i],t[i]))return!1}return!0}function gp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vp(e,t){var n=gp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gp(n)}}function wy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ey(){for(var e=window,t=ja();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ja(e.document)}return t}function Lf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zx(e){var t=Ey(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wy(n.ownerDocument.documentElement,n)){if(r!==null&&Lf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=vp(n,o);var s=vp(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vx=Dr&&"documentMode"in document&&11>=document.documentMode,Ui=null,mu=null,Xo=null,yu=!1;function xp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yu||Ui==null||Ui!==ja(r)||(r=Ui,"selectionStart"in r&&Lf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xo&&hs(Xo,r)||(Xo=r,r=Ga(mu,"onSelect"),0<r.length&&(t=new If("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ui)))}function Zs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $i={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionend:Zs("Transition","TransitionEnd")},yc={},Py={};Dr&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function Tl(e){if(yc[e])return yc[e];if(!$i[e])return e;var t=$i[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Py)return yc[e]=t[n];return e}var ky=Tl("animationend"),Ty=Tl("animationiteration"),Oy=Tl("animationstart"),Ry=Tl("transitionend"),My=new Map,Sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(e,t){My.set(e,t),Ai(t,[e])}for(var gc=0;gc<Sp.length;gc++){var vc=Sp[gc],Gx=vc.toLowerCase(),Hx=vc[0].toUpperCase()+vc.slice(1);si(Gx,"on"+Hx)}si(ky,"onAnimationEnd");si(Ty,"onAnimationIteration");si(Oy,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(Ry,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wx=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function Cp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,G1(r,t,void 0,e),e.currentTarget=null}function Dy(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Cp(i,l,c),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,c=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Cp(i,l,c),o=a}}}if(Fa)throw e=fu,Fa=!1,fu=null,e}function ut(e,t){var n=t[Cu];n===void 0&&(n=t[Cu]=new Set);var r=e+"__bubble";n.has(r)||(Iy(t,e,2,!1),n.add(r))}function xc(e,t,n){var r=0;t&&(r|=4),Iy(n,e,r,t)}var ea="_reactListening"+Math.random().toString(36).slice(2);function ms(e){if(!e[ea]){e[ea]=!0,Um.forEach(function(n){n!=="selectionchange"&&(Wx.has(n)||xc(n,!1,e),xc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ea]||(t[ea]=!0,xc("selectionchange",!1,t))}}function Iy(e,t,n,r){switch(yy(t)){case 1:var i=sx;break;case 4:i=ax;break;default:i=Mf}n=i.bind(null,t,n,e),i=void 0,!uu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Sc(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Si(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}ny(function(){var c=o,f=kf(n),d=[];e:{var p=My.get(e);if(p!==void 0){var S=If,x=e;switch(e){case"keypress":if(_a(n)===0)break e;case"keydown":case"keyup":S=_x;break;case"focusin":x="focus",S=pc;break;case"focusout":x="blur",S=pc;break;case"beforeblur":case"afterblur":S=pc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=ux;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Ex;break;case ky:case Ty:case Oy:S=px;break;case Ry:S=kx;break;case"scroll":S=lx;break;case"wheel":S=Ox;break;case"copy":case"cut":case"paste":S=mx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=fp}var _=(t&4)!==0,I=!_&&e==="scroll",C=_?p!==null?p+"Capture":null:p;_=[];for(var g=c,w;g!==null;){w=g;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,C!==null&&(P=cs(g,C),P!=null&&_.push(ys(g,P,w)))),I)break;g=g.return}0<_.length&&(p=new S(p,x,null,n,f),d.push({event:p,listeners:_}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",p&&n!==lu&&(x=n.relatedTarget||n.fromElement)&&(Si(x)||x[Ir]))break e;if((S||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,S?(x=n.relatedTarget||n.toElement,S=c,x=x?Si(x):null,x!==null&&(I=Ni(x),x!==I||x.tag!==5&&x.tag!==6)&&(x=null)):(S=null,x=c),S!==x)){if(_=cp,P="onMouseLeave",C="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(_=fp,P="onPointerLeave",C="onPointerEnter",g="pointer"),I=S==null?p:zi(S),w=x==null?p:zi(x),p=new _(P,g+"leave",S,n,f),p.target=I,p.relatedTarget=w,P=null,Si(f)===c&&(_=new _(C,g+"enter",x,n,f),_.target=w,_.relatedTarget=I,P=_),I=P,S&&x)t:{for(_=S,C=x,g=0,w=_;w;w=Li(w))g++;for(w=0,P=C;P;P=Li(P))w++;for(;0<g-w;)_=Li(_),g--;for(;0<w-g;)C=Li(C),w--;for(;g--;){if(_===C||C!==null&&_===C.alternate)break t;_=Li(_),C=Li(C)}_=null}else _=null;S!==null&&_p(d,p,S,_,!1),x!==null&&I!==null&&_p(d,I,x,_,!0)}}e:{if(p=c?zi(c):window,S=p.nodeName&&p.nodeName.toLowerCase(),S==="select"||S==="input"&&p.type==="file")var B=Lx;else if(hp(p))if(_y)B=Ux;else{B=Bx;var K=jx}else(S=p.nodeName)&&S.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(B=Fx);if(B&&(B=B(e,c))){Cy(d,B,n,f);break e}K&&K(e,p,c),e==="focusout"&&(K=p._wrapperState)&&K.controlled&&p.type==="number"&&ru(p,"number",p.value)}switch(K=c?zi(c):window,e){case"focusin":(hp(K)||K.contentEditable==="true")&&(Ui=K,mu=c,Xo=null);break;case"focusout":Xo=mu=Ui=null;break;case"mousedown":yu=!0;break;case"contextmenu":case"mouseup":case"dragend":yu=!1,xp(d,n,f);break;case"selectionchange":if(Vx)break;case"keydown":case"keyup":xp(d,n,f)}var J;if(Nf)e:{switch(e){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Fi?xy(e,n)&&(Q="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Q="onCompositionStart");Q&&(vy&&n.locale!=="ko"&&(Fi||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Fi&&(J=gy()):(Wr=f,Df="value"in Wr?Wr.value:Wr.textContent,Fi=!0)),K=Ga(c,Q),0<K.length&&(Q=new up(Q,e,null,n,f),d.push({event:Q,listeners:K}),J?Q.data=J:(J=Sy(n),J!==null&&(Q.data=J)))),(J=Mx?Dx(e,n):Ix(e,n))&&(c=Ga(c,"onBeforeInput"),0<c.length&&(f=new up("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=J))}Dy(d,t)})}function ys(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ga(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=cs(e,n),o!=null&&r.unshift(ys(e,o,i)),o=cs(e,t),o!=null&&r.push(ys(e,o,i))),e=e.return}return r}function Li(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _p(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=cs(n,o),a!=null&&s.unshift(ys(n,a,l))):i||(a=cs(n,o),a!=null&&s.push(ys(n,a,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Kx=/\r\n?/g,Yx=/\u0000|\uFFFD/g;function bp(e){return(typeof e=="string"?e:""+e).replace(Kx,`
`).replace(Yx,"")}function ta(e,t,n){if(t=bp(t),bp(e)!==t&&n)throw Error(G(425))}function Ha(){}var gu=null,vu=null;function xu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Su=typeof setTimeout=="function"?setTimeout:void 0,Jx=typeof clearTimeout=="function"?clearTimeout:void 0,wp=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof wp<"u"?function(e){return wp.resolve(null).then(e).catch(qx)}:Su;function qx(e){setTimeout(function(){throw e})}function Cc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ds(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ds(t)}function Xr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ep(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mo=Math.random().toString(36).slice(2),lr="__reactFiber$"+mo,gs="__reactProps$"+mo,Ir="__reactContainer$"+mo,Cu="__reactEvents$"+mo,Xx="__reactListeners$"+mo,Zx="__reactHandles$"+mo;function Si(e){var t=e[lr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ir]||n[lr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ep(e);e!==null;){if(n=e[lr])return n;e=Ep(e)}return t}e=n,n=e.parentNode}return null}function Bs(e){return e=e[lr]||e[Ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Ol(e){return e[gs]||null}var _u=[],Vi=-1;function ai(e){return{current:e}}function ft(e){0>Vi||(e.current=_u[Vi],_u[Vi]=null,Vi--)}function st(e,t){Vi++,_u[Vi]=e.current,e.current=t}var ii={},sn=ai(ii),bn=ai(!1),Ti=ii;function io(e,t){var n=e.type.contextTypes;if(!n)return ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function wn(e){return e=e.childContextTypes,e!=null}function Wa(){ft(bn),ft(sn)}function Pp(e,t,n){if(sn.current!==ii)throw Error(G(168));st(sn,t),st(bn,n)}function Ay(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(G(108,j1(e)||"Unknown",i));return yt({},n,r)}function Ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ii,Ti=sn.current,st(sn,e),st(bn,bn.current),!0}function kp(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=Ay(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,ft(bn),ft(sn),st(sn,e)):ft(bn),st(bn,n)}var Er=null,Rl=!1,_c=!1;function Ny(e){Er===null?Er=[e]:Er.push(e)}function eS(e){Rl=!0,Ny(e)}function li(){if(!_c&&Er!==null){_c=!0;var e=0,t=rt;try{var n=Er;for(rt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Er=null,Rl=!1}catch(i){throw Er!==null&&(Er=Er.slice(e+1)),sy(Tf,li),i}finally{rt=t,_c=!1}}return null}var Gi=[],Hi=0,Ya=null,Ja=0,Fn=[],Un=0,Oi=null,Pr=1,kr="";function hi(e,t){Gi[Hi++]=Ja,Gi[Hi++]=Ya,Ya=e,Ja=t}function Ly(e,t,n){Fn[Un++]=Pr,Fn[Un++]=kr,Fn[Un++]=Oi,Oi=e;var r=Pr;e=kr;var i=32-er(r)-1;r&=~(1<<i),n+=1;var o=32-er(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Pr=1<<32-er(t)+i|n<<i|r,kr=o+e}else Pr=1<<o|n<<i|r,kr=e}function jf(e){e.return!==null&&(hi(e,1),Ly(e,1,0))}function Bf(e){for(;e===Ya;)Ya=Gi[--Hi],Gi[Hi]=null,Ja=Gi[--Hi],Gi[Hi]=null;for(;e===Oi;)Oi=Fn[--Un],Fn[Un]=null,kr=Fn[--Un],Fn[Un]=null,Pr=Fn[--Un],Fn[Un]=null}var In=null,Mn=null,dt=!1,qn=null;function jy(e,t){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Tp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,In=e,Mn=Xr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,In=e,Mn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Oi!==null?{id:Pr,overflow:kr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,In=e,Mn=null,!0):!1;default:return!1}}function bu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wu(e){if(dt){var t=Mn;if(t){var n=t;if(!Tp(e,t)){if(bu(e))throw Error(G(418));t=Xr(n.nextSibling);var r=In;t&&Tp(e,t)?jy(r,n):(e.flags=e.flags&-4097|2,dt=!1,In=e)}}else{if(bu(e))throw Error(G(418));e.flags=e.flags&-4097|2,dt=!1,In=e}}}function Op(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;In=e}function na(e){if(e!==In)return!1;if(!dt)return Op(e),dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xu(e.type,e.memoizedProps)),t&&(t=Mn)){if(bu(e))throw By(),Error(G(418));for(;t;)jy(e,t),t=Xr(t.nextSibling)}if(Op(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mn=Xr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mn=null}}else Mn=In?Xr(e.stateNode.nextSibling):null;return!0}function By(){for(var e=Mn;e;)e=Xr(e.nextSibling)}function oo(){Mn=In=null,dt=!1}function Ff(e){qn===null?qn=[e]:qn.push(e)}var tS=jr.ReactCurrentBatchConfig;function Yn(e,t){if(e&&e.defaultProps){t=yt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Qa=ai(null),qa=null,Wi=null,Uf=null;function $f(){Uf=Wi=qa=null}function zf(e){var t=Qa.current;ft(Qa),e._currentValue=t}function Eu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function eo(e,t){qa=e,Uf=Wi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_n=!0),e.firstContext=null)}function Hn(e){var t=e._currentValue;if(Uf!==e)if(e={context:e,memoizedValue:t,next:null},Wi===null){if(qa===null)throw Error(G(308));Wi=e,qa.dependencies={lanes:0,firstContext:e}}else Wi=Wi.next=e;return t}var Ci=null;function Vf(e){Ci===null?Ci=[e]:Ci.push(e)}function Fy(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Vf(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ar(e,r)}function Ar(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vr=!1;function Gf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ar(e,n)}return i=r.interleaved,i===null?(t.next=t,Vf(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ar(e,n)}function ba(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Of(e,n)}}function Rp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xa(e,t,n,r){var i=e.updateQueue;Vr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,s===null?o=c:s.next=c,s=a;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(o!==null){var d=i.baseState;s=0,f=c=a=null,l=o;do{var p=l.lane,S=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,_=l;switch(p=t,S=n,_.tag){case 1:if(x=_.payload,typeof x=="function"){d=x.call(S,d,p);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=_.payload,p=typeof x=="function"?x.call(S,d,p):x,p==null)break e;d=yt({},d,p);break e;case 2:Vr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else S={eventTime:S,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=S,a=d):f=f.next=S,s|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Mi|=s,e.lanes=s,e.memoizedState=d}}function Mp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var $y=new Fm.Component().refs;function Pu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ml={isMounted:function(e){return(e=e._reactInternals)?Ni(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mn(),i=ti(e),o=Or(r,i);o.payload=t,n!=null&&(o.callback=n),t=Zr(e,o,i),t!==null&&(tr(t,e,i,r),ba(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mn(),i=ti(e),o=Or(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Zr(e,o,i),t!==null&&(tr(t,e,i,r),ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mn(),r=ti(e),i=Or(n,r);i.tag=2,t!=null&&(i.callback=t),t=Zr(e,i,r),t!==null&&(tr(t,e,r,n),ba(t,e,r))}};function Dp(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!hs(n,r)||!hs(i,o):!0}function zy(e,t,n){var r=!1,i=ii,o=t.contextType;return typeof o=="object"&&o!==null?o=Hn(o):(i=wn(t)?Ti:sn.current,r=t.contextTypes,o=(r=r!=null)?io(e,i):ii),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ip(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ml.enqueueReplaceState(t,t.state,null)}function ku(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=$y,Gf(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Hn(o):(o=wn(t)?Ti:sn.current,i.context=io(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Pu(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ml.enqueueReplaceState(i,i.state,null),Xa(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function To(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var l=i.refs;l===$y&&(l=i.refs={}),s===null?delete l[o]:l[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function ra(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ap(e){var t=e._init;return t(e._payload)}function Vy(e){function t(C,g){if(e){var w=C.deletions;w===null?(C.deletions=[g],C.flags|=16):w.push(g)}}function n(C,g){if(!e)return null;for(;g!==null;)t(C,g),g=g.sibling;return null}function r(C,g){for(C=new Map;g!==null;)g.key!==null?C.set(g.key,g):C.set(g.index,g),g=g.sibling;return C}function i(C,g){return C=ni(C,g),C.index=0,C.sibling=null,C}function o(C,g,w){return C.index=w,e?(w=C.alternate,w!==null?(w=w.index,w<g?(C.flags|=2,g):w):(C.flags|=2,g)):(C.flags|=1048576,g)}function s(C){return e&&C.alternate===null&&(C.flags|=2),C}function l(C,g,w,P){return g===null||g.tag!==6?(g=Oc(w,C.mode,P),g.return=C,g):(g=i(g,w),g.return=C,g)}function a(C,g,w,P){var B=w.type;return B===Bi?f(C,g,w.props.children,P,w.key):g!==null&&(g.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===zr&&Ap(B)===g.type)?(P=i(g,w.props),P.ref=To(C,g,w),P.return=C,P):(P=Oa(w.type,w.key,w.props,null,C.mode,P),P.ref=To(C,g,w),P.return=C,P)}function c(C,g,w,P){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Rc(w,C.mode,P),g.return=C,g):(g=i(g,w.children||[]),g.return=C,g)}function f(C,g,w,P,B){return g===null||g.tag!==7?(g=Ei(w,C.mode,P,B),g.return=C,g):(g=i(g,w),g.return=C,g)}function d(C,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Oc(""+g,C.mode,w),g.return=C,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ws:return w=Oa(g.type,g.key,g.props,null,C.mode,w),w.ref=To(C,null,g),w.return=C,w;case ji:return g=Rc(g,C.mode,w),g.return=C,g;case zr:var P=g._init;return d(C,P(g._payload),w)}if(Fo(g)||bo(g))return g=Ei(g,C.mode,w,null),g.return=C,g;ra(C,g)}return null}function p(C,g,w,P){var B=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return B!==null?null:l(C,g,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ws:return w.key===B?a(C,g,w,P):null;case ji:return w.key===B?c(C,g,w,P):null;case zr:return B=w._init,p(C,g,B(w._payload),P)}if(Fo(w)||bo(w))return B!==null?null:f(C,g,w,P,null);ra(C,w)}return null}function S(C,g,w,P,B){if(typeof P=="string"&&P!==""||typeof P=="number")return C=C.get(w)||null,l(g,C,""+P,B);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ws:return C=C.get(P.key===null?w:P.key)||null,a(g,C,P,B);case ji:return C=C.get(P.key===null?w:P.key)||null,c(g,C,P,B);case zr:var K=P._init;return S(C,g,w,K(P._payload),B)}if(Fo(P)||bo(P))return C=C.get(w)||null,f(g,C,P,B,null);ra(g,P)}return null}function x(C,g,w,P){for(var B=null,K=null,J=g,Q=g=0,Fe=null;J!==null&&Q<w.length;Q++){J.index>Q?(Fe=J,J=null):Fe=J.sibling;var Y=p(C,J,w[Q],P);if(Y===null){J===null&&(J=Fe);break}e&&J&&Y.alternate===null&&t(C,J),g=o(Y,g,Q),K===null?B=Y:K.sibling=Y,K=Y,J=Fe}if(Q===w.length)return n(C,J),dt&&hi(C,Q),B;if(J===null){for(;Q<w.length;Q++)J=d(C,w[Q],P),J!==null&&(g=o(J,g,Q),K===null?B=J:K.sibling=J,K=J);return dt&&hi(C,Q),B}for(J=r(C,J);Q<w.length;Q++)Fe=S(J,C,Q,w[Q],P),Fe!==null&&(e&&Fe.alternate!==null&&J.delete(Fe.key===null?Q:Fe.key),g=o(Fe,g,Q),K===null?B=Fe:K.sibling=Fe,K=Fe);return e&&J.forEach(function(at){return t(C,at)}),dt&&hi(C,Q),B}function _(C,g,w,P){var B=bo(w);if(typeof B!="function")throw Error(G(150));if(w=B.call(w),w==null)throw Error(G(151));for(var K=B=null,J=g,Q=g=0,Fe=null,Y=w.next();J!==null&&!Y.done;Q++,Y=w.next()){J.index>Q?(Fe=J,J=null):Fe=J.sibling;var at=p(C,J,Y.value,P);if(at===null){J===null&&(J=Fe);break}e&&J&&at.alternate===null&&t(C,J),g=o(at,g,Q),K===null?B=at:K.sibling=at,K=at,J=Fe}if(Y.done)return n(C,J),dt&&hi(C,Q),B;if(J===null){for(;!Y.done;Q++,Y=w.next())Y=d(C,Y.value,P),Y!==null&&(g=o(Y,g,Q),K===null?B=Y:K.sibling=Y,K=Y);return dt&&hi(C,Q),B}for(J=r(C,J);!Y.done;Q++,Y=w.next())Y=S(J,C,Q,Y.value,P),Y!==null&&(e&&Y.alternate!==null&&J.delete(Y.key===null?Q:Y.key),g=o(Y,g,Q),K===null?B=Y:K.sibling=Y,K=Y);return e&&J.forEach(function(lt){return t(C,lt)}),dt&&hi(C,Q),B}function I(C,g,w,P){if(typeof w=="object"&&w!==null&&w.type===Bi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ws:e:{for(var B=w.key,K=g;K!==null;){if(K.key===B){if(B=w.type,B===Bi){if(K.tag===7){n(C,K.sibling),g=i(K,w.props.children),g.return=C,C=g;break e}}else if(K.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===zr&&Ap(B)===K.type){n(C,K.sibling),g=i(K,w.props),g.ref=To(C,K,w),g.return=C,C=g;break e}n(C,K);break}else t(C,K);K=K.sibling}w.type===Bi?(g=Ei(w.props.children,C.mode,P,w.key),g.return=C,C=g):(P=Oa(w.type,w.key,w.props,null,C.mode,P),P.ref=To(C,g,w),P.return=C,C=P)}return s(C);case ji:e:{for(K=w.key;g!==null;){if(g.key===K)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(C,g.sibling),g=i(g,w.children||[]),g.return=C,C=g;break e}else{n(C,g);break}else t(C,g);g=g.sibling}g=Rc(w,C.mode,P),g.return=C,C=g}return s(C);case zr:return K=w._init,I(C,g,K(w._payload),P)}if(Fo(w))return x(C,g,w,P);if(bo(w))return _(C,g,w,P);ra(C,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(C,g.sibling),g=i(g,w),g.return=C,C=g):(n(C,g),g=Oc(w,C.mode,P),g.return=C,C=g),s(C)):n(C,g)}return I}var so=Vy(!0),Gy=Vy(!1),Fs={},ur=ai(Fs),vs=ai(Fs),xs=ai(Fs);function _i(e){if(e===Fs)throw Error(G(174));return e}function Hf(e,t){switch(st(xs,t),st(vs,e),st(ur,Fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ou(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ou(t,e)}ft(ur),st(ur,t)}function ao(){ft(ur),ft(vs),ft(xs)}function Hy(e){_i(xs.current);var t=_i(ur.current),n=ou(t,e.type);t!==n&&(st(vs,e),st(ur,n))}function Wf(e){vs.current===e&&(ft(ur),ft(vs))}var ht=ai(0);function Za(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bc=[];function Kf(){for(var e=0;e<bc.length;e++)bc[e]._workInProgressVersionPrimary=null;bc.length=0}var wa=jr.ReactCurrentDispatcher,wc=jr.ReactCurrentBatchConfig,Ri=0,mt=null,At=null,Bt=null,el=!1,Zo=!1,Ss=0,nS=0;function Xt(){throw Error(G(321))}function Yf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nr(e[n],t[n]))return!1;return!0}function Jf(e,t,n,r,i,o){if(Ri=o,mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wa.current=e===null||e.memoizedState===null?sS:aS,e=n(r,i),Zo){o=0;do{if(Zo=!1,Ss=0,25<=o)throw Error(G(301));o+=1,Bt=At=null,t.updateQueue=null,wa.current=lS,e=n(r,i)}while(Zo)}if(wa.current=tl,t=At!==null&&At.next!==null,Ri=0,Bt=At=mt=null,el=!1,t)throw Error(G(300));return e}function Qf(){var e=Ss!==0;return Ss=0,e}function sr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?mt.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Wn(){if(At===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Bt===null?mt.memoizedState:Bt.next;if(t!==null)Bt=t,At=e;else{if(e===null)throw Error(G(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Bt===null?mt.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function Cs(e,t){return typeof t=="function"?t(e):t}function Ec(e){var t=Wn(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=At,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,c=o;do{var f=c.lane;if((Ri&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,s=r):a=a.next=d,mt.lanes|=f,Mi|=f}c=c.next}while(c!==null&&c!==o);a===null?s=r:a.next=l,nr(r,t.memoizedState)||(_n=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,mt.lanes|=o,Mi|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pc(e){var t=Wn(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);nr(o,t.memoizedState)||(_n=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Wy(){}function Ky(e,t){var n=mt,r=Wn(),i=t(),o=!nr(r.memoizedState,i);if(o&&(r.memoizedState=i,_n=!0),r=r.queue,qf(Qy.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,_s(9,Jy.bind(null,n,r,i,t),void 0,null),Ft===null)throw Error(G(349));Ri&30||Yy(n,t,i)}return i}function Yy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jy(e,t,n,r){t.value=n,t.getSnapshot=r,qy(t)&&Xy(e)}function Qy(e,t,n){return n(function(){qy(t)&&Xy(e)})}function qy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nr(e,n)}catch{return!0}}function Xy(e){var t=Ar(e,1);t!==null&&tr(t,e,1,-1)}function Np(e){var t=sr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:e},t.queue=e,e=e.dispatch=oS.bind(null,mt,e),[t.memoizedState,e]}function _s(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Zy(){return Wn().memoizedState}function Ea(e,t,n,r){var i=sr();mt.flags|=e,i.memoizedState=_s(1|t,n,void 0,r===void 0?null:r)}function Dl(e,t,n,r){var i=Wn();r=r===void 0?null:r;var o=void 0;if(At!==null){var s=At.memoizedState;if(o=s.destroy,r!==null&&Yf(r,s.deps)){i.memoizedState=_s(t,n,o,r);return}}mt.flags|=e,i.memoizedState=_s(1|t,n,o,r)}function Lp(e,t){return Ea(8390656,8,e,t)}function qf(e,t){return Dl(2048,8,e,t)}function eg(e,t){return Dl(4,2,e,t)}function tg(e,t){return Dl(4,4,e,t)}function ng(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rg(e,t,n){return n=n!=null?n.concat([e]):null,Dl(4,4,ng.bind(null,t,e),n)}function Xf(){}function ig(e,t){var n=Wn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function og(e,t){var n=Wn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sg(e,t,n){return Ri&21?(nr(n,t)||(n=cy(),mt.lanes|=n,Mi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_n=!0),e.memoizedState=n)}function rS(e,t){var n=rt;rt=n!==0&&4>n?n:4,e(!0);var r=wc.transition;wc.transition={};try{e(!1),t()}finally{rt=n,wc.transition=r}}function ag(){return Wn().memoizedState}function iS(e,t,n){var r=ti(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lg(e))cg(t,n);else if(n=Fy(e,t,n,r),n!==null){var i=mn();tr(n,e,r,i),ug(n,t,r)}}function oS(e,t,n){var r=ti(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lg(e))cg(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,nr(l,s)){var a=t.interleaved;a===null?(i.next=i,Vf(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=Fy(e,t,i,r),n!==null&&(i=mn(),tr(n,e,r,i),ug(n,t,r))}}function lg(e){var t=e.alternate;return e===mt||t!==null&&t===mt}function cg(e,t){Zo=el=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ug(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Of(e,n)}}var tl={readContext:Hn,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},sS={readContext:Hn,useCallback:function(e,t){return sr().memoizedState=[e,t===void 0?null:t],e},useContext:Hn,useEffect:Lp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ea(4194308,4,ng.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ea(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ea(4,2,e,t)},useMemo:function(e,t){var n=sr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=iS.bind(null,mt,e),[r.memoizedState,e]},useRef:function(e){var t=sr();return e={current:e},t.memoizedState=e},useState:Np,useDebugValue:Xf,useDeferredValue:function(e){return sr().memoizedState=e},useTransition:function(){var e=Np(!1),t=e[0];return e=rS.bind(null,e[1]),sr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mt,i=sr();if(dt){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),Ft===null)throw Error(G(349));Ri&30||Yy(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lp(Qy.bind(null,r,o,e),[e]),r.flags|=2048,_s(9,Jy.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=sr(),t=Ft.identifierPrefix;if(dt){var n=kr,r=Pr;n=(r&~(1<<32-er(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ss++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aS={readContext:Hn,useCallback:ig,useContext:Hn,useEffect:qf,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:og,useReducer:Ec,useRef:Zy,useState:function(){return Ec(Cs)},useDebugValue:Xf,useDeferredValue:function(e){var t=Wn();return sg(t,At.memoizedState,e)},useTransition:function(){var e=Ec(Cs)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:Wy,useSyncExternalStore:Ky,useId:ag,unstable_isNewReconciler:!1},lS={readContext:Hn,useCallback:ig,useContext:Hn,useEffect:qf,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:og,useReducer:Pc,useRef:Zy,useState:function(){return Pc(Cs)},useDebugValue:Xf,useDeferredValue:function(e){var t=Wn();return At===null?t.memoizedState=e:sg(t,At.memoizedState,e)},useTransition:function(){var e=Pc(Cs)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:Wy,useSyncExternalStore:Ky,useId:ag,unstable_isNewReconciler:!1};function lo(e,t){try{var n="",r=t;do n+=L1(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function kc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Tu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cS=typeof WeakMap=="function"?WeakMap:Map;function fg(e,t,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){rl||(rl=!0,Bu=r),Tu(e,t)},n}function dg(e,t,n){n=Or(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Tu(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Tu(e,t),typeof r!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function jp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new cS;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=bS.bind(null,e,t,n),t.then(e,e))}function Bp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fp(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Or(-1,1),t.tag=2,Zr(n,t,1))),n.lanes|=1),e)}var uS=jr.ReactCurrentOwner,_n=!1;function pn(e,t,n,r){t.child=e===null?Gy(t,null,n,r):so(t,e.child,n,r)}function Up(e,t,n,r,i){n=n.render;var o=t.ref;return eo(t,i),r=Jf(e,t,n,r,o,i),n=Qf(),e!==null&&!_n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nr(e,t,i)):(dt&&n&&jf(t),t.flags|=1,pn(e,t,r,i),t.child)}function $p(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!sd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,pg(e,t,o,r,i)):(e=Oa(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:hs,n(s,r)&&e.ref===t.ref)return Nr(e,t,i)}return t.flags|=1,e=ni(o,r),e.ref=t.ref,e.return=t,t.child=e}function pg(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(hs(o,r)&&e.ref===t.ref)if(_n=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(_n=!0);else return t.lanes=e.lanes,Nr(e,t,i)}return Ou(e,t,n,r,i)}function hg(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Yi,Rn),Rn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,st(Yi,Rn),Rn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,st(Yi,Rn),Rn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,st(Yi,Rn),Rn|=r;return pn(e,t,i,n),t.child}function mg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ou(e,t,n,r,i){var o=wn(n)?Ti:sn.current;return o=io(t,o),eo(t,i),n=Jf(e,t,n,r,o,i),r=Qf(),e!==null&&!_n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nr(e,t,i)):(dt&&r&&jf(t),t.flags|=1,pn(e,t,n,i),t.child)}function zp(e,t,n,r,i){if(wn(n)){var o=!0;Ka(t)}else o=!1;if(eo(t,i),t.stateNode===null)Pa(e,t),zy(t,n,r),ku(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var a=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Hn(c):(c=wn(n)?Ti:sn.current,c=io(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Ip(t,s,r,c),Vr=!1;var p=t.memoizedState;s.state=p,Xa(t,r,s,i),a=t.memoizedState,l!==r||p!==a||bn.current||Vr?(typeof f=="function"&&(Pu(t,n,f,r),a=t.memoizedState),(l=Vr||Dp(t,n,l,r,p,a,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),s.props=r,s.state=a,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uy(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Yn(t.type,l),s.props=c,d=t.pendingProps,p=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Hn(a):(a=wn(n)?Ti:sn.current,a=io(t,a));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||p!==a)&&Ip(t,s,r,a),Vr=!1,p=t.memoizedState,s.state=p,Xa(t,r,s,i);var x=t.memoizedState;l!==d||p!==x||bn.current||Vr?(typeof S=="function"&&(Pu(t,n,S,r),x=t.memoizedState),(c=Vr||Dp(t,n,c,r,p,x,a)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,x,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,x,a)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),s.props=r,s.state=x,s.context=a,r=c):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ru(e,t,n,r,o,i)}function Ru(e,t,n,r,i,o){mg(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&kp(t,n,!1),Nr(e,t,o);r=t.stateNode,uS.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=so(t,e.child,null,o),t.child=so(t,null,l,o)):pn(e,t,l,o),t.memoizedState=r.state,i&&kp(t,n,!0),t.child}function yg(e){var t=e.stateNode;t.pendingContext?Pp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pp(e,t.context,!1),Hf(e,t.containerInfo)}function Vp(e,t,n,r,i){return oo(),Ff(i),t.flags|=256,pn(e,t,n,r),t.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function Du(e){return{baseLanes:e,cachePool:null,transitions:null}}function gg(e,t,n){var r=t.pendingProps,i=ht.current,o=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),st(ht,i&1),e===null)return wu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Nl(s,r,0,null),e=Ei(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Du(n),t.memoizedState=Mu,e):Zf(t,s));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fS(e,t,s,r,l,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=ni(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=ni(l,o):(o=Ei(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Du(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=Mu,r}return o=e.child,e=o.sibling,r=ni(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Zf(e,t){return t=Nl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ia(e,t,n,r){return r!==null&&Ff(r),so(t,e.child,null,n),e=Zf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fS(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=kc(Error(G(422))),ia(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Nl({mode:"visible",children:r.children},i,0,null),o=Ei(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&so(t,e.child,null,s),t.child.memoizedState=Du(s),t.memoizedState=Mu,o);if(!(t.mode&1))return ia(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(G(419)),r=kc(o,r,void 0),ia(e,t,s,r)}if(l=(s&e.childLanes)!==0,_n||l){if(r=Ft,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ar(e,i),tr(r,e,i,-1))}return od(),r=kc(Error(G(421))),ia(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=wS.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Mn=Xr(i.nextSibling),In=t,dt=!0,qn=null,e!==null&&(Fn[Un++]=Pr,Fn[Un++]=kr,Fn[Un++]=Oi,Pr=e.id,kr=e.overflow,Oi=t),t=Zf(t,r.children),t.flags|=4096,t)}function Gp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Eu(e.return,t,n)}function Tc(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function vg(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(pn(e,t,r.children,n),r=ht.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gp(e,n,t);else if(e.tag===19)Gp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(st(ht,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Za(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Tc(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Za(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Tc(t,!0,n,null,o);break;case"together":Tc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=ni(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ni(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dS(e,t,n){switch(t.tag){case 3:yg(t),oo();break;case 5:Hy(t);break;case 1:wn(t.type)&&Ka(t);break;case 4:Hf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;st(Qa,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(st(ht,ht.current&1),t.flags|=128,null):n&t.child.childLanes?gg(e,t,n):(st(ht,ht.current&1),e=Nr(e,t,n),e!==null?e.sibling:null);st(ht,ht.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vg(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),st(ht,ht.current),r)break;return null;case 22:case 23:return t.lanes=0,hg(e,t,n)}return Nr(e,t,n)}var xg,Iu,Sg,Cg;xg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Iu=function(){};Sg=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,_i(ur.current);var o=null;switch(n){case"input":i=tu(e,i),r=tu(e,r),o=[];break;case"select":i=yt({},i,{value:void 0}),r=yt({},r,{value:void 0}),o=[];break;case"textarea":i=iu(e,i),r=iu(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ha)}su(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(as.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(as.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ut("scroll",e),o||l===a||(o=[])):(o=o||[]).push(c,a))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};Cg=function(e,t,n,r){n!==r&&(t.flags|=4)};function Oo(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pS(e,t,n){var r=t.pendingProps;switch(Bf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return wn(t.type)&&Wa(),Zt(t),null;case 3:return r=t.stateNode,ao(),ft(bn),ft(sn),Kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(na(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qn!==null&&($u(qn),qn=null))),Iu(e,t),Zt(t),null;case 5:Wf(t);var i=_i(xs.current);if(n=t.type,e!==null&&t.stateNode!=null)Sg(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return Zt(t),null}if(e=_i(ur.current),na(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[lr]=t,r[gs]=o,e=(t.mode&1)!==0,n){case"dialog":ut("cancel",r),ut("close",r);break;case"iframe":case"object":case"embed":ut("load",r);break;case"video":case"audio":for(i=0;i<$o.length;i++)ut($o[i],r);break;case"source":ut("error",r);break;case"img":case"image":case"link":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"input":Zd(r,o),ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ut("invalid",r);break;case"textarea":tp(r,o),ut("invalid",r)}su(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&ta(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ta(r.textContent,l,e),i=["children",""+l]):as.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ut("scroll",r)}switch(n){case"input":Ks(r),ep(r,o,!0);break;case"textarea":Ks(r),np(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ha)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ym(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[lr]=t,e[gs]=r,xg(e,t,!1,!1),t.stateNode=e;e:{switch(s=au(n,r),n){case"dialog":ut("cancel",e),ut("close",e),i=r;break;case"iframe":case"object":case"embed":ut("load",e),i=r;break;case"video":case"audio":for(i=0;i<$o.length;i++)ut($o[i],e);i=r;break;case"source":ut("error",e),i=r;break;case"img":case"image":case"link":ut("error",e),ut("load",e),i=r;break;case"details":ut("toggle",e),i=r;break;case"input":Zd(e,r),i=tu(e,r),ut("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=yt({},r,{value:void 0}),ut("invalid",e);break;case"textarea":tp(e,r),i=iu(e,r),ut("invalid",e);break;default:i=r}su(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?qm(e,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Jm(e,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ls(e,a):typeof a=="number"&&ls(e,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(as.hasOwnProperty(o)?a!=null&&o==="onScroll"&&ut("scroll",e):a!=null&&bf(e,o,a,s))}switch(n){case"input":Ks(e),ep(e,r,!1);break;case"textarea":Ks(e),np(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ri(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Qi(e,!!r.multiple,o,!1):r.defaultValue!=null&&Qi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ha)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)Cg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=_i(xs.current),_i(ur.current),na(t)){if(r=t.stateNode,n=t.memoizedProps,r[lr]=t,(o=r.nodeValue!==n)&&(e=In,e!==null))switch(e.tag){case 3:ta(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ta(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=t,t.stateNode=r}return Zt(t),null;case 13:if(ft(ht),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dt&&Mn!==null&&t.mode&1&&!(t.flags&128))By(),oo(),t.flags|=98560,o=!1;else if(o=na(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(G(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[lr]=t}else oo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zt(t),o=!1}else qn!==null&&($u(qn),qn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ht.current&1?Nt===0&&(Nt=3):od())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return ao(),Iu(e,t),e===null&&ms(t.stateNode.containerInfo),Zt(t),null;case 10:return zf(t.type._context),Zt(t),null;case 17:return wn(t.type)&&Wa(),Zt(t),null;case 19:if(ft(ht),o=t.memoizedState,o===null)return Zt(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Oo(o,!1);else{if(Nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Za(e),s!==null){for(t.flags|=128,Oo(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return st(ht,ht.current&1|2),t.child}e=e.sibling}o.tail!==null&&Pt()>co&&(t.flags|=128,r=!0,Oo(o,!1),t.lanes=4194304)}else{if(!r)if(e=Za(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Oo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!dt)return Zt(t),null}else 2*Pt()-o.renderingStartTime>co&&n!==1073741824&&(t.flags|=128,r=!0,Oo(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Pt(),t.sibling=null,n=ht.current,st(ht,r?n&1|2:n&1),t):(Zt(t),null);case 22:case 23:return id(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rn&1073741824&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function hS(e,t){switch(Bf(t),t.tag){case 1:return wn(t.type)&&Wa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ao(),ft(bn),ft(sn),Kf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wf(t),null;case 13:if(ft(ht),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));oo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ft(ht),null;case 4:return ao(),null;case 10:return zf(t.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var oa=!1,rn=!1,mS=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ki(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ct(e,t,r)}else n.current=null}function Au(e,t,n){try{n()}catch(r){Ct(e,t,r)}}var Hp=!1;function yS(e,t){if(gu=za,e=Ey(),Lf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,c=0,f=0,d=e,p=null;t:for(;;){for(var S;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(a=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(S=d.firstChild)!==null;)p=d,d=S;for(;;){if(d===e)break t;if(p===n&&++c===i&&(l=s),p===o&&++f===r&&(a=s),(S=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=S}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(vu={focusedElem:e,selectionRange:n},za=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var _=x.memoizedProps,I=x.memoizedState,C=t.stateNode,g=C.getSnapshotBeforeUpdate(t.elementType===t.type?_:Yn(t.type,_),I);C.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(P){Ct(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return x=Hp,Hp=!1,x}function es(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Au(t,n,o)}i=i.next}while(i!==r)}}function Il(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Nu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _g(e){var t=e.alternate;t!==null&&(e.alternate=null,_g(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lr],delete t[gs],delete t[Cu],delete t[Xx],delete t[Zx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bg(e){return e.tag===5||e.tag===3||e.tag===4}function Wp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ha));else if(r!==4&&(e=e.child,e!==null))for(Lu(e,t,n),e=e.sibling;e!==null;)Lu(e,t,n),e=e.sibling}function ju(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ju(e,t,n),e=e.sibling;e!==null;)ju(e,t,n),e=e.sibling}var zt=null,Jn=!1;function $r(e,t,n){for(n=n.child;n!==null;)wg(e,t,n),n=n.sibling}function wg(e,t,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(El,n)}catch{}switch(n.tag){case 5:rn||Ki(n,t);case 6:var r=zt,i=Jn;zt=null,$r(e,t,n),zt=r,Jn=i,zt!==null&&(Jn?(e=zt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(Jn?(e=zt,n=n.stateNode,e.nodeType===8?Cc(e.parentNode,n):e.nodeType===1&&Cc(e,n),ds(e)):Cc(zt,n.stateNode));break;case 4:r=zt,i=Jn,zt=n.stateNode.containerInfo,Jn=!0,$r(e,t,n),zt=r,Jn=i;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Au(n,t,s),i=i.next}while(i!==r)}$r(e,t,n);break;case 1:if(!rn&&(Ki(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ct(n,t,l)}$r(e,t,n);break;case 21:$r(e,t,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,$r(e,t,n),rn=r):$r(e,t,n);break;default:$r(e,t,n)}}function Kp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mS),t.forEach(function(r){var i=ES.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:zt=l.stateNode,Jn=!1;break e;case 3:zt=l.stateNode.containerInfo,Jn=!0;break e;case 4:zt=l.stateNode.containerInfo,Jn=!0;break e}l=l.return}if(zt===null)throw Error(G(160));wg(o,s,i),zt=null,Jn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Ct(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Eg(t,e),t=t.sibling}function Eg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kn(t,e),or(e),r&4){try{es(3,e,e.return),Il(3,e)}catch(_){Ct(e,e.return,_)}try{es(5,e,e.return)}catch(_){Ct(e,e.return,_)}}break;case 1:Kn(t,e),or(e),r&512&&n!==null&&Ki(n,n.return);break;case 5:if(Kn(t,e),or(e),r&512&&n!==null&&Ki(n,n.return),e.flags&32){var i=e.stateNode;try{ls(i,"")}catch(_){Ct(e,e.return,_)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Wm(i,o),au(l,s);var c=au(l,o);for(s=0;s<a.length;s+=2){var f=a[s],d=a[s+1];f==="style"?qm(i,d):f==="dangerouslySetInnerHTML"?Jm(i,d):f==="children"?ls(i,d):bf(i,f,d,c)}switch(l){case"input":nu(i,o);break;case"textarea":Km(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Qi(i,!!o.multiple,S,!1):p!==!!o.multiple&&(o.defaultValue!=null?Qi(i,!!o.multiple,o.defaultValue,!0):Qi(i,!!o.multiple,o.multiple?[]:"",!1))}i[gs]=o}catch(_){Ct(e,e.return,_)}}break;case 6:if(Kn(t,e),or(e),r&4){if(e.stateNode===null)throw Error(G(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(_){Ct(e,e.return,_)}}break;case 3:if(Kn(t,e),or(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ds(t.containerInfo)}catch(_){Ct(e,e.return,_)}break;case 4:Kn(t,e),or(e);break;case 13:Kn(t,e),or(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(nd=Pt())),r&4&&Kp(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(rn=(c=rn)||f,Kn(t,e),rn=c):Kn(t,e),or(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(re=e,f=e.child;f!==null;){for(d=re=f;re!==null;){switch(p=re,S=p.child,p.tag){case 0:case 11:case 14:case 15:es(4,p,p.return);break;case 1:Ki(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(_){Ct(r,n,_)}}break;case 5:Ki(p,p.return);break;case 22:if(p.memoizedState!==null){Jp(d);continue}}S!==null?(S.return=p,re=S):Jp(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,a=d.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Qm("display",s))}catch(_){Ct(e,e.return,_)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(_){Ct(e,e.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Kn(t,e),or(e),r&4&&Kp(e);break;case 21:break;default:Kn(t,e),or(e)}}function or(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bg(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ls(i,""),r.flags&=-33);var o=Wp(e);ju(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Wp(e);Lu(e,l,s);break;default:throw Error(G(161))}}catch(a){Ct(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gS(e,t,n){re=e,Pg(e)}function Pg(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var i=re,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||oa;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||rn;l=oa;var c=rn;if(oa=s,(rn=a)&&!c)for(re=i;re!==null;)s=re,a=s.child,s.tag===22&&s.memoizedState!==null?Qp(i):a!==null?(a.return=s,re=a):Qp(i);for(;o!==null;)re=o,Pg(o),o=o.sibling;re=i,oa=l,rn=c}Yp(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,re=o):Yp(e)}}function Yp(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rn||Il(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Yn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Mp(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mp(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&ds(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}rn||t.flags&512&&Nu(t)}catch(p){Ct(t,t.return,p)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function Jp(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function Qp(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Il(4,t)}catch(a){Ct(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){Ct(t,i,a)}}var o=t.return;try{Nu(t)}catch(a){Ct(t,o,a)}break;case 5:var s=t.return;try{Nu(t)}catch(a){Ct(t,s,a)}}}catch(a){Ct(t,t.return,a)}if(t===e){re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,re=l;break}re=t.return}}var vS=Math.ceil,nl=jr.ReactCurrentDispatcher,ed=jr.ReactCurrentOwner,Gn=jr.ReactCurrentBatchConfig,Je=0,Ft=null,Tt=null,Ht=0,Rn=0,Yi=ai(0),Nt=0,bs=null,Mi=0,Al=0,td=0,ts=null,Cn=null,nd=0,co=1/0,_r=null,rl=!1,Bu=null,ei=null,sa=!1,Kr=null,il=0,ns=0,Fu=null,ka=-1,Ta=0;function mn(){return Je&6?Pt():ka!==-1?ka:ka=Pt()}function ti(e){return e.mode&1?Je&2&&Ht!==0?Ht&-Ht:tS.transition!==null?(Ta===0&&(Ta=cy()),Ta):(e=rt,e!==0||(e=window.event,e=e===void 0?16:yy(e.type)),e):1}function tr(e,t,n,r){if(50<ns)throw ns=0,Fu=null,Error(G(185));Ls(e,n,r),(!(Je&2)||e!==Ft)&&(e===Ft&&(!(Je&2)&&(Al|=n),Nt===4&&Hr(e,Ht)),En(e,r),n===1&&Je===0&&!(t.mode&1)&&(co=Pt()+500,Rl&&li()))}function En(e,t){var n=e.callbackNode;tx(e,t);var r=$a(e,e===Ft?Ht:0);if(r===0)n!==null&&op(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&op(n),t===1)e.tag===0?eS(qp.bind(null,e)):Ny(qp.bind(null,e)),Qx(function(){!(Je&6)&&li()}),n=null;else{switch(uy(r)){case 1:n=Tf;break;case 4:n=ay;break;case 16:n=Ua;break;case 536870912:n=ly;break;default:n=Ua}n=Ag(n,kg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function kg(e,t){if(ka=-1,Ta=0,Je&6)throw Error(G(327));var n=e.callbackNode;if(to()&&e.callbackNode!==n)return null;var r=$a(e,e===Ft?Ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ol(e,r);else{t=r;var i=Je;Je|=2;var o=Og();(Ft!==e||Ht!==t)&&(_r=null,co=Pt()+500,wi(e,t));do try{CS();break}catch(l){Tg(e,l)}while(1);$f(),nl.current=o,Je=i,Tt!==null?t=0:(Ft=null,Ht=0,t=Nt)}if(t!==0){if(t===2&&(i=du(e),i!==0&&(r=i,t=Uu(e,i))),t===1)throw n=bs,wi(e,0),Hr(e,r),En(e,Pt()),n;if(t===6)Hr(e,r);else{if(i=e.current.alternate,!(r&30)&&!xS(i)&&(t=ol(e,r),t===2&&(o=du(e),o!==0&&(r=o,t=Uu(e,o))),t===1))throw n=bs,wi(e,0),Hr(e,r),En(e,Pt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:mi(e,Cn,_r);break;case 3:if(Hr(e,r),(r&130023424)===r&&(t=nd+500-Pt(),10<t)){if($a(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){mn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Su(mi.bind(null,e,Cn,_r),t);break}mi(e,Cn,_r);break;case 4:if(Hr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-er(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vS(r/1960))-r,10<r){e.timeoutHandle=Su(mi.bind(null,e,Cn,_r),r);break}mi(e,Cn,_r);break;case 5:mi(e,Cn,_r);break;default:throw Error(G(329))}}}return En(e,Pt()),e.callbackNode===n?kg.bind(null,e):null}function Uu(e,t){var n=ts;return e.current.memoizedState.isDehydrated&&(wi(e,t).flags|=256),e=ol(e,t),e!==2&&(t=Cn,Cn=n,t!==null&&$u(t)),e}function $u(e){Cn===null?Cn=e:Cn.push.apply(Cn,e)}function xS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!nr(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hr(e,t){for(t&=~td,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-er(t),r=1<<n;e[n]=-1,t&=~r}}function qp(e){if(Je&6)throw Error(G(327));to();var t=$a(e,0);if(!(t&1))return En(e,Pt()),null;var n=ol(e,t);if(e.tag!==0&&n===2){var r=du(e);r!==0&&(t=r,n=Uu(e,r))}if(n===1)throw n=bs,wi(e,0),Hr(e,t),En(e,Pt()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mi(e,Cn,_r),En(e,Pt()),null}function rd(e,t){var n=Je;Je|=1;try{return e(t)}finally{Je=n,Je===0&&(co=Pt()+500,Rl&&li())}}function Di(e){Kr!==null&&Kr.tag===0&&!(Je&6)&&to();var t=Je;Je|=1;var n=Gn.transition,r=rt;try{if(Gn.transition=null,rt=1,e)return e()}finally{rt=r,Gn.transition=n,Je=t,!(Je&6)&&li()}}function id(){Rn=Yi.current,ft(Yi)}function wi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Jx(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(Bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wa();break;case 3:ao(),ft(bn),ft(sn),Kf();break;case 5:Wf(r);break;case 4:ao();break;case 13:ft(ht);break;case 19:ft(ht);break;case 10:zf(r.type._context);break;case 22:case 23:id()}n=n.return}if(Ft=e,Tt=e=ni(e.current,null),Ht=Rn=t,Nt=0,bs=null,td=Al=Mi=0,Cn=ts=null,Ci!==null){for(t=0;t<Ci.length;t++)if(n=Ci[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ci=null}return e}function Tg(e,t){do{var n=Tt;try{if($f(),wa.current=tl,el){for(var r=mt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}el=!1}if(Ri=0,Bt=At=mt=null,Zo=!1,Ss=0,ed.current=null,n===null||n.return===null){Nt=1,bs=t,Tt=null;break}e:{var o=e,s=n.return,l=n,a=t;if(t=Ht,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Bp(s);if(S!==null){S.flags&=-257,Fp(S,s,l,o,t),S.mode&1&&jp(o,c,t),t=S,a=c;var x=t.updateQueue;if(x===null){var _=new Set;_.add(a),t.updateQueue=_}else x.add(a);break e}else{if(!(t&1)){jp(o,c,t),od();break e}a=Error(G(426))}}else if(dt&&l.mode&1){var I=Bp(s);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Fp(I,s,l,o,t),Ff(lo(a,l));break e}}o=a=lo(a,l),Nt!==4&&(Nt=2),ts===null?ts=[o]:ts.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var C=fg(o,a,t);Rp(o,C);break e;case 1:l=a;var g=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ei===null||!ei.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var P=dg(o,l,t);Rp(o,P);break e}}o=o.return}while(o!==null)}Mg(n)}catch(B){t=B,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(1)}function Og(){var e=nl.current;return nl.current=tl,e===null?tl:e}function od(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Ft===null||!(Mi&268435455)&&!(Al&268435455)||Hr(Ft,Ht)}function ol(e,t){var n=Je;Je|=2;var r=Og();(Ft!==e||Ht!==t)&&(_r=null,wi(e,t));do try{SS();break}catch(i){Tg(e,i)}while(1);if($f(),Je=n,nl.current=r,Tt!==null)throw Error(G(261));return Ft=null,Ht=0,Nt}function SS(){for(;Tt!==null;)Rg(Tt)}function CS(){for(;Tt!==null&&!W1();)Rg(Tt)}function Rg(e){var t=Ig(e.alternate,e,Rn);e.memoizedProps=e.pendingProps,t===null?Mg(e):Tt=t,ed.current=null}function Mg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hS(n,t),n!==null){n.flags&=32767,Tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Nt=6,Tt=null;return}}else if(n=pS(n,t,Rn),n!==null){Tt=n;return}if(t=t.sibling,t!==null){Tt=t;return}Tt=t=e}while(t!==null);Nt===0&&(Nt=5)}function mi(e,t,n){var r=rt,i=Gn.transition;try{Gn.transition=null,rt=1,_S(e,t,n,r)}finally{Gn.transition=i,rt=r}return null}function _S(e,t,n,r){do to();while(Kr!==null);if(Je&6)throw Error(G(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(nx(e,o),e===Ft&&(Tt=Ft=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sa||(sa=!0,Ag(Ua,function(){return to(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Gn.transition,Gn.transition=null;var s=rt;rt=1;var l=Je;Je|=4,ed.current=null,yS(e,n),Eg(n,e),zx(vu),za=!!gu,vu=gu=null,e.current=n,gS(n),K1(),Je=l,rt=s,Gn.transition=o}else e.current=n;if(sa&&(sa=!1,Kr=e,il=i),o=e.pendingLanes,o===0&&(ei=null),Q1(n.stateNode),En(e,Pt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rl)throw rl=!1,e=Bu,Bu=null,e;return il&1&&e.tag!==0&&to(),o=e.pendingLanes,o&1?e===Fu?ns++:(ns=0,Fu=e):ns=0,li(),null}function to(){if(Kr!==null){var e=uy(il),t=Gn.transition,n=rt;try{if(Gn.transition=null,rt=16>e?16:e,Kr===null)var r=!1;else{if(e=Kr,Kr=null,il=0,Je&6)throw Error(G(331));var i=Je;for(Je|=4,re=e.current;re!==null;){var o=re,s=o.child;if(re.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(re=c;re!==null;){var f=re;switch(f.tag){case 0:case 11:case 15:es(8,f,o)}var d=f.child;if(d!==null)d.return=f,re=d;else for(;re!==null;){f=re;var p=f.sibling,S=f.return;if(_g(f),f===c){re=null;break}if(p!==null){p.return=S,re=p;break}re=S}}}var x=o.alternate;if(x!==null){var _=x.child;if(_!==null){x.child=null;do{var I=_.sibling;_.sibling=null,_=I}while(_!==null)}}re=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,re=s;else e:for(;re!==null;){if(o=re,o.flags&2048)switch(o.tag){case 0:case 11:case 15:es(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,re=C;break e}re=o.return}}var g=e.current;for(re=g;re!==null;){s=re;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,re=w;else e:for(s=g;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Il(9,l)}}catch(B){Ct(l,l.return,B)}if(l===s){re=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,re=P;break e}re=l.return}}if(Je=i,li(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(El,e)}catch{}r=!0}return r}finally{rt=n,Gn.transition=t}}return!1}function Xp(e,t,n){t=lo(n,t),t=fg(e,t,1),e=Zr(e,t,1),t=mn(),e!==null&&(Ls(e,1,t),En(e,t))}function Ct(e,t,n){if(e.tag===3)Xp(e,e,n);else for(;t!==null;){if(t.tag===3){Xp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ei===null||!ei.has(r))){e=lo(n,e),e=dg(t,e,1),t=Zr(t,e,1),e=mn(),t!==null&&(Ls(t,1,e),En(t,e));break}}t=t.return}}function bS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=mn(),e.pingedLanes|=e.suspendedLanes&n,Ft===e&&(Ht&n)===n&&(Nt===4||Nt===3&&(Ht&130023424)===Ht&&500>Pt()-nd?wi(e,0):td|=n),En(e,t)}function Dg(e,t){t===0&&(e.mode&1?(t=Qs,Qs<<=1,!(Qs&130023424)&&(Qs=4194304)):t=1);var n=mn();e=Ar(e,t),e!==null&&(Ls(e,t,n),En(e,n))}function wS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Dg(e,n)}function ES(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),Dg(e,n)}var Ig;Ig=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||bn.current)_n=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _n=!1,dS(e,t,n);_n=!!(e.flags&131072)}else _n=!1,dt&&t.flags&1048576&&Ly(t,Ja,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pa(e,t),e=t.pendingProps;var i=io(t,sn.current);eo(t,n),i=Jf(null,t,r,e,i,n);var o=Qf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wn(r)?(o=!0,Ka(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gf(t),i.updater=Ml,t.stateNode=i,i._reactInternals=t,ku(t,r,e,n),t=Ru(null,t,r,!0,o,n)):(t.tag=0,dt&&o&&jf(t),pn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pa(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=kS(r),e=Yn(r,e),i){case 0:t=Ou(null,t,r,e,n);break e;case 1:t=zp(null,t,r,e,n);break e;case 11:t=Up(null,t,r,e,n);break e;case 14:t=$p(null,t,r,Yn(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yn(r,i),Ou(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yn(r,i),zp(e,t,r,i,n);case 3:e:{if(yg(t),e===null)throw Error(G(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Uy(e,t),Xa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=lo(Error(G(423)),t),t=Vp(e,t,r,n,i);break e}else if(r!==i){i=lo(Error(G(424)),t),t=Vp(e,t,r,n,i);break e}else for(Mn=Xr(t.stateNode.containerInfo.firstChild),In=t,dt=!0,qn=null,n=Gy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oo(),r===i){t=Nr(e,t,n);break e}pn(e,t,r,n)}t=t.child}return t;case 5:return Hy(t),e===null&&wu(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,xu(r,i)?s=null:o!==null&&xu(r,o)&&(t.flags|=32),mg(e,t),pn(e,t,s,n),t.child;case 6:return e===null&&wu(t),null;case 13:return gg(e,t,n);case 4:return Hf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=so(t,null,r,n):pn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yn(r,i),Up(e,t,r,i,n);case 7:return pn(e,t,t.pendingProps,n),t.child;case 8:return pn(e,t,t.pendingProps.children,n),t.child;case 12:return pn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,st(Qa,r._currentValue),r._currentValue=s,o!==null)if(nr(o.value,s)){if(o.children===i.children&&!bn.current){t=Nr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Or(-1,n&-n),a.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Eu(o.return,n,t),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(G(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Eu(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}pn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,eo(t,n),i=Hn(i),r=r(i),t.flags|=1,pn(e,t,r,n),t.child;case 14:return r=t.type,i=Yn(r,t.pendingProps),i=Yn(r.type,i),$p(e,t,r,i,n);case 15:return pg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yn(r,i),Pa(e,t),t.tag=1,wn(r)?(e=!0,Ka(t)):e=!1,eo(t,n),zy(t,r,i),ku(t,r,i,n),Ru(null,t,r,!0,e,n);case 19:return vg(e,t,n);case 22:return hg(e,t,n)}throw Error(G(156,t.tag))};function Ag(e,t){return sy(e,t)}function PS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(e,t,n,r){return new PS(e,t,n,r)}function sd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kS(e){if(typeof e=="function")return sd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ef)return 11;if(e===Pf)return 14}return 2}function ni(e,t){var n=e.alternate;return n===null?(n=Vn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oa(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")sd(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Bi:return Ei(n.children,i,o,t);case wf:s=8,i|=8;break;case qc:return e=Vn(12,n,t,i|2),e.elementType=qc,e.lanes=o,e;case Xc:return e=Vn(13,n,t,i),e.elementType=Xc,e.lanes=o,e;case Zc:return e=Vn(19,n,t,i),e.elementType=Zc,e.lanes=o,e;case Vm:return Nl(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $m:s=10;break e;case zm:s=9;break e;case Ef:s=11;break e;case Pf:s=14;break e;case zr:s=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Vn(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Ei(e,t,n,r){return e=Vn(7,e,r,t),e.lanes=n,e}function Nl(e,t,n,r){return e=Vn(22,e,r,t),e.elementType=Vm,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return e=Vn(6,e,null,t),e.lanes=n,e}function Rc(e,t,n){return t=Vn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function TS(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uc(0),this.expirationTimes=uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ad(e,t,n,r,i,o,s,l,a){return e=new TS(e,t,n,l,a),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Vn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gf(o),e}function OS(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ng(e){if(!e)return ii;e=e._reactInternals;e:{if(Ni(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(wn(n))return Ay(e,n,t)}return t}function Lg(e,t,n,r,i,o,s,l,a){return e=ad(n,r,!0,e,i,o,s,l,a),e.context=Ng(null),n=e.current,r=mn(),i=ti(n),o=Or(r,i),o.callback=t??null,Zr(n,o,i),e.current.lanes=i,Ls(e,i,r),En(e,r),e}function Ll(e,t,n,r){var i=t.current,o=mn(),s=ti(i);return n=Ng(n),t.context===null?t.context=n:t.pendingContext=n,t=Or(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zr(i,t,s),e!==null&&(tr(e,i,s,o),ba(e,i,s)),s}function sl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ld(e,t){Zp(e,t),(e=e.alternate)&&Zp(e,t)}function RS(){return null}var jg=typeof reportError=="function"?reportError:function(e){console.error(e)};function cd(e){this._internalRoot=e}jl.prototype.render=cd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));Ll(e,t,null,null)};jl.prototype.unmount=cd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Di(function(){Ll(null,e,null,null)}),t[Ir]=null}};function jl(e){this._internalRoot=e}jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=py();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gr.length&&t!==0&&t<Gr[n].priority;n++);Gr.splice(n,0,e),n===0&&my(e)}};function ud(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eh(){}function MS(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=sl(s);o.call(c)}}var s=Lg(t,r,e,0,null,!1,!1,"",eh);return e._reactRootContainer=s,e[Ir]=s.current,ms(e.nodeType===8?e.parentNode:e),Di(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=sl(a);l.call(c)}}var a=ad(e,0,!1,null,null,!1,!1,"",eh);return e._reactRootContainer=a,e[Ir]=a.current,ms(e.nodeType===8?e.parentNode:e),Di(function(){Ll(t,a,n,r)}),a}function Fl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=sl(s);l.call(a)}}Ll(t,s,e,i)}else s=MS(n,t,e,i,r);return sl(s)}fy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Uo(t.pendingLanes);n!==0&&(Of(t,n|1),En(t,Pt()),!(Je&6)&&(co=Pt()+500,li()))}break;case 13:Di(function(){var r=Ar(e,1);if(r!==null){var i=mn();tr(r,e,1,i)}}),ld(e,1)}};Rf=function(e){if(e.tag===13){var t=Ar(e,134217728);if(t!==null){var n=mn();tr(t,e,134217728,n)}ld(e,134217728)}};dy=function(e){if(e.tag===13){var t=ti(e),n=Ar(e,t);if(n!==null){var r=mn();tr(n,e,t,r)}ld(e,t)}};py=function(){return rt};hy=function(e,t){var n=rt;try{return rt=e,t()}finally{rt=n}};cu=function(e,t,n){switch(t){case"input":if(nu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ol(r);if(!i)throw Error(G(90));Hm(r),nu(r,i)}}}break;case"textarea":Km(e,n);break;case"select":t=n.value,t!=null&&Qi(e,!!n.multiple,t,!1)}};ey=rd;ty=Di;var DS={usingClientEntryPoint:!1,Events:[Bs,zi,Ol,Xm,Zm,rd]},Ro={findFiberByHostInstance:Si,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},IS={bundleType:Ro.bundleType,version:Ro.version,rendererPackageName:Ro.rendererPackageName,rendererConfig:Ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iy(e),e===null?null:e.stateNode},findFiberByHostInstance:Ro.findFiberByHostInstance||RS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{El=aa.inject(IS),cr=aa}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DS;jn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(t))throw Error(G(200));return OS(e,t,null,n)};jn.createRoot=function(e,t){if(!ud(e))throw Error(G(299));var n=!1,r="",i=jg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ad(e,1,!1,null,null,n,!1,r,i),e[Ir]=t.current,ms(e.nodeType===8?e.parentNode:e),new cd(t)};jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=iy(t),e=e===null?null:e.stateNode,e};jn.flushSync=function(e){return Di(e)};jn.hydrate=function(e,t,n){if(!Bl(t))throw Error(G(200));return Fl(null,e,t,!0,n)};jn.hydrateRoot=function(e,t,n){if(!ud(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=jg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Lg(t,null,e,1,n??null,i,!1,o,s),e[Ir]=t.current,ms(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new jl(t)};jn.render=function(e,t,n){if(!Bl(t))throw Error(G(200));return Fl(null,e,t,!1,n)};jn.unmountComponentAtNode=function(e){if(!Bl(e))throw Error(G(40));return e._reactRootContainer?(Di(function(){Fl(null,null,e,!1,function(){e._reactRootContainer=null,e[Ir]=null})}),!0):!1};jn.unstable_batchedUpdates=rd;jn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bl(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Fl(e,t,n,!1,r)};jn.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}t(),e.exports=jn})(R1);var th=Yc;Kc.createRoot=th.createRoot,Kc.hydrateRoot=th.hydrateRoot;/**
 * @remix-run/router v1.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},it.apply(this,arguments)}var kt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(kt||(kt={}));const nh="popstate";function AS(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:s,hash:l}=r.location;return ws("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:hr(i)}return LS(t,n,null,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function NS(){return Math.random().toString(36).substr(2,8)}function rh(e){return{usr:e.state,key:e.key}}function ws(e,t,n,r){return n===void 0&&(n=null),it({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Br(t):t,{state:n,key:t&&t.key||r||NS()})}function hr(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Br(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Es(e){let t=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:window.location.href,n=typeof e=="string"?e:hr(e);return Be(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function LS(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=kt.Pop,a=null;function c(){l=kt.Pop,a&&a({action:l,location:p.location})}function f(S,x){l=kt.Push;let _=ws(p.location,S,x);n&&n(_,S);let I=rh(_),C=p.createHref(_);try{s.pushState(I,"",C)}catch{i.location.assign(C)}o&&a&&a({action:l,location:p.location})}function d(S,x){l=kt.Replace;let _=ws(p.location,S,x);n&&n(_,S);let I=rh(_),C=p.createHref(_);s.replaceState(I,"",C),o&&a&&a({action:l,location:p.location})}let p={get action(){return l},get location(){return e(i,s)},listen(S){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(nh,c),a=S,()=>{i.removeEventListener(nh,c),a=null}},createHref(S){return t(i,S)},encodeLocation(S){let x=Es(typeof S=="string"?S:hr(S));return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:d,go(S){return s.go(S)}};return p}var Vt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vt||(Vt={}));function jS(e){return e.index===!0}function Bg(e,t,n){return t===void 0&&(t=[]),n===void 0&&(n=new Set),e.map((r,i)=>{let o=[...t,i],s=typeof r.id=="string"?r.id:o.join("-");return Be(r.index!==!0||!r.children,"Cannot specify children on an index route"),Be(!n.has(s),'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),n.add(s),jS(r)?it({},r,{id:s}):it({},r,{id:s,children:r.children?Bg(r.children,o,n):void 0})})}function zo(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Br(t):t,i=$g(r.pathname||"/",n);if(i==null)return null;let o=Fg(e);BS(o);let s=null;for(let l=0;s==null&&l<o.length;++l)s=KS(o[l],QS(i));return s}function Fg(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let a={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};a.relativePath.startsWith("/")&&(Be(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=Rr([r,a.relativePath]),f=n.concat(a);o.children&&o.children.length>0&&(Be(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Fg(o.children,t,f,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:HS(c,o.index),routesMeta:f})};return e.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let a of Ug(o.path))i(o,s,a)}),t}function Ug(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=Ug(r.join("/")),l=[];return l.push(...s.map(a=>a===""?o:[o,a].join("/"))),i&&l.push(...s),l.map(a=>e.startsWith("/")&&a===""?"/":a)}function BS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:WS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const FS=/^:\w+$/,US=3,$S=2,zS=1,VS=10,GS=-2,ih=e=>e==="*";function HS(e,t){let n=e.split("/"),r=n.length;return n.some(ih)&&(r+=GS),t&&(r+=$S),n.filter(i=>!ih(i)).reduce((i,o)=>i+(FS.test(o)?US:o===""?zS:VS),r)}function WS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function KS(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],a=s===n.length-1,c=i==="/"?t:t.slice(i.length)||"/",f=YS({path:l.relativePath,caseSensitive:l.caseSensitive,end:a},c);if(!f)return null;Object.assign(r,f.params);let d=l.route;o.push({params:r,pathname:Rr([i,f.pathname]),pathnameBase:eC(Rr([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=Rr([i,f.pathnameBase]))}return o}function YS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=JS(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,f,d)=>{if(f==="*"){let p=l[d]||"";s=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}return c[f]=qS(l[d]||"",f),c},{}),pathname:o,pathnameBase:s,pattern:e}}function JS(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),fd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,l)=>(r.push(l),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function QS(e){try{return decodeURI(e)}catch(t){return fd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qS(e,t){try{return decodeURIComponent(e)}catch(n){return fd(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function $g(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function fd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function XS(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Br(e):e;return{pathname:n?n.startsWith("/")?n:ZS(n,t):t,search:tC(r),hash:nC(i)}}function ZS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Mc(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ul(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function dd(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Br(e):(i=it({},e),Be(!i.pathname||!i.pathname.includes("?"),Mc("?","pathname","search",i)),Be(!i.pathname||!i.pathname.includes("#"),Mc("#","pathname","hash",i)),Be(!i.search||!i.search.includes("#"),Mc("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,l;if(r||s==null)l=n;else{let d=t.length-1;if(s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}l=d>=0?t[d]:"/"}let a=XS(i,l),c=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||f)&&(a.pathname+="/"),a}const Rr=e=>e.join("/").replace(/\/\/+/g,"/"),eC=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tC=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nC=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class oh extends Error{}class rC{constructor(t){this.pendingKeys=new Set,this.subscriber=void 0,Be(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((i,o)=>n=o),this.controller=new AbortController;let r=()=>n(new oh("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(t).reduce((i,o)=>{let[s,l]=o;return Object.assign(i,{[s]:this.trackPromise(s,l)})},{})}trackPromise(t,n){if(!(n instanceof Promise))return n;this.pendingKeys.add(t);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,t,null,i),i=>this.onSettle(r,t,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(t,n,r,i){if(this.controller.signal.aborted&&r instanceof oh)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>r}),Promise.reject(r);this.pendingKeys.delete(n),this.done&&this.unlistenAbortSignal();const o=this.subscriber;return r?(Object.defineProperty(t,"_error",{get:()=>r}),o&&o(!1),Promise.reject(r)):(Object.defineProperty(t,"_data",{get:()=>i}),o&&o(!1),i)}subscribe(t){this.subscriber=t}cancel(){this.controller.abort(),this.pendingKeys.forEach((n,r)=>this.pendingKeys.delete(r));let t=this.subscriber;t&&t(!0)}async resolveData(t){let n=!1;if(!this.done){let r=()=>this.cancel();t.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(o=>{t.removeEventListener("abort",r),(o||this.done)&&i(o)})})}return n}get done(){return this.pendingKeys.size===0}get unwrappedData(){return Be(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,n)=>{let[r,i]=n;return Object.assign(t,{[r]:oC(i)})},{})}}function iC(e){return e instanceof Promise&&e._tracked===!0}function oC(e){if(!iC(e))return e;if(e._error)throw e._error;return e._data}const sC=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",t),new Response(null,it({},r,{headers:i}))};class $l{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function zg(e){return e instanceof $l}const Vg=["post","put","patch","delete"],aC=new Set(Vg),lC=["get",...Vg],cC=new Set(lC),uC=new Set([301,302,303,307,308]),fC=new Set([307,308]),Dc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},dC={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},pC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hC=!pC;function mC(e){Be(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=Bg(e.routes),n=null,r=new Set,i=null,o=null,s=null,l=e.hydrationData!=null,a=zo(t,e.history.location,e.basename),c=null;if(a==null){let D=gi(404,{pathname:e.history.location.pathname}),{matches:A,route:z}=fh(t);a=A,c={[z.id]:D}}let f=!a.some(D=>D.route.loader)||e.hydrationData!=null,d,p={historyAction:e.history.action,location:e.history.location,matches:a,initialized:f,navigation:Dc,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||c,fetchers:new Map},S=kt.Pop,x=!1,_,I=!1,C=!1,g=[],w=[],P=new Map,B=0,K=-1,J=new Map,Q=new Set,Fe=new Map,Y=new Map;function at(){return n=e.history.listen(D=>{let{action:A,location:z}=D;return H(A,z)}),p.initialized||H(kt.Pop,p.location),d}function lt(){n&&n(),r.clear(),_&&_.abort(),p.fetchers.forEach((D,A)=>E(A))}function Rt(D){return r.add(D),()=>r.delete(D)}function $e(D){p=it({},p,D),r.forEach(A=>A(p))}function Lt(D,A){var z;let ae=p.actionData!=null&&p.navigation.formMethod!=null&&vi(p.navigation.formMethod)&&p.navigation.state==="loading"&&((z=D.state)==null?void 0:z._isRedirect)!==!0,q;A.actionData?Object.keys(A.actionData).length>0?q=A.actionData:q=null:ae?q=p.actionData:q=null;let ye=A.loaderData?uh(p.loaderData,A.loaderData,A.matches||[],A.errors):p.loaderData;$e(it({},A,{actionData:q,loaderData:ye,historyAction:S,location:D,initialized:!0,navigation:Dc,revalidation:"idle",restoreScrollPosition:p.navigation.formData?!1:jt(D,A.matches||p.matches),preventScrollReset:x})),I||S===kt.Pop||(S===kt.Push?e.history.push(D,D.state):S===kt.Replace&&e.history.replace(D,D.state)),S=kt.Pop,x=!1,I=!1,C=!1,g=[],w=[]}async function _t(D,A){if(typeof D=="number"){e.history.go(D);return}let{path:z,submission:ae,error:q}=sh(D,A),ye=ws(p.location,z,A&&A.state);ye=it({},ye,e.history.encodeLocation(ye));let _e=A&&A.replace!=null?A.replace:void 0,Ne=kt.Push;_e===!0?Ne=kt.Replace:_e===!1||ae!=null&&vi(ae.formMethod)&&ae.formAction===p.location.pathname+p.location.search&&(Ne=kt.Replace);let ge=A&&"preventScrollReset"in A?A.preventScrollReset===!0:void 0;return await H(Ne,ye,{submission:ae,pendingError:q,preventScrollReset:ge,replace:A&&A.replace})}function Ut(){if(ln(),$e({revalidation:"loading"}),p.navigation.state!=="submitting"){if(p.navigation.state==="idle"){H(p.historyAction,p.location,{startUninterruptedRevalidation:!0});return}H(S||p.historyAction,p.navigation.location,{overrideNavigation:p.navigation})}}async function H(D,A,z){_&&_.abort(),_=null,S=D,I=(z&&z.startUninterruptedRevalidation)===!0,et(p.location,p.matches),x=(z&&z.preventScrollReset)===!0;let ae=z&&z.overrideNavigation,q=zo(t,A,e.basename);if(!q){let tt=gi(404,{pathname:A.pathname}),{matches:cn,route:un}=fh(t);pe(),Lt(A,{matches:cn,loaderData:{},errors:{[un.id]:tt}});return}if(SC(p.location,A)){Lt(A,{matches:q});return}_=new AbortController;let ye=Do(A,_.signal,z&&z.submission),_e,Ne;if(z&&z.pendingError)Ne={[Ji(q).route.id]:z.pendingError};else if(z&&z.submission&&vi(z.submission.formMethod)){let tt=await de(ye,A,z.submission,q,{replace:z.replace});if(tt.shortCircuited)return;_e=tt.pendingActionData,Ne=tt.pendingActionError,ae=it({state:"loading",location:A},z.submission),ye=new Request(ye.url,{signal:ye.signal})}let{shortCircuited:ge,loaderData:ct,errors:Te}=await Ce(ye,A,q,ae,z&&z.submission,z&&z.replace,_e,Ne);ge||(_=null,Lt(A,it({matches:q},_e?{actionData:_e}:{},{loaderData:ct,errors:Te})))}async function de(D,A,z,ae,q){ln();let ye=it({state:"submitting",location:A},z);$e({navigation:ye});let _e,Ne=mh(ae,A);if(!Ne.route.action)_e={type:Vt.error,error:gi(405,{method:D.method,pathname:A.pathname,routeId:Ne.route.id})};else if(_e=await Mo("action",D,Ne,ae,d.basename),D.signal.aborted)return{shortCircuited:!0};if(no(_e)){let ge;return q&&q.replace!=null?ge=q.replace:ge=_e.location===p.location.pathname+p.location.search,await he(p,_e,{submission:z,replace:ge}),{shortCircuited:!0}}if(rs(_e)){let ge=Ji(ae,Ne.route.id);return(q&&q.replace)!==!0&&(S=kt.Push),{pendingActionData:{},pendingActionError:{[ge.route.id]:_e.error}}}if(bi(_e))throw new Error("defer() is not supported in actions");return{pendingActionData:{[Ne.route.id]:_e.data}}}async function Ce(D,A,z,ae,q,ye,_e,Ne){let ge=ae;ge||(ge=it({state:"loading",location:A,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},q));let ct=q||(ge.formMethod&&ge.formAction&&ge.formData&&ge.formEncType?{formMethod:ge.formMethod,formAction:ge.formAction,formData:ge.formData,formEncType:ge.formEncType}:void 0),[Te,tt]=ah(p,z,ct,A,C,g,w,_e,Ne,Fe);if(pe(bt=>!(z&&z.some(Mt=>Mt.route.id===bt))||Te&&Te.some(Mt=>Mt.route.id===bt)),Te.length===0&&tt.length===0)return Lt(A,it({matches:z,loaderData:{},errors:Ne||null},_e?{actionData:_e}:{})),{shortCircuited:!0};if(!I){tt.forEach(Mt=>{let[kn]=Mt,Sr=p.fetchers.get(kn),Ur={state:"loading",data:Sr&&Sr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};p.fetchers.set(kn,Ur)});let bt=_e||p.actionData;$e(it({navigation:ge},bt?Object.keys(bt).length===0?{actionData:null}:{actionData:bt}:{},tt.length>0?{fetchers:new Map(p.fetchers)}:{}))}K=++B,tt.forEach(bt=>{let[Mt]=bt;return P.set(Mt,_)});let{results:cn,loaderResults:un,fetcherResults:gr}=await Ae(p.matches,z,Te,tt,D);if(D.signal.aborted)return{shortCircuited:!0};tt.forEach(bt=>{let[Mt]=bt;return P.delete(Mt)});let vr=dh(cn);if(vr)return await he(p,vr,{replace:ye}),{shortCircuited:!0};let{loaderData:ir,errors:Pn}=ch(p,z,Te,un,Ne,tt,gr,Y);Y.forEach((bt,Mt)=>{bt.subscribe(kn=>{(kn||bt.done)&&Y.delete(Mt)})}),xe();let xr=me(K);return it({loaderData:ir,errors:Pn},xr||tt.length>0?{fetchers:new Map(p.fetchers)}:{})}function He(D){return p.fetchers.get(D)||dC}function Ze(D,A,z,ae){if(hC)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");P.has(D)&&O(D);let q=zo(t,z,e.basename);if(!q){rr(D,A,gi(404,{pathname:z}));return}let{path:ye,submission:_e}=sh(z,ae,!0),Ne=mh(q,ye);if(_e&&vi(_e.formMethod)){pt(D,A,ye,Ne,q,_e);return}Fe.set(D,[ye,Ne,q]),qe(D,A,ye,Ne,q,_e)}async function pt(D,A,z,ae,q,ye){if(ln(),Fe.delete(D),!ae.route.action){let Dt=gi(405,{method:ye.formMethod,pathname:z,routeId:A});rr(D,A,Dt);return}let _e=p.fetchers.get(D),Ne=it({state:"submitting"},ye,{data:_e&&_e.data," _hasFetcherDoneAnything ":!0});p.fetchers.set(D,Ne),$e({fetchers:new Map(p.fetchers)});let ge=new AbortController,ct=Do(z,ge.signal,ye);P.set(D,ge);let Te=await Mo("action",ct,ae,q,d.basename);if(ct.signal.aborted){P.get(D)===ge&&P.delete(D);return}if(no(Te)){P.delete(D),Q.add(D);let Dt=it({state:"loading"},ye,{data:void 0," _hasFetcherDoneAnything ":!0});return p.fetchers.set(D,Dt),$e({fetchers:new Map(p.fetchers)}),he(p,Te,{isFetchActionRedirect:!0})}if(rs(Te)){rr(D,A,Te.error);return}bi(Te)&&Be(!1,"defer() is not supported in actions");let tt=p.navigation.location||p.location,cn=Do(tt,ge.signal),un=p.navigation.state!=="idle"?zo(t,p.navigation.location,e.basename):p.matches;Be(un,"Didn't find any matches after fetcher action");let gr=++B;J.set(D,gr);let vr=it({state:"loading",data:Te.data},ye,{" _hasFetcherDoneAnything ":!0});p.fetchers.set(D,vr);let[ir,Pn]=ah(p,un,ye,tt,C,g,w,{[ae.route.id]:Te.data},void 0,Fe);Pn.filter(Dt=>{let[fn]=Dt;return fn!==D}).forEach(Dt=>{let[fn]=Dt,Cr=p.fetchers.get(fn),_o={state:"loading",data:Cr&&Cr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};p.fetchers.set(fn,_o),P.set(fn,ge)}),$e({fetchers:new Map(p.fetchers)});let{results:xr,loaderResults:bt,fetcherResults:Mt}=await Ae(p.matches,un,ir,Pn,cn);if(ge.signal.aborted)return;J.delete(D),P.delete(D),Pn.forEach(Dt=>{let[fn]=Dt;return P.delete(fn)});let kn=dh(xr);if(kn)return he(p,kn);let{loaderData:Sr,errors:Ur}=ch(p,p.matches,ir,bt,void 0,Pn,Mt,Y),nc={state:"idle",data:Te.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};p.fetchers.set(D,nc);let rc=me(gr);p.navigation.state==="loading"&&gr>K?(Be(S,"Expected pending action"),_&&_.abort(),Lt(p.navigation.location,{matches:un,loaderData:Sr,errors:Ur,fetchers:new Map(p.fetchers)})):($e(it({errors:Ur,loaderData:uh(p.loaderData,Sr,un,Ur)},rc?{fetchers:new Map(p.fetchers)}:{})),C=!1)}async function qe(D,A,z,ae,q,ye){let _e=p.fetchers.get(D),Ne=it({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ye,{data:_e&&_e.data," _hasFetcherDoneAnything ":!0});p.fetchers.set(D,Ne),$e({fetchers:new Map(p.fetchers)});let ge=new AbortController,ct=Do(z,ge.signal);P.set(D,ge);let Te=await Mo("loader",ct,ae,q,d.basename);if(bi(Te)&&(Te=await Kg(Te,ct.signal,!0)||Te),P.get(D)===ge&&P.delete(D),ct.signal.aborted)return;if(no(Te)){await he(p,Te);return}if(rs(Te)){let cn=Ji(p.matches,A);p.fetchers.delete(D),$e({fetchers:new Map(p.fetchers),errors:{[cn.route.id]:Te.error}});return}Be(!bi(Te),"Unhandled fetcher deferred data");let tt={state:"idle",data:Te.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};p.fetchers.set(D,tt),$e({fetchers:new Map(p.fetchers)})}async function he(D,A,z){var ae;let{submission:q,replace:ye,isFetchActionRedirect:_e}=z===void 0?{}:z;A.revalidate&&(C=!0);let Ne=ws(D.location,A.location,it({_isRedirect:!0},_e?{_isFetchActionRedirect:!0}:{}));if(Be(Ne,"Expected a location on the redirect navigation"),typeof((ae=window)==null?void 0:ae.location)<"u"){let un=Es(A.location).origin;if(window.location.origin!==un){ye?window.location.replace(A.location):window.location.assign(A.location);return}}_=null;let ge=ye===!0?kt.Replace:kt.Push,{formMethod:ct,formAction:Te,formEncType:tt,formData:cn}=D.navigation;!q&&ct&&Te&&cn&&tt&&(q={formMethod:ct,formAction:Te,formEncType:tt,formData:cn}),fC.has(A.status)&&q&&vi(q.formMethod)?await H(ge,Ne,{submission:it({},q,{formAction:A.location})}):await H(ge,Ne,{overrideNavigation:{state:"loading",location:Ne,formMethod:q?q.formMethod:void 0,formAction:q?q.formAction:void 0,formEncType:q?q.formEncType:void 0,formData:q?q.formData:void 0}})}async function Ae(D,A,z,ae,q){let ye=await Promise.all([...z.map(ge=>Mo("loader",q,ge,A,d.basename)),...ae.map(ge=>{let[,ct,Te,tt]=ge;return Mo("loader",Do(ct,q.signal),Te,tt,d.basename)})]),_e=ye.slice(0,z.length),Ne=ye.slice(z.length);return await Promise.all([ph(D,z,_e,q.signal,!1,p.loaderData),ph(D,ae.map(ge=>{let[,,ct]=ge;return ct}),Ne,q.signal,!0)]),{results:ye,loaderResults:_e,fetcherResults:Ne}}function ln(){C=!0,g.push(...pe()),Fe.forEach((D,A)=>{P.has(A)&&(w.push(A),O(A))})}function rr(D,A,z){let ae=Ji(p.matches,A);E(D),$e({errors:{[ae.route.id]:z},fetchers:new Map(p.fetchers)})}function E(D){P.has(D)&&O(D),Fe.delete(D),J.delete(D),Q.delete(D),p.fetchers.delete(D)}function O(D){let A=P.get(D);Be(A,"Expected fetch controller: "+D),A.abort(),P.delete(D)}function F(D){for(let A of D){let ae={state:"idle",data:He(A).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};p.fetchers.set(A,ae)}}function xe(){let D=[];for(let A of Q){let z=p.fetchers.get(A);Be(z,"Expected fetcher: "+A),z.state==="loading"&&(Q.delete(A),D.push(A))}F(D)}function me(D){let A=[];for(let[z,ae]of J)if(ae<D){let q=p.fetchers.get(z);Be(q,"Expected fetcher: "+z),q.state==="loading"&&(O(z),J.delete(z),A.push(z))}return F(A),A.length>0}function pe(D){let A=[];return Y.forEach((z,ae)=>{(!D||D(ae))&&(z.cancel(),A.push(ae),Y.delete(ae))}),A}function ot(D,A,z){if(i=D,s=A,o=z||(ae=>ae.key),!l&&p.navigation===Dc){l=!0;let ae=jt(p.location,p.matches);ae!=null&&$e({restoreScrollPosition:ae})}return()=>{i=null,s=null,o=null}}function et(D,A){if(i&&o&&s){let z=A.map(q=>hh(q,p.loaderData)),ae=o(D,z)||D.key;i[ae]=s()}}function jt(D,A){if(i&&o&&s){let z=A.map(ye=>hh(ye,p.loaderData)),ae=o(D,z)||D.key,q=i[ae];if(typeof q=="number")return q}return null}return d={get basename(){return e.basename},get state(){return p},get routes(){return t},initialize:at,subscribe:Rt,enableScrollRestoration:ot,navigate:_t,fetch:Ze,revalidate:Ut,createHref:D=>e.history.createHref(D),encodeLocation:D=>e.history.encodeLocation(D),getFetcher:He,deleteFetcher:E,dispose:lt,_internalFetchControllers:P,_internalActiveDeferreds:Y},d}function yC(e){return e!=null&&"formData"in e}function sh(e,t,n){n===void 0&&(n=!1);let r=typeof e=="string"?e:hr(e);if(!t||!yC(t))return{path:r};if(t.formMethod&&!_C(t.formMethod))return{path:r,error:gi(405,{method:t.formMethod})};let i;if(t.formData&&(i={formMethod:t.formMethod||"get",formAction:Wg(r),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData},vi(i.formMethod)))return{path:r,submission:i};let o=Br(r);try{let s=Hg(t.formData);n&&o.search&&Yg(o.search)&&s.append("index",""),o.search="?"+s}catch{return{path:r,error:gi(400)}}return{path:hr(o),submission:i}}function gC(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function ah(e,t,n,r,i,o,s,l,a,c){let f=a?Object.values(a)[0]:l?Object.values(l)[0]:void 0,d=a?Object.keys(a)[0]:void 0,S=gC(t,d).filter((_,I)=>_.route.loader!=null&&(vC(e.loaderData,e.matches[I],_)||o.some(C=>C===_.route.id)||lh(e.location,e.matches[I],n,r,_,i,f))),x=[];return c&&c.forEach((_,I)=>{let[C,g,w]=_;s.includes(I)?x.push([I,C,g,w]):i&&lh(C,g,n,C,g,i,f)&&x.push([I,C,g,w])}),[S,x]}function vC(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function Gg(e,t){let n=e.route.path;return e.pathname!==t.pathname||n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function lh(e,t,n,r,i,o,s){let l=Es(e),a=t.params,c=Es(r),f=i.params,d=Gg(t,i)||l.toString()===c.toString()||l.search!==c.search||o;if(i.route.shouldRevalidate){let p=i.route.shouldRevalidate(it({currentUrl:l,currentParams:a,nextUrl:c,nextParams:f},n,{actionResult:s,defaultShouldRevalidate:d}));if(typeof p=="boolean")return p}return d}async function Mo(e,t,n,r,i,o,s,l){i===void 0&&(i="/"),o===void 0&&(o=!1),s===void 0&&(s=!1);let a,c,f,d=new Promise((S,x)=>f=x),p=()=>f();t.signal.addEventListener("abort",p);try{let S=n.route[e];Be(S,"Could not find the "+e+' to run on the "'+n.route.id+'" route'),c=await Promise.race([S({request:t,params:n.params,context:l}),d]),Be(c!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(S){a=Vt.error,c=S}finally{t.signal.removeEventListener("abort",p)}if(CC(c)){let S=c.status;if(uC.has(S)){let I=c.headers.get("Location");if(Be(I,"Redirects returned/thrown from loaders/actions must have a Location header"),!(/^[a-z+]+:\/\//i.test(I)||I.startsWith("//"))){let g=r.slice(0,r.indexOf(n)+1),w=Ul(g).map(B=>B.pathnameBase),P=dd(I,w,new URL(t.url).pathname);if(Be(hr(P),"Unable to resolve redirect location: "+I),i){let B=P.pathname;P.pathname=B==="/"?i:Rr([i,B])}I=hr(P)}if(o)throw c.headers.set("Location",I),c;return{type:Vt.redirect,status:S,location:I,revalidate:c.headers.get("X-Remix-Revalidate")!==null}}if(s)throw{type:a||Vt.data,response:c};let x,_=c.headers.get("Content-Type");return _&&/\bapplication\/json\b/.test(_)?x=await c.json():x=await c.text(),a===Vt.error?{type:a,error:new $l(S,c.statusText,x),headers:c.headers}:{type:Vt.data,data:x,statusCode:c.status,headers:c.headers}}return a===Vt.error?{type:a,error:c}:c instanceof rC?{type:Vt.deferred,deferredData:c}:{type:Vt.data,data:c}}function Do(e,t,n){let r=Es(Wg(e)).toString(),i={signal:t};if(n&&vi(n.formMethod)){let{formMethod:o,formEncType:s,formData:l}=n;i.method=o.toUpperCase(),i.body=s==="application/x-www-form-urlencoded"?Hg(l):l}return new Request(r,i)}function Hg(e){let t=new URLSearchParams;for(let[n,r]of e.entries())Be(typeof r=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),t.append(n,r);return t}function xC(e,t,n,r,i){let o={},s=null,l,a=!1,c={};return n.forEach((f,d)=>{let p=t[d].route.id;if(Be(!no(f),"Cannot handle redirect results in processLoaderData"),rs(f)){let S=Ji(e,p),x=f.error;r&&(x=Object.values(r)[0],r=void 0),s=s||{},s[S.route.id]==null&&(s[S.route.id]=x),o[p]=void 0,a||(a=!0,l=zg(f.error)?f.error.status:500),f.headers&&(c[p]=f.headers)}else bi(f)?(i&&i.set(p,f.deferredData),o[p]=f.deferredData.data):(o[p]=f.data,f.statusCode!=null&&f.statusCode!==200&&!a&&(l=f.statusCode),f.headers&&(c[p]=f.headers))}),r&&(s=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:s,statusCode:l||200,loaderHeaders:c}}function ch(e,t,n,r,i,o,s,l){let{loaderData:a,errors:c}=xC(t,n,r,i,l);for(let f=0;f<o.length;f++){let[d,,p]=o[f];Be(s!==void 0&&s[f]!==void 0,"Did not find corresponding fetcher result");let S=s[f];if(rs(S)){let x=Ji(e.matches,p.route.id);c&&c[x.route.id]||(c=it({},c,{[x.route.id]:S.error})),e.fetchers.delete(d)}else{if(no(S))throw new Error("Unhandled fetcher revalidation redirect");if(bi(S))throw new Error("Unhandled fetcher deferred data");{let x={state:"idle",data:S.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(d,x)}}}return{loaderData:a,errors:c}}function uh(e,t,n,r){let i=it({},t);for(let o of n){let s=o.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(i[s]=t[s]):e[s]!==void 0&&(i[s]=e[s]),r&&r.hasOwnProperty(s))break}return i}function Ji(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function fh(e){let t=e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function gi(e,t){let{pathname:n,routeId:r,method:i}=t===void 0?{}:t,o="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(o="Bad Request",i&&n&&r?s="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s="Cannot submit binary form data using GET"):e===403?(o="Forbidden",s='Route "'+r+'" does not match URL "'+n+'"'):e===404?(o="Not Found",s='No route matches URL "'+n+'"'):e===405&&(o="Method Not Allowed",i&&n&&r?s="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(s='Invalid request method "'+i.toUpperCase()+'"')),new $l(e||500,o,new Error(s),!0)}function dh(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(no(n))return n}}function Wg(e){let t=typeof e=="string"?Br(e):e;return hr(it({},t,{hash:""}))}function SC(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function bi(e){return e.type===Vt.deferred}function rs(e){return e.type===Vt.error}function no(e){return(e&&e.type)===Vt.redirect}function CC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function _C(e){return cC.has(e)}function vi(e){return aC.has(e)}async function ph(e,t,n,r,i,o){for(let s=0;s<n.length;s++){let l=n[s],a=t[s],c=e.find(d=>d.route.id===a.route.id),f=c!=null&&!Gg(c,a)&&(o&&o[a.route.id])!==void 0;bi(l)&&(i||f)&&await Kg(l,r,i).then(d=>{d&&(n[s]=d||n[s])})}}async function Kg(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Vt.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Vt.error,error:i}}return{type:Vt.data,data:e.deferredData.data}}}function Yg(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function hh(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function mh(e,t){let n=typeof t=="string"?Br(t).search:t.search;if(e[e.length-1].route.index&&Yg(n||""))return e[e.length-1];let r=Ul(e);return r[r.length-1]}/**
 * React Router v6.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},al.apply(this,arguments)}function bC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const wC=typeof Object.is=="function"?Object.is:bC,{useState:EC,useEffect:PC,useLayoutEffect:kC,useDebugValue:TC}=Wc;function OC(e,t,n){const r=t(),[{inst:i},o]=EC({inst:{value:r,getSnapshot:t}});return kC(()=>{i.value=r,i.getSnapshot=t,Ic(i)&&o({inst:i})},[e,r,t]),PC(()=>(Ic(i)&&o({inst:i}),e(()=>{Ic(i)&&o({inst:i})})),[e]),TC(r),r}function Ic(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!wC(n,r)}catch{return!0}}function RC(e,t,n){return t()}const MC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DC=!MC,IC=DC?RC:OC,AC="useSyncExternalStore"in Wc?(e=>e.useSyncExternalStore)(Wc):IC,NC=ee.createContext(null),Jg=ee.createContext(null),pd=ee.createContext(null),zl=ee.createContext(null),Vl=ee.createContext(null),yo=ee.createContext({outlet:null,matches:[]}),Qg=ee.createContext(null);function LC(e,t){let{relative:n}=t===void 0?{}:t;Us()||Be(!1);let{basename:r,navigator:i}=ee.useContext(zl),{hash:o,pathname:s,search:l}=Xg(e,{relative:n}),a=s;return r!=="/"&&(a=s==="/"?r:Rr([r,s])),i.createHref({pathname:a,search:l,hash:o})}function Us(){return ee.useContext(Vl)!=null}function go(){return Us()||Be(!1),ee.useContext(Vl).location}function qg(){Us()||Be(!1);let{basename:e,navigator:t}=ee.useContext(zl),{matches:n}=ee.useContext(yo),{pathname:r}=go(),i=JSON.stringify(Ul(n).map(l=>l.pathnameBase)),o=ee.useRef(!1);return ee.useEffect(()=>{o.current=!0}),ee.useCallback(function(l,a){if(a===void 0&&(a={}),!o.current)return;if(typeof l=="number"){t.go(l);return}let c=dd(l,JSON.parse(i),r,a.relative==="path");e!=="/"&&(c.pathname=c.pathname==="/"?e:Rr([e,c.pathname])),(a.replace?t.replace:t.push)(c,a.state,a)},[e,t,i,r])}function Xg(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=ee.useContext(yo),{pathname:i}=go(),o=JSON.stringify(Ul(r).map(s=>s.pathnameBase));return ee.useMemo(()=>dd(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function jC(e,t){Us()||Be(!1);let{navigator:n}=ee.useContext(zl),r=ee.useContext(pd),{matches:i}=ee.useContext(yo),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let a=go(),c;if(t){var f;let _=typeof t=="string"?Br(t):t;l==="/"||(f=_.pathname)!=null&&f.startsWith(l)||Be(!1),c=_}else c=a;let d=c.pathname||"/",p=l==="/"?d:d.slice(l.length)||"/",S=zo(e,{pathname:p}),x=$C(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},s,_.params),pathname:Rr([l,n.encodeLocation?n.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Rr([l,n.encodeLocation?n.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,r||void 0);return t&&x?ee.createElement(Vl.Provider,{value:{location:al({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:kt.Pop}},x):x}function BC(){let e=HC(),t=zg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r};return ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unhandled Thrown Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},t),n?ee.createElement("pre",{style:i},n):null,ee.createElement("p",null," Hey developer "),ee.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own",ee.createElement("code",{style:o},"errorElement")," props on",ee.createElement("code",{style:o},"<Route>")))}class FC extends ee.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?ee.createElement(yo.Provider,{value:this.props.routeContext},ee.createElement(Qg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UC(e){let{routeContext:t,match:n,children:r}=e,i=ee.useContext(NC);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),ee.createElement(yo.Provider,{value:t},r)}function $C(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let o=r.findIndex(s=>s.route.id&&(i==null?void 0:i[s.route.id]));o>=0||Be(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((o,s,l)=>{let a=s.route.id?i==null?void 0:i[s.route.id]:null,c=n?s.route.errorElement||ee.createElement(BC,null):null,f=t.concat(r.slice(0,l+1)),d=()=>ee.createElement(UC,{match:s,routeContext:{outlet:o,matches:f}},a?c:s.route.element!==void 0?s.route.element:o);return n&&(s.route.errorElement||l===0)?ee.createElement(FC,{location:n.location,component:c,error:a,children:d(),routeContext:{outlet:null,matches:f}}):d()},null)}var yh;(function(e){e.UseRevalidator="useRevalidator"})(yh||(yh={}));var ll;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(ll||(ll={}));function zC(e){let t=ee.useContext(pd);return t||Be(!1),t}function VC(e){let t=ee.useContext(yo);return t||Be(!1),t}function GC(e){let t=VC(),n=t.matches[t.matches.length-1];return n.route.id||Be(!1),n.route.id}function HC(){var e;let t=ee.useContext(Qg),n=zC(ll.UseRouteError),r=GC(ll.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function WC(e){let{fallbackElement:t,router:n}=e,r=AC(n.subscribe,()=>n.state,()=>n.state),i=ee.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:s=>n.navigate(s),push:(s,l,a)=>n.navigate(s,{state:l,preventScrollReset:a==null?void 0:a.preventScrollReset}),replace:(s,l,a)=>n.navigate(s,{replace:!0,state:l,preventScrollReset:a==null?void 0:a.preventScrollReset})}),[n]),o=n.basename||"/";return ee.createElement(Jg.Provider,{value:{router:n,navigator:i,static:!1,basename:o}},ee.createElement(pd.Provider,{value:r},ee.createElement(YC,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i},n.state.initialized?ee.createElement(JC,null):t)))}function KC(e){Be(!1)}function YC(e){let{basename:t="/",children:n=null,location:r,navigationType:i=kt.Pop,navigator:o,static:s=!1}=e;Us()&&Be(!1);let l=t.replace(/^\/*/,"/"),a=ee.useMemo(()=>({basename:l,navigator:o,static:s}),[l,o,s]);typeof r=="string"&&(r=Br(r));let{pathname:c="/",search:f="",hash:d="",state:p=null,key:S="default"}=r,x=ee.useMemo(()=>{let _=$g(c,l);return _==null?null:{pathname:_,search:f,hash:d,state:p,key:S}},[l,c,f,d,p,S]);return x==null?null:ee.createElement(zl.Provider,{value:a},ee.createElement(Vl.Provider,{children:n,value:{location:x,navigationType:i}}))}function JC(e){let{children:t,location:n}=e,r=ee.useContext(Jg),i=r&&!t?r.router.routes:zu(t);return jC(i,n)}var gh;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(gh||(gh={}));new Promise(()=>{});function zu(e,t){t===void 0&&(t=[]);let n=[];return ee.Children.forEach(e,(r,i)=>{if(!ee.isValidElement(r))return;if(r.type===ee.Fragment){n.push.apply(n,zu(r.props.children,t));return}r.type!==KC&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o=[...t,i],s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(s.children=zu(r.props.children,o)),n.push(s)}),n}function Zg(e){return e.map(t=>{let n=al({},t);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=Zg(n.children)),n})}/**
 * React Router DOM v6.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}function QC(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function qC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function XC(e,t){return e.button===0&&(!t||t==="_self")&&!qC(e)}function Vu(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function ZC(e,t){let n=Vu(e);for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}const e_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function t_(e,t){return mC({basename:t==null?void 0:t.basename,history:AS({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||n_(),routes:Zg(e)}).initialize()}function n_(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=cl({},t,{errors:r_(t.errors)})),t}function r_(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new $l(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let o=new Error(i.message);o.stack="",n[r]=o}else n[r]=i;return n}const vh=ee.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:a,to:c,preventScrollReset:f}=t,d=QC(t,e_),p=LC(c,{relative:i}),S=i_(c,{replace:s,state:l,target:a,preventScrollReset:f,relative:i});function x(_){r&&r(_),_.defaultPrevented||S(_)}return ee.createElement("a",cl({},d,{href:p,onClick:o?r:x,ref:n,target:a}))});var xh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(xh||(xh={}));var Sh;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Sh||(Sh={}));function i_(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s}=t===void 0?{}:t,l=qg(),a=go(),c=Xg(e,{relative:s});return ee.useCallback(f=>{if(XC(f,n)){f.preventDefault();let d=r!==void 0?r:hr(a)===hr(c);l(e,{replace:d,state:i,preventScrollReset:o,relative:s})}},[a,l,c,r,i,n,e,o,s])}function o_(e){let t=ee.useRef(Vu(e)),n=go(),r=ee.useMemo(()=>ZC(n.search,t.current),[n.search]),i=qg(),o=ee.useCallback((s,l)=>{const a=Vu(typeof s=="function"?s(r):s);i("?"+a,l)},[i,r]);return[r,o]}const Ps={home:"/briscola/",match:"/briscola/match"};var ks={},ul={},s_={get exports(){return ul},set exports(e){ul=e}};(function(e){var t={};t.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),t.useArrayBufferView=!t.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),e.exports.binaryFeatures=t;var n=e.exports.BlobBuilder;typeof window<"u"&&(n=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},r.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);t.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),t.useBlobBuilder){for(var i=new n,o=0,s=this._parts.length;o<s;o++)i.append(this._parts[o]);return i.getBlob()}else return new Blob(this._parts)},e.exports.BufferBuilder=r})(s_);var a_=ul.BufferBuilder,Ch=ul.binaryFeatures,l_={unpack:function(e){var t=new Kt(e);return t.unpack()},pack:function(e){var t=new Yt;t.pack(e);var n=t.getBuffer();return n}},_h=l_;function Kt(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Kt.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;var t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}};Kt.prototype.unpack_uint8=function(){var e=this.dataView[this.index]&255;return this.index++,e};Kt.prototype.unpack_uint16=function(){var e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t};Kt.prototype.unpack_uint32=function(){var e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t};Kt.prototype.unpack_uint64=function(){var e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t};Kt.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-(1<<8)};Kt.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-(1<<16)};Kt.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)};Kt.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)};Kt.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t};Kt.prototype.unpack_string=function(e){for(var t=this.read(e),n=0,r="",i,o;n<e;)i=t[n],i<128?(r+=String.fromCharCode(i),n++):(i^192)<32?(o=(i^192)<<6|t[n+1]&63,r+=String.fromCharCode(o),n+=2):(o=(i&15)<<12|(t[n+1]&63)<<6|t[n+2]&63,r+=String.fromCharCode(o),n+=3);return this.index+=e,r};Kt.prototype.unpack_array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.unpack();return t};Kt.prototype.unpack_map=function(e){for(var t={},n=0;n<e;n++){var r=this.unpack(),i=this.unpack();t[r]=i}return t};Kt.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=e>>31,n=(e>>23&255)-127,r=e&8388607|8388608;return(t===0?1:-1)*r*Math.pow(2,n-23)};Kt.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),n=e>>31,r=(e>>20&2047)-1023,i=e&1048575|1048576,o=i*Math.pow(2,r-20)+t*Math.pow(2,r-52);return(n===0?1:-1)*o};Kt.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")};function Yt(){this.bufferBuilder=new a_}Yt.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};Yt.prototype.pack=function(e){var t=typeof e;if(t==="string")this.pack_string(e);else if(t==="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(t==="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(t==="undefined")this.bufferBuilder.append(192);else if(t==="object")if(e===null)this.bufferBuilder.append(192);else{var n=e.constructor;if(n==Array)this.pack_array(e);else if(n==Blob||n==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(n==ArrayBuffer)Ch.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)Ch.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(e);else if(n==Date)this.pack_string(e.toString());else if(typeof e.toBinaryPack=="function")this.bufferBuilder.append(e.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+t+'" not yet supported');this.bufferBuilder.flush()};Yt.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};Yt.prototype.pack_string=function(e){var t=u_(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};Yt.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");for(var n=0;n<t;n++)this.pack(e[n])};Yt.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(e&255);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")};Yt.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var n=Math.floor(Math.log(e)/Math.LN2),r=e/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),o=Math.pow(2,32),s=t<<31|n+1023<<20|i/o&1048575,l=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(l)};Yt.prototype.pack_object=function(e){var t=Object.keys(e),n=t.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in e)e.hasOwnProperty(r)&&(this.pack(r),this.pack(e[r]))};Yt.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)};Yt.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(e&255)};Yt.prototype.pack_uint32=function(e){var t=e&4294967295;this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};Yt.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),n=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};Yt.prototype.pack_int8=function(e){this.bufferBuilder.append(e&255)};Yt.prototype.pack_int16=function(e){this.bufferBuilder.append((e&65280)>>8),this.bufferBuilder.append(e&255)};Yt.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};Yt.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),n=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function c_(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}function u_(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,c_).length}let ev=!0,tv=!0;function Vo(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function vo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,l){if(s!==t)return i.apply(this,arguments);const a=c=>{const f=n(c);f&&(l.handleEvent?l.handleEvent(f):l(f))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,a),i.apply(this,[s,a])};const o=r.removeEventListener;r.removeEventListener=function(s,l){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(l))return o.apply(this,arguments);const a=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,a])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function f_(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(ev=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function d_(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(tv=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function hd(){if(typeof window=="object"){if(ev)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Gl(e,t){tv&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p_(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Vo(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Vo(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=Vo(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=Vo(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function bh(e){return Object.prototype.toString.call(e)==="[object Object]"}function nv(e){return bh(e)?Object.keys(e).reduce(function(t,n){const r=bh(e[n]),i=r?nv(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[n]:i})},{}):e}function Gu(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Gu(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Gu(e,e.get(i),n)})}))}function wh(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{e.forEach(l=>{l.type===r&&l.trackId===s.id&&Gu(e,l,i)})}),i}const Eh=hd;function rv(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const a={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const f=typeof l[c]=="object"?l[c]:{ideal:l[c]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const d=function(p,S){return p?p+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(f.ideal!==void 0){a.optional=a.optional||[];let p={};typeof f.ideal=="number"?(p[d("min",c)]=f.ideal,a.optional.push(p),p={},p[d("max",c)]=f.ideal,a.optional.push(p)):(p[d("",c)]=f.ideal,a.optional.push(p))}f.exact!==void 0&&typeof f.exact!="number"?(a.mandatory=a.mandatory||{},a.mandatory[d("",c)]=f.exact):["min","max"].forEach(p=>{f[p]!==void 0&&(a.mandatory=a.mandatory||{},a.mandatory[d(p,c)]=f[p])})}),l.advanced&&(a.optional=(a.optional||[]).concat(l.advanced)),a},i=function(l,a){if(t.version>=61)return a(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(f,d,p){d in f&&!(p in f)&&(f[p]=f[d],delete f[d])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const f=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete l.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(p=>{p=p.filter(x=>x.kind==="videoinput");let S=p.find(x=>d.some(_=>x.label.toLowerCase().includes(_)));return!S&&p.length&&d.includes("back")&&(S=p[p.length-1]),S&&(l.video.deviceId=c.exact?{exact:S.deviceId}:{ideal:S.deviceId}),l.video=r(l.video),Eh("chrome: "+JSON.stringify(l)),a(l)})}l.video=r(l.video)}return Eh("chrome: "+JSON.stringify(l)),a(l)},o=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(l,a,c){i(l,f=>{n.webkitGetUserMedia(f,a,d=>{c&&c(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(a){return i(a,c=>l(c).then(f=>{if(c.audio&&!f.getAudioTracks().length||c.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(o(f))))}}}function h_(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height,l=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),e.navigator.mediaDevices.getUserMedia(r)})}}}function iv(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ov(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else vo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function sv(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,a){let c=i.apply(this,arguments);return c||(c=t(this,l),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const a=this._senders.indexOf(l);a!==-1&&this._senders.splice(a,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const l=this._senders.find(a=>a.track===s);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function av(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);const s=function(a){const c={};return a.result().forEach(d=>{const p={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(S=>{p[S]=d.stat(S)}),c[p.id]=p}),c},l=function(a){return new Map(Object.keys(a).map(c=>[c,a[c]]))};if(arguments.length>=2){const a=function(c){i(l(s(c)))};return t.apply(this,[a,r])}return new Promise((a,c)=>{t.apply(this,[function(f){a(l(s(f)))},c])}).then(i,o)}}function lv(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>wh(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),vo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>wh(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(l=>{l.track===r&&(i?s=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(o?s=!0:o=l),l.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function cv(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(a)===-1&&this._shimmedLocalStreams[l.id].push(a):this._shimmedLocalStreams[l.id]=[l,a],a};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(a)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const a=this._shimmedLocalStreams[l].indexOf(s);a!==-1&&this._shimmedLocalStreams[l].splice(a,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function uv(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return cv(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const f=n.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(d=>this._reverseStreams[d.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(d=>{if(this.getSenders().find(S=>S.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const d=new e.MediaStream(f.getTracks());this._streams[f.id]=d,this._reverseStreams[d.id]=f,f=d}r.apply(this,[f])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},e.RTCPeerConnection.prototype.addTrack=function(f,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(_=>_===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(_=>_.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[d.id];if(x)x.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const _=new e.MediaStream([f]);this._streams[d.id]=_,this._reverseStreams[_.id]=d,this.addStream(_)}return this.getSenders().find(_=>_.track===f)};function o(c,f){let d=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const S=c._reverseStreams[p],x=c._streams[S.id];d=d.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:f.type,sdp:d})}function s(c,f){let d=f.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const S=c._reverseStreams[p],x=c._streams[S.id];d=d.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:f.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const f=e.RTCPeerConnection.prototype[c],d={[c](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[x=>{const _=o(this,x);p[0].apply(null,[_])},x=>{p[1]&&p[1].apply(null,x)},arguments[2]]):f.apply(this,arguments).then(x=>o(this,x))}};e.RTCPeerConnection.prototype[c]=d[c]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=s(this,arguments[0]),l.apply(this,arguments))};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=a.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(_=>f.track===_)&&(p=this._streams[S])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Hu(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function fv(e,t){vo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Ph=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream:iv,shimOnTrack:ov,shimGetSendersWithDtmf:sv,shimGetStats:av,shimSenderReceiverGetStats:lv,shimAddTrackRemoveTrackWithNative:cv,shimAddTrackRemoveTrack:uv,shimPeerConnection:Hu,fixNegotiationNeeded:fv,shimGetUserMedia:rv,shimGetDisplayMedia:h_},Symbol.toStringTag,{value:"Module"}));function m_(e,t){let n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&Gl("RTCIceServer.url","RTCIceServer.urls");const o=typeof i=="string";return o&&(i=[i]),i=i.filter(s=>{if(s.indexOf("stun:")===0)return!1;const l=s.startsWith("turn")&&!s.startsWith("turn:[")&&s.includes("transport=udp");return l&&!n?(n=!0,!0):l&&!n}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}var fl={},y_={get exports(){return fl},set exports(e){fl=e}};(function(e){var t={};t.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},t.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(i,o){return(o>0?"m="+i:i).trim()+`\r
`})},t.getDescription=function(n){var r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){var r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(function(i){return i.indexOf(r)===0})},t.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var i={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]=r[o+1];break}return i},t.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substr(14).split(" ")},t.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},t.parseFmtp=function(n){for(var r={},i,o=n.substr(n.indexOf(" ")+1).split(";"),s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var o=[];Object.keys(n.parameters).forEach(function(s){n.parameters[s]?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(o){r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substr(r+1,o-r-1),i.value=n.substr(o+1)):i.attribute=n.substr(r+1),i},t.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},t.getMid=function(n){var r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},t.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},t.getDtlsParameters=function(n,r){var i=t.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:i.map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(o){i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){var i=t.matchPrefix(n+r,"a=crypto:");return i.map(t.parseCryptoLine)},t.getIceParameters=function(n,r){var i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},t.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(n),o=i[0].split(" "),s=3;s<o.length;s++){var l=o[s],a=t.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(a){var c=t.parseRtpMap(a),f=t.matchPrefix(n,"a=fmtp:"+l+" ");switch(c.parameters=f.length?t.parseFmtp(f[0]):{},c.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}return t.matchPrefix(n,"a=extmap:").forEach(function(d){r.headerExtensions.push(t.parseExtmap(d))}),r},t.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(s){return s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(s){i+=t.writeRtpMap(s),i+=t.writeFmtp(s),i+=t.writeRtcpFb(s)});var o=0;return r.codecs.forEach(function(s){s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(s){i+=t.writeExtmap(s)}),i},t.parseRtpEncodingParameters=function(n){var r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(n,"a=ssrc:").map(function(p){return t.parseSsrcMedia(p)}).filter(function(p){return p.attribute==="cname"}),a=l.length>0&&l[0].ssrc,c,f=t.matchPrefix(n,"a=ssrc-group:FID").map(function(p){var S=p.substr(17).split(" ");return S.map(function(x){return parseInt(x,10)})});f.length>0&&f[0].length>1&&f[0][0]===a&&(c=f[0][1]),i.codecs.forEach(function(p){if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){var S={ssrc:a,codecPayloadType:parseInt(p.parameters.apt,10)};a&&c&&(S.rtx={ssrc:c}),r.push(S),o&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:a,mechanism:s?"red+ulpfec":"red"},r.push(S))}}),r.length===0&&a&&r.push({ssrc:a});var d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substr(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substr(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(function(p){p.maxBitrate=d})),r},t.parseRtcpParameters=function(n){var r={},i=t.matchPrefix(n,"a=ssrc:").map(function(l){return t.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;var s=t.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},t.parseMsid=function(n){var r,i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};var o=t.matchPrefix(n,"a=ssrc:").map(function(s){return t.parseSsrcMedia(s)}).filter(function(s){return s.attribute==="msid"});if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){var r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substr(19),10)),isNaN(o)&&(o=65536);var s=t.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:r.fmt,maxMessageSize:o};var l=t.matchPrefix(n,"a=sctpmap:");if(l.length>0){var a=t.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){var i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(n,r,i){var o,s=r!==void 0?r:2;n?o=n:o=t.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.writeMediaSection=function(n,r,i,o){var s=t.writeRtpDescription(n.kind,r);if(s+=t.writeIceParameters(n.iceGatherer.getLocalParameters()),s+=t.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),s+="a=mid:"+n.mid+`\r
`,n.direction?s+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?s+=`a=sendrecv\r
`:n.rtpSender?s+=`a=sendonly\r
`:n.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,n.rtpSender){var l="msid:"+o.id+" "+n.rtpSender.track.id+`\r
`;s+="a="+l,s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+l,n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+l,s+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+`\r
`),s},t.getDirection=function(n,r){for(var i=t.splitLines(n),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){var r=t.splitLines(n),i=r[0].split(" ");return i[0].substr(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){var r=t.splitLines(n),i=r[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){var r=t.matchPrefix(n,"o=")[0],i=r.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=t.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(y_);const Ra=fl;var Se=fl;function g_(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function kh(e,t,n,r,i){var o=Se.writeRtpDescription(e.kind,t);if(o+=Se.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=Se.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),o+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?o+=`a=sendrecv\r
`:e.rtpSender?o+=`a=sendonly\r
`:e.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var l="msid:"+(r?r.id:"-")+" "+s+`\r
`;o+="a="+l,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Se.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Se.localCName+`\r
`),o}function v_(e,t){var n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(r){if(r&&(r.urls||r.url)){var i=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof i=="string";return o&&(i=[i]),i=i.filter(function(s){var l=s.indexOf("turn:")===0&&s.indexOf("transport=udp")!==-1&&s.indexOf("turn:[")===-1&&!n;return l?(n=!0,!0):s.indexOf("stun:")===0&&t>=14393&&s.indexOf("?transport=udp")===-1}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}function la(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(o,s){o=parseInt(o,10);for(var l=0;l<s.length;l++)if(s[l].payloadType===o||s[l].preferredPayloadType===o)return s[l]},i=function(o,s,l,a){var c=r(o.parameters.apt,l),f=r(s.parameters.apt,a);return c&&f&&c.name.toLowerCase()===f.name.toLowerCase()};return e.codecs.forEach(function(o){for(var s=0;s<t.codecs.length;s++){var l=t.codecs[s];if(o.name.toLowerCase()===l.name.toLowerCase()&&o.clockRate===l.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&l.parameters.apt&&!i(o,l,e.codecs,t.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(o.numChannels,l.numChannels),n.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(a){for(var c=0;c<o.rtcpFeedback.length;c++)if(o.rtcpFeedback[c].type===a.type&&o.rtcpFeedback[c].parameter===a.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(o){for(var s=0;s<t.headerExtensions.length;s++){var l=t.headerExtensions[s];if(o.uri===l.uri){n.headerExtensions.push(l);break}}}),n}function Th(e,t,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)!==-1}function Ac(e,t){var n=e.getRemoteCandidates().find(function(r){return t.foundation===r.foundation&&t.ip===r.ip&&t.port===r.port&&t.priority===r.priority&&t.protocol===r.protocol&&t.type===r.type});return n||e.addRemoteCandidate(t),!n}function en(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var x_=function(e,t){function n(a,c){c.addTrack(a),c.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:a}))}function r(a,c){c.removeTrack(a),c.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:a}))}function i(a,c,f,d){var p=new Event("track");p.track=c,p.receiver=f,p.transceiver={receiver:f},p.streams=d,e.setTimeout(function(){a._dispatchEvent("track",p)})}var o=function(a){var c=this,f=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(p){c[p]=f[p].bind(f)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",a=JSON.parse(JSON.stringify(a||{})),this.usingBundle=a.bundlePolicy==="max-bundle",a.rtcpMuxPolicy==="negotiate")throw en("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(a.rtcpMuxPolicy||(a.rtcpMuxPolicy="require"),a.iceTransportPolicy){case"all":case"relay":break;default:a.iceTransportPolicy="all";break}switch(a.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:a.bundlePolicy="balanced";break}if(a.iceServers=v_(a.iceServers||[],t),this._iceGatherers=[],a.iceCandidatePoolSize)for(var d=a.iceCandidatePoolSize;d>0;d--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:a.iceServers,gatherPolicy:a.iceTransportPolicy}));else a.iceCandidatePoolSize=0;this._config=a,this.transceivers=[],this._sdpSessionId=Se.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(a,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+a]=="function"&&this["on"+a](c))},o.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(a,c){var f=this.transceivers.length>0,d={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&f)d.iceTransport=this.transceivers[0].iceTransport,d.dtlsTransport=this.transceivers[0].dtlsTransport;else{var p=this._createIceAndDtlsTransports();d.iceTransport=p.iceTransport,d.dtlsTransport=p.dtlsTransport}return c||this.transceivers.push(d),d},o.prototype.addTrack=function(a,c){if(this._isClosed)throw en("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var f=this.transceivers.find(function(S){return S.track===a});if(f)throw en("InvalidAccessError","Track already exists.");for(var d,p=0;p<this.transceivers.length;p++)!this.transceivers[p].track&&this.transceivers[p].kind===a.kind&&(d=this.transceivers[p]);return d||(d=this._createTransceiver(a.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),d.track=a,d.stream=c,d.rtpSender=new e.RTCRtpSender(a,d.dtlsTransport),d.rtpSender},o.prototype.addStream=function(a){var c=this;if(t>=15025)a.getTracks().forEach(function(d){c.addTrack(d,a)});else{var f=a.clone();a.getTracks().forEach(function(d,p){var S=f.getTracks()[p];d.addEventListener("enabled",function(x){S.enabled=x.enabled})}),f.getTracks().forEach(function(d){c.addTrack(d,f)})}},o.prototype.removeTrack=function(a){if(this._isClosed)throw en("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(p){return p.rtpSender===a});if(!c)throw en("InvalidAccessError","Sender was not created by this connection.");var f=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var d=this.transceivers.map(function(p){return p.stream});d.indexOf(f)===-1&&this.localStreams.indexOf(f)>-1&&this.localStreams.splice(this.localStreams.indexOf(f),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(a){var c=this;a.getTracks().forEach(function(f){var d=c.getSenders().find(function(p){return p.track===f});d&&c.removeTrack(d)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})},o.prototype._createIceGatherer=function(a,c){var f=this;if(c&&a>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var d=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(d,"state",{value:"new",writable:!0}),this.transceivers[a].bufferedCandidateEvents=[],this.transceivers[a].bufferCandidates=function(p){var S=!p.candidate||Object.keys(p.candidate).length===0;d.state=S?"completed":"gathering",f.transceivers[a].bufferedCandidateEvents!==null&&f.transceivers[a].bufferedCandidateEvents.push(p)},d.addEventListener("localcandidate",this.transceivers[a].bufferCandidates),d},o.prototype._gather=function(a,c){var f=this,d=this.transceivers[c].iceGatherer;if(!d.onlocalcandidate){var p=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,d.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),d.onlocalcandidate=function(S){if(!(f.usingBundle&&c>0)){var x=new Event("icecandidate");x.candidate={sdpMid:a,sdpMLineIndex:c};var _=S.candidate,I=!_||Object.keys(_).length===0;if(I)(d.state==="new"||d.state==="gathering")&&(d.state="completed");else{d.state==="new"&&(d.state="gathering"),_.component=1,_.ufrag=d.getLocalParameters().usernameFragment;var C=Se.writeCandidate(_);x.candidate=Object.assign(x.candidate,Se.parseCandidate(C)),x.candidate.candidate=C,x.candidate.toJSON=function(){return{candidate:x.candidate.candidate,sdpMid:x.candidate.sdpMid,sdpMLineIndex:x.candidate.sdpMLineIndex,usernameFragment:x.candidate.usernameFragment}}}var g=Se.getMediaSections(f._localDescription.sdp);I?g[x.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:g[x.candidate.sdpMLineIndex]+="a="+x.candidate.candidate+`\r
`,f._localDescription.sdp=Se.getDescription(f._localDescription.sdp)+g.join("");var w=f.transceivers.every(function(P){return P.iceGatherer&&P.iceGatherer.state==="completed"});f.iceGatheringState!=="gathering"&&(f.iceGatheringState="gathering",f._emitGatheringStateChange()),I||f._dispatchEvent("icecandidate",x),w&&(f._dispatchEvent("icecandidate",new Event("icecandidate")),f.iceGatheringState="complete",f._emitGatheringStateChange())}},e.setTimeout(function(){p.forEach(function(S){d.onlocalcandidate(S)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var a=this,c=new e.RTCIceTransport(null);c.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var f=new e.RTCDtlsTransport(c);return f.ondtlsstatechange=function(){a._updateConnectionState()},f.onerror=function(){Object.defineProperty(f,"state",{value:"failed",writable:!0}),a._updateConnectionState()},{iceTransport:c,dtlsTransport:f}},o.prototype._disposeIceAndDtlsTransports=function(a){var c=this.transceivers[a].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[a].iceGatherer);var f=this.transceivers[a].iceTransport;f&&(delete f.onicestatechange,delete this.transceivers[a].iceTransport);var d=this.transceivers[a].dtlsTransport;d&&(delete d.ondtlsstatechange,delete d.onerror,delete this.transceivers[a].dtlsTransport)},o.prototype._transceive=function(a,c,f){var d=la(a.localCapabilities,a.remoteCapabilities);c&&a.rtpSender&&(d.encodings=a.sendEncodingParameters,d.rtcp={cname:Se.localCName,compound:a.rtcpParameters.compound},a.recvEncodingParameters.length&&(d.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(d)),f&&a.rtpReceiver&&d.codecs.length>0&&(a.kind==="video"&&a.recvEncodingParameters&&t<15019&&a.recvEncodingParameters.forEach(function(p){delete p.rtx}),a.recvEncodingParameters.length?d.encodings=a.recvEncodingParameters:d.encodings=[{}],d.rtcp={compound:a.rtcpParameters.compound},a.rtcpParameters.cname&&(d.rtcp.cname=a.rtcpParameters.cname),a.sendEncodingParameters.length&&(d.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(d))},o.prototype.setLocalDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(en("TypeError",'Unsupported type "'+a.type+'"'));if(!Th("setLocalDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(en("InvalidStateError","Can not set local "+a.type+" in state "+c.signalingState));var f,d;if(a.type==="offer")f=Se.splitSections(a.sdp),d=f.shift(),f.forEach(function(S,x){var _=Se.parseRtpParameters(S);c.transceivers[x].localCapabilities=_}),c.transceivers.forEach(function(S,x){c._gather(S.mid,x)});else if(a.type==="answer"){f=Se.splitSections(c._remoteDescription.sdp),d=f.shift();var p=Se.matchPrefix(d,"a=ice-lite").length>0;f.forEach(function(S,x){var _=c.transceivers[x],I=_.iceGatherer,C=_.iceTransport,g=_.dtlsTransport,w=_.localCapabilities,P=_.remoteCapabilities,B=Se.isRejected(S)&&Se.matchPrefix(S,"a=bundle-only").length===0;if(!B&&!_.rejected){var K=Se.getIceParameters(S,d),J=Se.getDtlsParameters(S,d);p&&(J.role="server"),(!c.usingBundle||x===0)&&(c._gather(_.mid,x),C.state==="new"&&C.start(I,K,p?"controlling":"controlled"),g.state==="new"&&g.start(J));var Q=la(w,P);c._transceive(_,Q.codecs.length>0,!1)}})}return c._localDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(en("TypeError",'Unsupported type "'+a.type+'"'));if(!Th("setRemoteDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(en("InvalidStateError","Can not set remote "+a.type+" in state "+c.signalingState));var f={};c.remoteStreams.forEach(function(C){f[C.id]=C});var d=[],p=Se.splitSections(a.sdp),S=p.shift(),x=Se.matchPrefix(S,"a=ice-lite").length>0,_=Se.matchPrefix(S,"a=group:BUNDLE ").length>0;c.usingBundle=_;var I=Se.matchPrefix(S,"a=ice-options:")[0];return I?c.canTrickleIceCandidates=I.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,p.forEach(function(C,g){var w=Se.splitLines(C),P=Se.getKind(C),B=Se.isRejected(C)&&Se.matchPrefix(C,"a=bundle-only").length===0,K=w[0].substr(2).split(" ")[2],J=Se.getDirection(C,S),Q=Se.parseMsid(C),Fe=Se.getMid(C)||Se.generateIdentifier();if(B||P==="application"&&(K==="DTLS/SCTP"||K==="UDP/DTLS/SCTP")){c.transceivers[g]={mid:Fe,kind:P,protocol:K,rejected:!0};return}!B&&c.transceivers[g]&&c.transceivers[g].rejected&&(c.transceivers[g]=c._createTransceiver(P,!0));var Y,at,lt,Rt,$e,Lt,_t,Ut,H,de=Se.parseRtpParameters(C),Ce,He;B||(Ce=Se.getIceParameters(C,S),He=Se.getDtlsParameters(C,S),He.role="client"),_t=Se.parseRtpEncodingParameters(C);var Ze=Se.parseRtcpParameters(C),pt=Se.matchPrefix(C,"a=end-of-candidates",S).length>0,qe=Se.matchPrefix(C,"a=candidate:").map(function(E){return Se.parseCandidate(E)}).filter(function(E){return E.component===1});if((a.type==="offer"||a.type==="answer")&&!B&&_&&g>0&&c.transceivers[g]&&(c._disposeIceAndDtlsTransports(g),c.transceivers[g].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[g].iceTransport=c.transceivers[0].iceTransport,c.transceivers[g].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[g].rtpSender&&c.transceivers[g].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[g].rtpReceiver&&c.transceivers[g].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),a.type==="offer"&&!B){Y=c.transceivers[g]||c._createTransceiver(P),Y.mid=Fe,Y.iceGatherer||(Y.iceGatherer=c._createIceGatherer(g,_)),qe.length&&Y.iceTransport.state==="new"&&(pt&&(!_||g===0)?Y.iceTransport.setRemoteCandidates(qe):qe.forEach(function(E){Ac(Y.iceTransport,E)})),Ut=e.RTCRtpReceiver.getCapabilities(P),t<15019&&(Ut.codecs=Ut.codecs.filter(function(E){return E.name!=="rtx"})),Lt=Y.sendEncodingParameters||[{ssrc:(2*g+2)*1001}];var he=!1;if(J==="sendrecv"||J==="sendonly"){if(he=!Y.rtpReceiver,$e=Y.rtpReceiver||new e.RTCRtpReceiver(Y.dtlsTransport,P),he){var Ae;H=$e.track,Q&&Q.stream==="-"||(Q?(f[Q.stream]||(f[Q.stream]=new e.MediaStream,Object.defineProperty(f[Q.stream],"id",{get:function(){return Q.stream}})),Object.defineProperty(H,"id",{get:function(){return Q.track}}),Ae=f[Q.stream]):(f.default||(f.default=new e.MediaStream),Ae=f.default)),Ae&&(n(H,Ae),Y.associatedRemoteMediaStreams.push(Ae)),d.push([H,$e,Ae])}}else Y.rtpReceiver&&Y.rtpReceiver.track&&(Y.associatedRemoteMediaStreams.forEach(function(E){var O=E.getTracks().find(function(F){return F.id===Y.rtpReceiver.track.id});O&&r(O,E)}),Y.associatedRemoteMediaStreams=[]);Y.localCapabilities=Ut,Y.remoteCapabilities=de,Y.rtpReceiver=$e,Y.rtcpParameters=Ze,Y.sendEncodingParameters=Lt,Y.recvEncodingParameters=_t,c._transceive(c.transceivers[g],!1,he)}else if(a.type==="answer"&&!B){Y=c.transceivers[g],at=Y.iceGatherer,lt=Y.iceTransport,Rt=Y.dtlsTransport,$e=Y.rtpReceiver,Lt=Y.sendEncodingParameters,Ut=Y.localCapabilities,c.transceivers[g].recvEncodingParameters=_t,c.transceivers[g].remoteCapabilities=de,c.transceivers[g].rtcpParameters=Ze,qe.length&&lt.state==="new"&&((x||pt)&&(!_||g===0)?lt.setRemoteCandidates(qe):qe.forEach(function(E){Ac(Y.iceTransport,E)})),(!_||g===0)&&(lt.state==="new"&&lt.start(at,Ce,"controlling"),Rt.state==="new"&&Rt.start(He));var ln=la(Y.localCapabilities,Y.remoteCapabilities),rr=ln.codecs.filter(function(E){return E.name.toLowerCase()==="rtx"}).length;!rr&&Y.sendEncodingParameters[0].rtx&&delete Y.sendEncodingParameters[0].rtx,c._transceive(Y,J==="sendrecv"||J==="recvonly",J==="sendrecv"||J==="sendonly"),$e&&(J==="sendrecv"||J==="sendonly")?(H=$e.track,Q?(f[Q.stream]||(f[Q.stream]=new e.MediaStream),n(H,f[Q.stream]),d.push([H,$e,f[Q.stream]])):(f.default||(f.default=new e.MediaStream),n(H,f.default),d.push([H,$e,f.default]))):delete Y.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=a.type==="offer"?"active":"passive"),c._remoteDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(f).forEach(function(C){var g=f[C];if(g.getTracks().length){if(c.remoteStreams.indexOf(g)===-1){c.remoteStreams.push(g);var w=new Event("addstream");w.stream=g,e.setTimeout(function(){c._dispatchEvent("addstream",w)})}d.forEach(function(P){var B=P[0],K=P[1];g.id===P[2].id&&i(c,B,K,[g])})}}),d.forEach(function(C){C[2]||i(c,C[0],C[1],[])}),e.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(C){C.iceTransport&&C.iceTransport.state==="new"&&C.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),C.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(a){this.signalingState=a;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},o.prototype._maybeFireNegotiationNeeded=function(){var a=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,e.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var c=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",c)}},0))},o.prototype._updateIceConnectionState=function(){var a,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&!d.rejected&&c[d.iceTransport.state]++}),a="new",c.failed>0?a="failed":c.checking>0?a="checking":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0?a="connected":c.completed>0&&(a="completed"),a!==this.iceConnectionState){this.iceConnectionState=a;var f=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",f)}},o.prototype._updateConnectionState=function(){var a,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&d.dtlsTransport&&!d.rejected&&(c[d.iceTransport.state]++,c[d.dtlsTransport.state]++)}),c.connected+=c.completed,a="new",c.failed>0?a="failed":c.connecting>0?a="connecting":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0&&(a="connected"),a!==this.connectionState){this.connectionState=a;var f=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",f)}},o.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(en("InvalidStateError","Can not call createOffer after close"));var c=a.transceivers.filter(function(x){return x.kind==="audio"}).length,f=a.transceivers.filter(function(x){return x.kind==="video"}).length,d=arguments[0];if(d){if(d.mandatory||d.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");d.offerToReceiveAudio!==void 0&&(d.offerToReceiveAudio===!0?c=1:d.offerToReceiveAudio===!1?c=0:c=d.offerToReceiveAudio),d.offerToReceiveVideo!==void 0&&(d.offerToReceiveVideo===!0?f=1:d.offerToReceiveVideo===!1?f=0:f=d.offerToReceiveVideo)}for(a.transceivers.forEach(function(x){x.kind==="audio"?(c--,c<0&&(x.wantReceive=!1)):x.kind==="video"&&(f--,f<0&&(x.wantReceive=!1))});c>0||f>0;)c>0&&(a._createTransceiver("audio"),c--),f>0&&(a._createTransceiver("video"),f--);var p=Se.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(x,_){var I=x.track,C=x.kind,g=x.mid||Se.generateIdentifier();x.mid=g,x.iceGatherer||(x.iceGatherer=a._createIceGatherer(_,a.usingBundle));var w=e.RTCRtpSender.getCapabilities(C);t<15019&&(w.codecs=w.codecs.filter(function(B){return B.name!=="rtx"})),w.codecs.forEach(function(B){B.name==="H264"&&B.parameters["level-asymmetry-allowed"]===void 0&&(B.parameters["level-asymmetry-allowed"]="1"),x.remoteCapabilities&&x.remoteCapabilities.codecs&&x.remoteCapabilities.codecs.forEach(function(K){B.name.toLowerCase()===K.name.toLowerCase()&&B.clockRate===K.clockRate&&(B.preferredPayloadType=K.payloadType)})}),w.headerExtensions.forEach(function(B){var K=x.remoteCapabilities&&x.remoteCapabilities.headerExtensions||[];K.forEach(function(J){B.uri===J.uri&&(B.id=J.id)})});var P=x.sendEncodingParameters||[{ssrc:(2*_+1)*1001}];I&&t>=15019&&C==="video"&&!P[0].rtx&&(P[0].rtx={ssrc:P[0].ssrc+1}),x.wantReceive&&(x.rtpReceiver=new e.RTCRtpReceiver(x.dtlsTransport,C)),x.localCapabilities=w,x.sendEncodingParameters=P}),a._config.bundlePolicy!=="max-compat"&&(p+="a=group:BUNDLE "+a.transceivers.map(function(x){return x.mid}).join(" ")+`\r
`),p+=`a=ice-options:trickle\r
`,a.transceivers.forEach(function(x,_){p+=kh(x,x.localCapabilities,"offer",x.stream,a._dtlsRole),p+=`a=rtcp-rsize\r
`,x.iceGatherer&&a.iceGatheringState!=="new"&&(_===0||!a.usingBundle)&&(x.iceGatherer.getLocalCandidates().forEach(function(I){I.component=1,p+="a="+Se.writeCandidate(I)+`\r
`}),x.iceGatherer.state==="completed"&&(p+=`a=end-of-candidates\r
`))});var S=new e.RTCSessionDescription({type:"offer",sdp:p});return Promise.resolve(S)},o.prototype.createAnswer=function(){var a=this;if(a._isClosed)return Promise.reject(en("InvalidStateError","Can not call createAnswer after close"));if(!(a.signalingState==="have-remote-offer"||a.signalingState==="have-local-pranswer"))return Promise.reject(en("InvalidStateError","Can not call createAnswer in signalingState "+a.signalingState));var c=Se.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.usingBundle&&(c+="a=group:BUNDLE "+a.transceivers.map(function(p){return p.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var f=Se.getMediaSections(a._remoteDescription.sdp).length;a.transceivers.forEach(function(p,S){if(!(S+1>f)){if(p.rejected){p.kind==="application"?p.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+p.protocol+` webrtc-datachannel\r
`:p.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:p.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+p.mid+`\r
`;return}if(p.stream){var x;p.kind==="audio"?x=p.stream.getAudioTracks()[0]:p.kind==="video"&&(x=p.stream.getVideoTracks()[0]),x&&t>=15019&&p.kind==="video"&&!p.sendEncodingParameters[0].rtx&&(p.sendEncodingParameters[0].rtx={ssrc:p.sendEncodingParameters[0].ssrc+1})}var _=la(p.localCapabilities,p.remoteCapabilities),I=_.codecs.filter(function(C){return C.name.toLowerCase()==="rtx"}).length;!I&&p.sendEncodingParameters[0].rtx&&delete p.sendEncodingParameters[0].rtx,c+=kh(p,_,"answer",p.stream,a._dtlsRole),p.rtcpParameters&&p.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var d=new e.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(d)},o.prototype.addIceCandidate=function(a){var c=this,f;return a&&!(a.sdpMLineIndex!==void 0||a.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(d,p){if(c._remoteDescription)if(!a||a.candidate==="")for(var S=0;S<c.transceivers.length&&!(!c.transceivers[S].rejected&&(c.transceivers[S].iceTransport.addRemoteCandidate({}),f=Se.getMediaSections(c._remoteDescription.sdp),f[S]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=Se.getDescription(c._remoteDescription.sdp)+f.join(""),c.usingBundle));S++);else{var x=a.sdpMLineIndex;if(a.sdpMid){for(var _=0;_<c.transceivers.length;_++)if(c.transceivers[_].mid===a.sdpMid){x=_;break}}var I=c.transceivers[x];if(I){if(I.rejected)return d();var C=Object.keys(a.candidate).length>0?Se.parseCandidate(a.candidate):{};if(C.protocol==="tcp"&&(C.port===0||C.port===9)||C.component&&C.component!==1)return d();if((x===0||x>0&&I.iceTransport!==c.transceivers[0].iceTransport)&&!Ac(I.iceTransport,C))return p(en("OperationError","Can not add ICE candidate"));var g=a.candidate.trim();g.indexOf("a=")===0&&(g=g.substr(2)),f=Se.getMediaSections(c._remoteDescription.sdp),f[x]+="a="+(C.type?g:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=Se.getDescription(c._remoteDescription.sdp)+f.join("")}else return p(en("OperationError","Can not add ICE candidate"))}else return p(en("InvalidStateError","Can not add ICE candidate without a remote description"));d()})},o.prototype.getStats=function(a){if(a&&a instanceof e.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(d){d.rtpSender&&d.rtpSender.track===a?c=d.rtpSender:d.rtpReceiver&&d.rtpReceiver.track===a&&(c=d.rtpReceiver)}),!c)throw en("InvalidAccessError","Invalid selector.");return c.getStats()}var f=[];return this.transceivers.forEach(function(d){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(p){d[p]&&f.push(d[p].getStats())})}),Promise.all(f).then(function(d){var p=new Map;return d.forEach(function(S){S.forEach(function(x){p.set(x.id,x)})}),p})};var s=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];s.forEach(function(a){var c=e[a];if(c&&c.prototype&&c.prototype.getStats){var f=c.prototype.getStats;c.prototype.getStats=function(){return f.apply(this).then(function(d){var p=new Map;return Object.keys(d).forEach(function(S){d[S].type=g_(d[S]),p.set(S,d[S])}),p})}}});var l=["createOffer","createAnswer"];return l.forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var f=arguments;return typeof f[0]=="function"||typeof f[1]=="function"?c.apply(this,[arguments[2]]).then(function(d){typeof f[0]=="function"&&f[0].apply(null,[d])},function(d){typeof f[1]=="function"&&f[1].apply(null,[d])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var f=arguments;return typeof f[1]=="function"||typeof f[2]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)},function(d){typeof f[2]=="function"&&f[2].apply(null,[d])}):c.apply(this,arguments)}}),["getStats"].forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var f=arguments;return typeof f[1]=="function"?c.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)}):c.apply(this,arguments)}}),o};function dv(e){const t=e&&e.navigator,n=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(i){return r(i).catch(o=>Promise.reject(n(o)))}}function pv(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Wu(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),t.version<15025)){const r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=x_(e,t.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=m_(i.iceServers,t.version),hd("ICE servers after filtering:",i.iceServers)),new n(i)},e.RTCPeerConnection.prototype=n.prototype}function hv(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}const Oh=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:Wu,shimReplaceTrack:hv,shimGetUserMedia:dv,shimGetDisplayMedia:pv},Symbol.toStringTag,{value:"Module"}));function mv(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){Gl("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,l,a){l in s&&!(a in s)&&(s[a]=s[l],delete s[l])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const l=s.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[l])}}}}function S_(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function yv(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ku(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;return r.apply(this,[o||null]).then(a=>{if(t.version<53&&!s)try{a.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;a.forEach((f,d)=>{a.set(d,Object.assign({},f,{type:n[f.type]||f.type}))})}return a}).then(s,l)}}function gv(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function vv(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),vo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function xv(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Gl("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Sv(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Cv(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:s}=o,l=s.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r.sendEncodings,s.sendEncodings=r.sendEncodings,this.setParametersPromises.push(s.setParameters(l).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function _v(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function bv(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function wv(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Rh=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack:yv,shimPeerConnection:Ku,shimSenderGetStats:gv,shimReceiverGetStats:vv,shimRemoveStream:xv,shimRTCDataChannel:Sv,shimAddTransceiver:Cv,shimGetParameters:_v,shimCreateOffer:bv,shimCreateAnswer:wv,shimGetUserMedia:mv,shimGetDisplayMedia:S_},Symbol.toStringTag,{value:"Module"}));function Ev(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function Pv(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),t.apply(r,arguments)}}}function kv(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(c,f){const d=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[d]);return f?(p.then(c,f),Promise.resolve()):p},t.createAnswer=function(c,f){const d=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[d]);return f?(p.then(c,f),Promise.resolve()):p};let l=function(a,c,f){const d=i.apply(this,[a]);return f?(d.then(c,f),Promise.resolve()):d};t.setLocalDescription=l,l=function(a,c,f){const d=o.apply(this,[a]);return f?(d.then(c,f),Promise.resolve()):d},t.setRemoteDescription=l,l=function(a,c,f){const d=s.apply(this,[a]);return f?(d.then(c,f),Promise.resolve()):d},t.addIceCandidate=l}function Tv(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(Ov(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}.bind(t))}function Ov(e){return e&&e.video!==void 0?Object.assign({},e,{video:nv(e.video)}):e}function Rv(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let l=r.iceServers[s];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(Gl("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(r.iceServers[s])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Mv(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Dv(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return t.apply(this,arguments)}}function Iv(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Mh=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI:Ev,shimRemoteStreamsAPI:Pv,shimCallbacksAPI:kv,shimGetUserMedia:Tv,shimConstraints:Ov,shimRTCIceServerUrls:Rv,shimTrackEventTransceiver:Mv,shimCreateOfferLegacy:Dv,shimAudioContext:Iv},Symbol.toStringTag,{value:"Module"}));function Ma(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new t(r),o=Ra.parseCandidate(r.candidate),s=Object.assign(i,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,vo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Go(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const a=Ra.splitSections(l.sdp);return a.shift(),a.some(c=>{const f=Ra.parseMLine(c);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},r=function(l){const a=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const c=parseInt(a[1],10);return c!==c?-1:c},i=function(l){let a=65536;return t.browser==="firefox"&&(t.version<57?l===-1?a=16384:a=2147483637:t.version<60?a=t.version===57?65535:65536:a=2147483637),a},o=function(l,a){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const f=Ra.matchPrefix(l.sdp,"a=max-message-size:");return f.length>0?c=parseInt(f[0].substr(19),10):t.browser==="firefox"&&a!==-1&&(c=2147483637),c},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const a=r(arguments[0]),c=i(a),f=o(arguments[0],a);let d;c===0&&f===0?d=Number.POSITIVE_INFINITY:c===0||f===0?d=Math.max(c,f):d=Math.min(c,f);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return d}}),this._sctp=p}return s.apply(this,arguments)}}function Ho(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const l=arguments[0],a=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&a>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},vo(e,"datachannel",r=>(t(r.channel,r.target),r))}function Yu(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Ju(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Da(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const C_=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate:Ma,shimMaxMessageSize:Go,shimSendThrowTypeError:Ho,shimConnectionState:Yu,removeExtmapAllowMixed:Ju,shimAddIceCandidateNullOrEmpty:Da},Symbol.toStringTag,{value:"Module"}));function __({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=hd,r=p_(e),i={browserDetails:r,commonShim:C_,extractVersion:Vo,disableLog:f_,disableWarnings:d_};switch(r.browser){case"chrome":if(!Ph||!Hu||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Ph,Da(e,r),rv(e,r),iv(e),Hu(e,r),ov(e),uv(e,r),sv(e),av(e),lv(e),fv(e,r),Ma(e),Yu(e),Go(e,r),Ho(e),Ju(e,r);break;case"firefox":if(!Rh||!Ku||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Rh,Da(e,r),mv(e,r),Ku(e,r),yv(e),xv(e),gv(e),vv(e),Sv(e),Cv(e),_v(e),bv(e),wv(e),Ma(e),Yu(e),Go(e,r),Ho(e);break;case"edge":if(!Oh||!Wu||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=Oh,dv(e),pv(e),Wu(e,r),hv(e),Go(e,r),Ho(e);break;case"safari":if(!Mh||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Mh,Da(e,r),Rv(e),Dv(e),kv(e),Ev(e),Pv(e),Mv(e),Tv(e),Iv(e),Ma(e),Go(e,r),Ho(e),Ju(e,r);break;default:n("Unsupported browser!");break}return i}const Dh=__({window:typeof window>"u"?void 0:window});function yr(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var Nc=Dh.default||Dh,Io=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},e.prototype.isBrowserSupported=function(){var t=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(t);return r?t==="chrome"?n>=this.minChromeVersion:t==="firefox"?n>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},e.prototype.getBrowser=function(){return Nc.browserDetails.browser},e.prototype.getVersion=function(){return Nc.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var t=this.getBrowser(),n=Nc.browserDetails.version||0;if(t==="chrome"&&n<this.minChromeVersion)return!1;if(t==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},e.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},e}()),Ih={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},b_=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=Ih,this.browser=Io.getBrowser(),this.browserVersion=Io.getVersion(),this.supports=function(){var t={browser:Io.isBrowserSupported(),webRTC:Io.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;var n;try{n=new RTCPeerConnection(Ih),t.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!Io.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return t}(),this.pack=_h.pack,this.unpack=_h.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},e.prototype.chunk=function(t){for(var n=[],r=t.size,i=Math.ceil(r/Qe.chunkedMTU),o=0,s=0;s<r;){var l=Math.min(r,s+Qe.chunkedMTU),a=t.slice(s,l),c={__peerData:this._dataCount,n:o,data:a,total:i};n.push(c),s=l,o++}return this._dataCount++,n},e.prototype.blobToArrayBuffer=function(t,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r},e.prototype.binaryStringToArrayBuffer=function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return location.protocol==="https:"},e}(),Qe=new b_,Av={};yr(Av,"Peer",()=>Xu,e=>Xu=e);var $s={},w_=Object.prototype.hasOwnProperty,yn="~";function Ts(){}Object.create&&(Ts.prototype=Object.create(null),new Ts().__proto__||(yn=!1));function E_(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Nv(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new E_(n,r||e,i),s=yn?yn+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function Ia(e,t){--e._eventsCount===0?e._events=new Ts:delete e._events[t]}function an(){this._events=new Ts,this._eventsCount=0}an.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)w_.call(n,r)&&t.push(yn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};an.prototype.listeners=function(t){var n=yn?yn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s};an.prototype.listenerCount=function(t){var n=yn?yn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};an.prototype.emit=function(t,n,r,i,o,s){var l=yn?yn+t:t;if(!this._events[l])return!1;var a=this._events[l],c=arguments.length,f,d;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,i),!0;case 5:return a.fn.call(a.context,n,r,i,o),!0;case 6:return a.fn.call(a.context,n,r,i,o,s),!0}for(d=1,f=new Array(c-1);d<c;d++)f[d-1]=arguments[d];a.fn.apply(a.context,f)}else{var p=a.length,S;for(d=0;d<p;d++)switch(a[d].once&&this.removeListener(t,a[d].fn,void 0,!0),c){case 1:a[d].fn.call(a[d].context);break;case 2:a[d].fn.call(a[d].context,n);break;case 3:a[d].fn.call(a[d].context,n,r);break;case 4:a[d].fn.call(a[d].context,n,r,i);break;default:if(!f)for(S=1,f=new Array(c-1);S<c;S++)f[S-1]=arguments[S];a[d].fn.apply(a[d].context,f)}}return!0};an.prototype.on=function(t,n,r){return Nv(this,t,n,r,!1)};an.prototype.once=function(t,n,r){return Nv(this,t,n,r,!0)};an.prototype.removeListener=function(t,n,r,i){var o=yn?yn+t:t;if(!this._events[o])return this;if(!n)return Ia(this,o),this;var s=this._events[o];if(s.fn)s.fn===n&&(!i||s.once)&&(!r||s.context===r)&&Ia(this,o);else{for(var l=0,a=[],c=s.length;l<c;l++)(s[l].fn!==n||i&&!s[l].once||r&&s[l].context!==r)&&a.push(s[l]);a.length?this._events[o]=a.length===1?a[0]:a:Ia(this,o)}return this};an.prototype.removeAllListeners=function(t){var n;return t?(n=yn?yn+t:t,this._events[n]&&Ia(this,n)):(this._events=new Ts,this._eventsCount=0),this};an.prototype.off=an.prototype.removeListener;an.prototype.addListener=an.prototype.on;an.prefixed=yn;an.EventEmitter=an;$s=an;var oe={};yr(oe,"LogLevel",()=>Sn,e=>Sn=e);yr(oe,"default",()=>Ah,e=>Ah=e);var ci=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},ui=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},P_="PeerJS: ",Sn;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(Sn||(Sn={}));var k_=function(){function e(){this._logLevel=Sn.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=Sn.All&&this._print.apply(this,ui([Sn.All],ci(t),!1))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=Sn.Warnings&&this._print.apply(this,ui([Sn.Warnings],ci(t),!1))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=Sn.Errors&&this._print.apply(this,ui([Sn.Errors],ci(t),!1))},e.prototype.setLogFunction=function(t){this._print=t},e.prototype._print=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=ui([P_],ci(n),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);t>=Sn.All?console.log.apply(console,ui([],ci(i),!1)):t>=Sn.Warnings?console.warn.apply(console,ui(["WARNING"],ci(i),!1)):t>=Sn.Errors&&console.error.apply(console,ui(["ERROR"],ci(i),!1))},e}(),Ah=new k_,Lv={};yr(Lv,"Socket",()=>Nh,e=>Nh=e);var Xn;(function(e){e.Data="data",e.Media="media"})(Xn||(Xn={}));var Et;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(Et||(Et={}));var br;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"})(br||(br={}));var Tr;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(Tr||(Tr={}));var Gt;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(Gt||(Gt={}));var md={};md=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var T_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),O_=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},R_=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},M_=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nh=function(e){T_(t,e);function t(n,r,i,o,s,l){l===void 0&&(l=5e3);var a=e.call(this)||this;a.pingInterval=l,a._disconnected=!0,a._messagesQueue=[];var c=n?"wss://":"ws://";return a._baseUrl=c+r+":"+i+o+"peerjs?key="+s,a}return t.prototype.start=function(n,r){var i=this;this._id=n;var o="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+md.version),this._disconnected=!1,this._socket.onmessage=function(s){var l;try{l=JSON.parse(s.data),oe.default.log("Server message received:",l)}catch{oe.default.log("Invalid server message",s.data);return}i.emit(Tr.Message,l)},this._socket.onclose=function(s){i._disconnected||(oe.default.log("Socket closed.",s),i._cleanup(),i._disconnected=!0,i.emit(Tr.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),oe.default.log("Socket open"),i._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(!this._wsOpen()){oe.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:Gt.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},t.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},t.prototype._sendQueuedMessages=function(){var n,r,i=R_([],O_(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=M_(i),s=o.next();!s.done;s=o.next()){var l=s.value;this.send(l)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(Tr.Error,"Invalid message");return}if(this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}($s.EventEmitter),Qu={};yr(Qu,"MediaConnection",()=>Bh,e=>Bh=e);var yd={};yr(yd,"Negotiator",()=>Lh,e=>Lh=e);var dl=function(){return dl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dl.apply(this,arguments)},ca=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(f){try{c(r.next(f))}catch(d){s(d)}}function a(f){try{c(r.throw(f))}catch(d){s(d)}}function c(f){f.done?o(f.value):i(f.value).then(l,a)}c((r=r.apply(e,t||[])).next())})},ua=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(f){return a([c,f])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(f){c=[6,f],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Lh=function(){function e(t){this.connection=t}return e.prototype.startConnection=function(t){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Xn.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){if(this.connection.type===Xn.Data){var r=this.connection,i={ordered:!!t.reliable},o=n.createDataChannel(r.label,i);r.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},e.prototype._startPeerConnection=function(){oe.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},e.prototype._setupListeners=function(t){var n=this,r=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,s=this.connection.provider;oe.default.log("Listening for ICE candidates."),t.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(oe.default.log("Received ICE candidates for ".concat(r,":"),l.candidate),s.socket.send({type:Gt.Candidate,payload:{candidate:l.candidate,type:o,connectionId:i},dst:r}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":oe.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":oe.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":oe.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":t.onicecandidate=Qe.noop;break}n.connection.emit("iceStateChanged",t.iceConnectionState)},oe.default.log("Listening for data channel"),t.ondatachannel=function(l){oe.default.log("Received data channel");var a=l.channel,c=s.getConnection(r,i);c.initialize(a)},oe.default.log("Listening for remote stream"),t.ontrack=function(l){oe.default.log("Received remote stream");var a=l.streams[0],c=s.getConnection(r,i);if(c.type===Xn.Media){var f=c;n._addStreamToMediaConnection(a,f)}}},e.prototype.cleanup=function(){oe.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var n=t.signalingState!=="closed",r=!1;if(this.connection.type===Xn.Data){var i=this.connection,o=i.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed")}(n||r)&&t.close()}},e.prototype._makeOffer=function(){return ca(this,void 0,Promise,function(){var t,n,r,i,o,s,l;return ua(this,function(a){switch(a.label){case 0:t=this.connection.peerConnection,n=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:r=a.sent(),oe.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,t.setLocalDescription(r)];case 4:return a.sent(),oe.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:Qe.browser},this.connection.type===Xn.Data&&(o=this.connection,i=dl(dl({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),n.socket.send({type:Gt.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return s=a.sent(),s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Et.WebRTC,s),oe.default.log("Failed to setLocalDescription, ",s)),[3,6];case 6:return[3,8];case 7:return l=a.sent(),n.emitError(Et.WebRTC,l),oe.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return ca(this,void 0,Promise,function(){var t,n,r,i,o;return ua(this,function(s){switch(s.label){case 0:t=this.connection.peerConnection,n=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:r=s.sent(),oe.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,t.setLocalDescription(r)];case 4:return s.sent(),oe.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:Gt.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:Qe.browser},dst:this.connection.peer}),[3,6];case 5:return i=s.sent(),n.emitError(Et.WebRTC,i),oe.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=s.sent(),n.emitError(Et.WebRTC,o),oe.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(t,n){return ca(this,void 0,Promise,function(){var r,i,o,s;return ua(this,function(l){switch(l.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,oe.default.log("Setting remote description",n),o=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return l.sent(),oe.default.log("Set remoteDescription:".concat(t," for:").concat(this.connection.peer)),t!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return s=l.sent(),i.emitError(Et.WebRTC,s),oe.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(t){return ca(this,void 0,Promise,function(){var n,r,i,o,s,l;return ua(this,function(a){switch(a.label){case 0:oe.default.log("handleCandidate:",t),n=t.candidate,r=t.sdpMLineIndex,i=t.sdpMid,o=this.connection.peerConnection,s=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return a.sent(),oe.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=a.sent(),s.emitError(Et.WebRTC,l),oe.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(t,n){if(oe.default.log("add tracks from stream ".concat(t.id," to peer connection")),!n.addTrack)return oe.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(function(r){n.addTrack(r,t)})},e.prototype._addStreamToMediaConnection=function(t,n){oe.default.log("add stream ".concat(t.id," to media connection ").concat(n.connectionId)),n.addStream(t)},e}(),gd={};yr(gd,"BaseConnection",()=>jh,e=>jh=e);var D_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jh=function(e){D_(t,e);function t(n,r,i){var o=e.call(this)||this;return o.peer=n,o.provider=r,o.options=i,o._open=!1,o.metadata=i.metadata,o}return Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}($s.EventEmitter),I_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pl=function(){return pl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pl.apply(this,arguments)},A_=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bh=function(e){I_(t,e);function t(n,r,i){var o=e.call(this,n,r,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+Qe.randomToken(),o._negotiator=new yd.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return Xn.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(n){oe.default.log("Receiving stream",n),this._remoteStream=n,e.prototype.emit.call(this,"stream",n)},t.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case Gt.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case Gt.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:oe.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},t.prototype.answer=function(n,r){var i,o;if(r===void 0&&(r={}),this._localStream){oe.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(pl(pl({},this.options._payload),{_stream:n}));var s=this.provider._getMessages(this.connectionId);try{for(var l=A_(s),a=l.next();!a.done;a=l.next()){var c=a.value;this.handleMessage(c)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}this._open=!0},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(gd.BaseConnection),qu={};yr(qu,"DataConnection",()=>Uh,e=>Uh=e);var jv={};yr(jv,"EncodingQueue",()=>Fh,e=>Fh=e);var N_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fh=function(e){N_(t,e);function t(){var n=e.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){oe.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}($s.EventEmitter),L_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),j_=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Uh=function(e){L_(t,e);function t(n,r,i){var o=e.call(this,n,r,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new jv.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+Qe.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||br.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(s){o._bufferedSend(s)}),o._encodingQueue.on("error",function(){oe.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new yd.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return Xn.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var n=this;(!Qe.supports.binaryBlob||Qe.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){oe.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){oe.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){oe.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},t.prototype._handleDataMessage=function(n){var r=this,i=n.data,o=i.constructor,s=this.serialization===br.Binary||this.serialization===br.BinaryUTF8,l=i;if(s){if(o===Blob){Qe.blobToArrayBuffer(i,function(c){var f=Qe.unpack(c);r.emit("data",f)});return}else if(o===ArrayBuffer)l=Qe.unpack(i);else if(o===String){var a=Qe.binaryStringToArrayBuffer(i);l=Qe.unpack(a)}}else this.serialization===br.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}e.prototype.emit.call(this,"data",l)},t.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var o=new Blob(i.data);this._handleDataMessage({data:o})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.prototype.send=function(n,r){if(!this.open){e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===br.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===br.Binary||this.serialization===br.BinaryUTF8){var i=Qe.pack(n);if(!r&&i.size>Qe.chunkedMTU){this._sendChunks(i);return}Qe.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n)},t.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return oe.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(n){var r,i,o=Qe.chunk(n);oe.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var s=j_(o),l=s.next();!l.done;l=s.next()){var a=l.value;this.send(a,!0)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case Gt.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case Gt.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:oe.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(gd.BaseConnection),Bv={};yr(Bv,"API",()=>Vh,e=>Vh=e);var $h=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(f){try{c(r.next(f))}catch(d){s(d)}}function a(f){try{c(r.throw(f))}catch(d){s(d)}}function c(f){f.done?o(f.value):i(f.value).then(l,a)}c((r=r.apply(e,t||[])).next())})},zh=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(f){return a([c,f])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(f){c=[6,f],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Vh=function(){function e(t){this._options=t}return e.prototype._buildRequest=function(t){var n=this._options.secure?"https":"http",r=this._options,i=r.host,o=r.port,s=r.path,l=r.key,a=new URL("".concat(n,"://").concat(i,":").concat(o).concat(s).concat(l,"/").concat(t));return a.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),a.searchParams.set("version",md.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return $h(this,void 0,Promise,function(){var t,n,r;return zh(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(t=i.sent(),t.status!==200)throw new Error("Error. Status:".concat(t.status));return[2,t.text()];case 2:throw n=i.sent(),oe.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==Qe.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},e.prototype.listAllPeers=function(){return $h(this,void 0,Promise,function(){var t,n,r;return zh(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(t=i.sent(),t.status!==200)throw t.status===401?(n="",this._options.host===Qe.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(t.status));return[2,t.json()];case 2:throw r=i.sent(),oe.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},e}(),B_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),is=function(){return is=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},is.apply(this,arguments)},Ao=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},F_=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Xu=function(e){B_(t,e);function t(n,r){var i=e.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var o;return n&&n.constructor==Object?r=n:n&&(o=n.toString()),r=is({debug:0,host:Qe.CLOUD_HOST,port:Qe.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:Qe.randomToken(),config:Qe.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==Qe.CLOUD_HOST?i._options.secure=Qe.isSecure():i._options.host==Qe.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&oe.default.setLogFunction(i._options.logFunction),oe.default.logLevel=i._options.debug||0,i._api=new Bv.API(r),i._socket=i._createServerConnection(),!Qe.supports.audioVideo&&!Qe.supports.data?(i._delayedAbort(Et.BrowserIncompatible,"The current browser does not support WebRTC"),i):o&&!Qe.validateId(o)?(i._delayedAbort(Et.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(s){return i._initialize(s)}).catch(function(s){return i._abort(Et.ServerError,s)}),i)}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var o=Ao(this._connections),s=o.next();!s.done;s=o.next()){var l=F_(s.value,2),a=l[0],c=l[1];i[a]=c}}catch(f){n={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var n=this,r=new Lv.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(Tr.Message,function(i){n._handleMessage(i)}),r.on(Tr.Error,function(i){n._abort(Et.SocketError,i)}),r.on(Tr.Disconnected,function(){n.disconnected||(n.emitError(Et.Network,"Lost connection to server."),n.disconnect())}),r.on(Tr.Close,function(){n.disconnected||n._abort(Et.SocketClosed,"Underlying socket is already closed.")}),r},t.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},t.prototype._handleMessage=function(n){var r,i,o=n.type,s=n.payload,l=n.src;switch(o){case Gt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Gt.Error:this._abort(Et.ServerError,s.msg);break;case Gt.IdTaken:this._abort(Et.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Gt.InvalidKey:this._abort(Et.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Gt.Leave:oe.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case Gt.Expire:this.emitError(Et.PeerUnavailable,"Could not connect to peer ".concat(l));break;case Gt.Offer:var x=s.connectionId,_=this.getConnection(l,x);if(_&&(_.close(),oe.default.warn("Offer received for existing Connection ID:".concat(x))),s.type===Xn.Media){var a=new Qu.MediaConnection(l,this,{connectionId:x,_payload:s,metadata:s.metadata});_=a,this._addConnection(l,_),this.emit("call",a)}else if(s.type===Xn.Data){var c=new qu.DataConnection(l,this,{connectionId:x,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});_=c,this._addConnection(l,_),this.emit("connection",c)}else{oe.default.warn("Received malformed connection type:".concat(s.type));return}var f=this._getMessages(x);try{for(var d=Ao(f),p=d.next();!p.done;p=d.next()){var S=p.value;_.handleMessage(S)}}catch(I){r={error:I}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}break;default:if(!s){oe.default.warn("You received a malformed message from ".concat(l," of type ").concat(o));return}var x=s.connectionId,_=this.getConnection(l,x);_&&_.peerConnection?_.handleMessage(n):x?this._storeMessage(x,n):oe.default.warn("You received an unrecognized message:",n);break}},t.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},t.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},t.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){oe.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Et.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new qu.DataConnection(n,this,r);return this._addConnection(n,i),i},t.prototype.call=function(n,r,i){if(i===void 0&&(i={}),this.disconnected){oe.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Et.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){oe.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new Qu.MediaConnection(n,this,is(is({},i),{_stream:r}));return this._addConnection(n,o),o},t.prototype._addConnection=function(n,r){oe.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},t.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);i!==-1&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},t.prototype.getConnection=function(n,r){var i,o,s=this._connections.get(n);if(!s)return null;try{for(var l=Ao(s),a=l.next();!a.done;a=l.next()){var c=a.value;if(c.connectionId===r)return c}}catch(f){i={error:f}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return null},t.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},t.prototype._abort=function(n,r){oe.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(n,r){oe.default.error("Error:",r);var i;typeof r=="string"?i=new Error(r):i=r,i.type=n,this.emit("error",i)},t.prototype.destroy=function(){this.destroyed||(oe.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var n,r;try{for(var i=Ao(this._connections.keys()),o=i.next();!o.done;o=i.next()){var s=o.value;this._cleanupPeer(s),this._connections.delete(s)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(n){var r,i,o=this._connections.get(n);if(o)try{for(var s=Ao(o),l=s.next();!l.done;l=s.next()){var a=l.value;a.close()}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;oe.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)oe.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)oe.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},t.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort(Et.ServerError,i)})},t.DEFAULT_KEY="peerjs",t}($s.EventEmitter),U_=Av.Peer;const $_=Object.freeze(Object.defineProperty({__proto__:null,default:U_,get Peer(){return Xu},util:Qe},Symbol.toStringTag,{value:"Module"})),z_=_l($_);function V_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hl={},G_={get exports(){return hl},set exports(e){hl=e}};const H_={},W_=Object.freeze(Object.defineProperty({__proto__:null,default:H_},Symbol.toStringTag,{value:"Module"})),K_=_l(W_);(function(e){(function(t){var n=function(h){var y,m=new Float64Array(16);if(h)for(y=0;y<h.length;y++)m[y]=h[y];return m},r=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=n(),l=n([1]),a=n([56129,1]),c=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),p=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function x(h,y,m,u){h[y]=m>>24&255,h[y+1]=m>>16&255,h[y+2]=m>>8&255,h[y+3]=m&255,h[y+4]=u>>24&255,h[y+5]=u>>16&255,h[y+6]=u>>8&255,h[y+7]=u&255}function _(h,y,m,u,v){var k,T=0;for(k=0;k<v;k++)T|=h[y+k]^m[u+k];return(1&T-1>>>8)-1}function I(h,y,m,u){return _(h,y,m,u,16)}function C(h,y,m,u){return _(h,y,m,u,32)}function g(h,y,m,u){for(var v=u[0]&255|(u[1]&255)<<8|(u[2]&255)<<16|(u[3]&255)<<24,k=m[0]&255|(m[1]&255)<<8|(m[2]&255)<<16|(m[3]&255)<<24,T=m[4]&255|(m[5]&255)<<8|(m[6]&255)<<16|(m[7]&255)<<24,L=m[8]&255|(m[9]&255)<<8|(m[10]&255)<<16|(m[11]&255)<<24,W=m[12]&255|(m[13]&255)<<8|(m[14]&255)<<16|(m[15]&255)<<24,ce=u[4]&255|(u[5]&255)<<8|(u[6]&255)<<16|(u[7]&255)<<24,Z=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,We=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,ne=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,be=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,we=u[8]&255|(u[9]&255)<<8|(u[10]&255)<<16|(u[11]&255)<<24,Re=m[16]&255|(m[17]&255)<<8|(m[18]&255)<<16|(m[19]&255)<<24,Oe=m[20]&255|(m[21]&255)<<8|(m[22]&255)<<16|(m[23]&255)<<24,Ee=m[24]&255|(m[25]&255)<<8|(m[26]&255)<<16|(m[27]&255)<<24,ke=m[28]&255|(m[29]&255)<<8|(m[30]&255)<<16|(m[31]&255)<<24,Pe=u[12]&255|(u[13]&255)<<8|(u[14]&255)<<16|(u[15]&255)<<24,ie=v,fe=k,te=T,se=L,le=W,X=ce,R=Z,M=We,U=ne,N=be,j=we,V=Re,ve=Oe,Me=Ee,Ie=ke,De=Pe,b,je=0;je<20;je+=2)b=ie+ve|0,le^=b<<7|b>>>32-7,b=le+ie|0,U^=b<<9|b>>>32-9,b=U+le|0,ve^=b<<13|b>>>32-13,b=ve+U|0,ie^=b<<18|b>>>32-18,b=X+fe|0,N^=b<<7|b>>>32-7,b=N+X|0,Me^=b<<9|b>>>32-9,b=Me+N|0,fe^=b<<13|b>>>32-13,b=fe+Me|0,X^=b<<18|b>>>32-18,b=j+R|0,Ie^=b<<7|b>>>32-7,b=Ie+j|0,te^=b<<9|b>>>32-9,b=te+Ie|0,R^=b<<13|b>>>32-13,b=R+te|0,j^=b<<18|b>>>32-18,b=De+V|0,se^=b<<7|b>>>32-7,b=se+De|0,M^=b<<9|b>>>32-9,b=M+se|0,V^=b<<13|b>>>32-13,b=V+M|0,De^=b<<18|b>>>32-18,b=ie+se|0,fe^=b<<7|b>>>32-7,b=fe+ie|0,te^=b<<9|b>>>32-9,b=te+fe|0,se^=b<<13|b>>>32-13,b=se+te|0,ie^=b<<18|b>>>32-18,b=X+le|0,R^=b<<7|b>>>32-7,b=R+X|0,M^=b<<9|b>>>32-9,b=M+R|0,le^=b<<13|b>>>32-13,b=le+M|0,X^=b<<18|b>>>32-18,b=j+N|0,V^=b<<7|b>>>32-7,b=V+j|0,U^=b<<9|b>>>32-9,b=U+V|0,N^=b<<13|b>>>32-13,b=N+U|0,j^=b<<18|b>>>32-18,b=De+Ie|0,ve^=b<<7|b>>>32-7,b=ve+De|0,Me^=b<<9|b>>>32-9,b=Me+ve|0,Ie^=b<<13|b>>>32-13,b=Ie+Me|0,De^=b<<18|b>>>32-18;ie=ie+v|0,fe=fe+k|0,te=te+T|0,se=se+L|0,le=le+W|0,X=X+ce|0,R=R+Z|0,M=M+We|0,U=U+ne|0,N=N+be|0,j=j+we|0,V=V+Re|0,ve=ve+Oe|0,Me=Me+Ee|0,Ie=Ie+ke|0,De=De+Pe|0,h[0]=ie>>>0&255,h[1]=ie>>>8&255,h[2]=ie>>>16&255,h[3]=ie>>>24&255,h[4]=fe>>>0&255,h[5]=fe>>>8&255,h[6]=fe>>>16&255,h[7]=fe>>>24&255,h[8]=te>>>0&255,h[9]=te>>>8&255,h[10]=te>>>16&255,h[11]=te>>>24&255,h[12]=se>>>0&255,h[13]=se>>>8&255,h[14]=se>>>16&255,h[15]=se>>>24&255,h[16]=le>>>0&255,h[17]=le>>>8&255,h[18]=le>>>16&255,h[19]=le>>>24&255,h[20]=X>>>0&255,h[21]=X>>>8&255,h[22]=X>>>16&255,h[23]=X>>>24&255,h[24]=R>>>0&255,h[25]=R>>>8&255,h[26]=R>>>16&255,h[27]=R>>>24&255,h[28]=M>>>0&255,h[29]=M>>>8&255,h[30]=M>>>16&255,h[31]=M>>>24&255,h[32]=U>>>0&255,h[33]=U>>>8&255,h[34]=U>>>16&255,h[35]=U>>>24&255,h[36]=N>>>0&255,h[37]=N>>>8&255,h[38]=N>>>16&255,h[39]=N>>>24&255,h[40]=j>>>0&255,h[41]=j>>>8&255,h[42]=j>>>16&255,h[43]=j>>>24&255,h[44]=V>>>0&255,h[45]=V>>>8&255,h[46]=V>>>16&255,h[47]=V>>>24&255,h[48]=ve>>>0&255,h[49]=ve>>>8&255,h[50]=ve>>>16&255,h[51]=ve>>>24&255,h[52]=Me>>>0&255,h[53]=Me>>>8&255,h[54]=Me>>>16&255,h[55]=Me>>>24&255,h[56]=Ie>>>0&255,h[57]=Ie>>>8&255,h[58]=Ie>>>16&255,h[59]=Ie>>>24&255,h[60]=De>>>0&255,h[61]=De>>>8&255,h[62]=De>>>16&255,h[63]=De>>>24&255}function w(h,y,m,u){for(var v=u[0]&255|(u[1]&255)<<8|(u[2]&255)<<16|(u[3]&255)<<24,k=m[0]&255|(m[1]&255)<<8|(m[2]&255)<<16|(m[3]&255)<<24,T=m[4]&255|(m[5]&255)<<8|(m[6]&255)<<16|(m[7]&255)<<24,L=m[8]&255|(m[9]&255)<<8|(m[10]&255)<<16|(m[11]&255)<<24,W=m[12]&255|(m[13]&255)<<8|(m[14]&255)<<16|(m[15]&255)<<24,ce=u[4]&255|(u[5]&255)<<8|(u[6]&255)<<16|(u[7]&255)<<24,Z=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,We=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,ne=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,be=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,we=u[8]&255|(u[9]&255)<<8|(u[10]&255)<<16|(u[11]&255)<<24,Re=m[16]&255|(m[17]&255)<<8|(m[18]&255)<<16|(m[19]&255)<<24,Oe=m[20]&255|(m[21]&255)<<8|(m[22]&255)<<16|(m[23]&255)<<24,Ee=m[24]&255|(m[25]&255)<<8|(m[26]&255)<<16|(m[27]&255)<<24,ke=m[28]&255|(m[29]&255)<<8|(m[30]&255)<<16|(m[31]&255)<<24,Pe=u[12]&255|(u[13]&255)<<8|(u[14]&255)<<16|(u[15]&255)<<24,ie=v,fe=k,te=T,se=L,le=W,X=ce,R=Z,M=We,U=ne,N=be,j=we,V=Re,ve=Oe,Me=Ee,Ie=ke,De=Pe,b,je=0;je<20;je+=2)b=ie+ve|0,le^=b<<7|b>>>32-7,b=le+ie|0,U^=b<<9|b>>>32-9,b=U+le|0,ve^=b<<13|b>>>32-13,b=ve+U|0,ie^=b<<18|b>>>32-18,b=X+fe|0,N^=b<<7|b>>>32-7,b=N+X|0,Me^=b<<9|b>>>32-9,b=Me+N|0,fe^=b<<13|b>>>32-13,b=fe+Me|0,X^=b<<18|b>>>32-18,b=j+R|0,Ie^=b<<7|b>>>32-7,b=Ie+j|0,te^=b<<9|b>>>32-9,b=te+Ie|0,R^=b<<13|b>>>32-13,b=R+te|0,j^=b<<18|b>>>32-18,b=De+V|0,se^=b<<7|b>>>32-7,b=se+De|0,M^=b<<9|b>>>32-9,b=M+se|0,V^=b<<13|b>>>32-13,b=V+M|0,De^=b<<18|b>>>32-18,b=ie+se|0,fe^=b<<7|b>>>32-7,b=fe+ie|0,te^=b<<9|b>>>32-9,b=te+fe|0,se^=b<<13|b>>>32-13,b=se+te|0,ie^=b<<18|b>>>32-18,b=X+le|0,R^=b<<7|b>>>32-7,b=R+X|0,M^=b<<9|b>>>32-9,b=M+R|0,le^=b<<13|b>>>32-13,b=le+M|0,X^=b<<18|b>>>32-18,b=j+N|0,V^=b<<7|b>>>32-7,b=V+j|0,U^=b<<9|b>>>32-9,b=U+V|0,N^=b<<13|b>>>32-13,b=N+U|0,j^=b<<18|b>>>32-18,b=De+Ie|0,ve^=b<<7|b>>>32-7,b=ve+De|0,Me^=b<<9|b>>>32-9,b=Me+ve|0,Ie^=b<<13|b>>>32-13,b=Ie+Me|0,De^=b<<18|b>>>32-18;h[0]=ie>>>0&255,h[1]=ie>>>8&255,h[2]=ie>>>16&255,h[3]=ie>>>24&255,h[4]=X>>>0&255,h[5]=X>>>8&255,h[6]=X>>>16&255,h[7]=X>>>24&255,h[8]=j>>>0&255,h[9]=j>>>8&255,h[10]=j>>>16&255,h[11]=j>>>24&255,h[12]=De>>>0&255,h[13]=De>>>8&255,h[14]=De>>>16&255,h[15]=De>>>24&255,h[16]=R>>>0&255,h[17]=R>>>8&255,h[18]=R>>>16&255,h[19]=R>>>24&255,h[20]=M>>>0&255,h[21]=M>>>8&255,h[22]=M>>>16&255,h[23]=M>>>24&255,h[24]=U>>>0&255,h[25]=U>>>8&255,h[26]=U>>>16&255,h[27]=U>>>24&255,h[28]=N>>>0&255,h[29]=N>>>8&255,h[30]=N>>>16&255,h[31]=N>>>24&255}function P(h,y,m,u){g(h,y,m,u)}function B(h,y,m,u){w(h,y,m,u)}var K=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function J(h,y,m,u,v,k,T){var L=new Uint8Array(16),W=new Uint8Array(64),ce,Z;for(Z=0;Z<16;Z++)L[Z]=0;for(Z=0;Z<8;Z++)L[Z]=k[Z];for(;v>=64;){for(P(W,L,T,K),Z=0;Z<64;Z++)h[y+Z]=m[u+Z]^W[Z];for(ce=1,Z=8;Z<16;Z++)ce=ce+(L[Z]&255)|0,L[Z]=ce&255,ce>>>=8;v-=64,y+=64,u+=64}if(v>0)for(P(W,L,T,K),Z=0;Z<v;Z++)h[y+Z]=m[u+Z]^W[Z];return 0}function Q(h,y,m,u,v){var k=new Uint8Array(16),T=new Uint8Array(64),L,W;for(W=0;W<16;W++)k[W]=0;for(W=0;W<8;W++)k[W]=u[W];for(;m>=64;){for(P(T,k,v,K),W=0;W<64;W++)h[y+W]=T[W];for(L=1,W=8;W<16;W++)L=L+(k[W]&255)|0,k[W]=L&255,L>>>=8;m-=64,y+=64}if(m>0)for(P(T,k,v,K),W=0;W<m;W++)h[y+W]=T[W];return 0}function Fe(h,y,m,u,v){var k=new Uint8Array(32);B(k,u,v,K);for(var T=new Uint8Array(8),L=0;L<8;L++)T[L]=u[L+16];return Q(h,y,m,T,k)}function Y(h,y,m,u,v,k,T){var L=new Uint8Array(32);B(L,k,T,K);for(var W=new Uint8Array(8),ce=0;ce<8;ce++)W[ce]=k[ce+16];return J(h,y,m,u,v,W,L)}var at=function(h){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var y,m,u,v,k,T,L,W;y=h[0]&255|(h[1]&255)<<8,this.r[0]=y&8191,m=h[2]&255|(h[3]&255)<<8,this.r[1]=(y>>>13|m<<3)&8191,u=h[4]&255|(h[5]&255)<<8,this.r[2]=(m>>>10|u<<6)&7939,v=h[6]&255|(h[7]&255)<<8,this.r[3]=(u>>>7|v<<9)&8191,k=h[8]&255|(h[9]&255)<<8,this.r[4]=(v>>>4|k<<12)&255,this.r[5]=k>>>1&8190,T=h[10]&255|(h[11]&255)<<8,this.r[6]=(k>>>14|T<<2)&8191,L=h[12]&255|(h[13]&255)<<8,this.r[7]=(T>>>11|L<<5)&8065,W=h[14]&255|(h[15]&255)<<8,this.r[8]=(L>>>8|W<<8)&8191,this.r[9]=W>>>5&127,this.pad[0]=h[16]&255|(h[17]&255)<<8,this.pad[1]=h[18]&255|(h[19]&255)<<8,this.pad[2]=h[20]&255|(h[21]&255)<<8,this.pad[3]=h[22]&255|(h[23]&255)<<8,this.pad[4]=h[24]&255|(h[25]&255)<<8,this.pad[5]=h[26]&255|(h[27]&255)<<8,this.pad[6]=h[28]&255|(h[29]&255)<<8,this.pad[7]=h[30]&255|(h[31]&255)<<8};at.prototype.blocks=function(h,y,m){for(var u=this.fin?0:2048,v,k,T,L,W,ce,Z,We,ne,be,we,Re,Oe,Ee,ke,Pe,ie,fe,te,se=this.h[0],le=this.h[1],X=this.h[2],R=this.h[3],M=this.h[4],U=this.h[5],N=this.h[6],j=this.h[7],V=this.h[8],ve=this.h[9],Me=this.r[0],Ie=this.r[1],De=this.r[2],b=this.r[3],je=this.r[4],Ke=this.r[5],Ye=this.r[6],Le=this.r[7],ze=this.r[8],Ve=this.r[9];m>=16;)v=h[y+0]&255|(h[y+1]&255)<<8,se+=v&8191,k=h[y+2]&255|(h[y+3]&255)<<8,le+=(v>>>13|k<<3)&8191,T=h[y+4]&255|(h[y+5]&255)<<8,X+=(k>>>10|T<<6)&8191,L=h[y+6]&255|(h[y+7]&255)<<8,R+=(T>>>7|L<<9)&8191,W=h[y+8]&255|(h[y+9]&255)<<8,M+=(L>>>4|W<<12)&8191,U+=W>>>1&8191,ce=h[y+10]&255|(h[y+11]&255)<<8,N+=(W>>>14|ce<<2)&8191,Z=h[y+12]&255|(h[y+13]&255)<<8,j+=(ce>>>11|Z<<5)&8191,We=h[y+14]&255|(h[y+15]&255)<<8,V+=(Z>>>8|We<<8)&8191,ve+=We>>>5|u,ne=0,be=ne,be+=se*Me,be+=le*(5*Ve),be+=X*(5*ze),be+=R*(5*Le),be+=M*(5*Ye),ne=be>>>13,be&=8191,be+=U*(5*Ke),be+=N*(5*je),be+=j*(5*b),be+=V*(5*De),be+=ve*(5*Ie),ne+=be>>>13,be&=8191,we=ne,we+=se*Ie,we+=le*Me,we+=X*(5*Ve),we+=R*(5*ze),we+=M*(5*Le),ne=we>>>13,we&=8191,we+=U*(5*Ye),we+=N*(5*Ke),we+=j*(5*je),we+=V*(5*b),we+=ve*(5*De),ne+=we>>>13,we&=8191,Re=ne,Re+=se*De,Re+=le*Ie,Re+=X*Me,Re+=R*(5*Ve),Re+=M*(5*ze),ne=Re>>>13,Re&=8191,Re+=U*(5*Le),Re+=N*(5*Ye),Re+=j*(5*Ke),Re+=V*(5*je),Re+=ve*(5*b),ne+=Re>>>13,Re&=8191,Oe=ne,Oe+=se*b,Oe+=le*De,Oe+=X*Ie,Oe+=R*Me,Oe+=M*(5*Ve),ne=Oe>>>13,Oe&=8191,Oe+=U*(5*ze),Oe+=N*(5*Le),Oe+=j*(5*Ye),Oe+=V*(5*Ke),Oe+=ve*(5*je),ne+=Oe>>>13,Oe&=8191,Ee=ne,Ee+=se*je,Ee+=le*b,Ee+=X*De,Ee+=R*Ie,Ee+=M*Me,ne=Ee>>>13,Ee&=8191,Ee+=U*(5*Ve),Ee+=N*(5*ze),Ee+=j*(5*Le),Ee+=V*(5*Ye),Ee+=ve*(5*Ke),ne+=Ee>>>13,Ee&=8191,ke=ne,ke+=se*Ke,ke+=le*je,ke+=X*b,ke+=R*De,ke+=M*Ie,ne=ke>>>13,ke&=8191,ke+=U*Me,ke+=N*(5*Ve),ke+=j*(5*ze),ke+=V*(5*Le),ke+=ve*(5*Ye),ne+=ke>>>13,ke&=8191,Pe=ne,Pe+=se*Ye,Pe+=le*Ke,Pe+=X*je,Pe+=R*b,Pe+=M*De,ne=Pe>>>13,Pe&=8191,Pe+=U*Ie,Pe+=N*Me,Pe+=j*(5*Ve),Pe+=V*(5*ze),Pe+=ve*(5*Le),ne+=Pe>>>13,Pe&=8191,ie=ne,ie+=se*Le,ie+=le*Ye,ie+=X*Ke,ie+=R*je,ie+=M*b,ne=ie>>>13,ie&=8191,ie+=U*De,ie+=N*Ie,ie+=j*Me,ie+=V*(5*Ve),ie+=ve*(5*ze),ne+=ie>>>13,ie&=8191,fe=ne,fe+=se*ze,fe+=le*Le,fe+=X*Ye,fe+=R*Ke,fe+=M*je,ne=fe>>>13,fe&=8191,fe+=U*b,fe+=N*De,fe+=j*Ie,fe+=V*Me,fe+=ve*(5*Ve),ne+=fe>>>13,fe&=8191,te=ne,te+=se*Ve,te+=le*ze,te+=X*Le,te+=R*Ye,te+=M*Ke,ne=te>>>13,te&=8191,te+=U*je,te+=N*b,te+=j*De,te+=V*Ie,te+=ve*Me,ne+=te>>>13,te&=8191,ne=(ne<<2)+ne|0,ne=ne+be|0,be=ne&8191,ne=ne>>>13,we+=ne,se=be,le=we,X=Re,R=Oe,M=Ee,U=ke,N=Pe,j=ie,V=fe,ve=te,y+=16,m-=16;this.h[0]=se,this.h[1]=le,this.h[2]=X,this.h[3]=R,this.h[4]=M,this.h[5]=U,this.h[6]=N,this.h[7]=j,this.h[8]=V,this.h[9]=ve},at.prototype.finish=function(h,y){var m=new Uint16Array(10),u,v,k,T;if(this.leftover){for(T=this.leftover,this.buffer[T++]=1;T<16;T++)this.buffer[T]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(u=this.h[1]>>>13,this.h[1]&=8191,T=2;T<10;T++)this.h[T]+=u,u=this.h[T]>>>13,this.h[T]&=8191;for(this.h[0]+=u*5,u=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=u,u=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=u,m[0]=this.h[0]+5,u=m[0]>>>13,m[0]&=8191,T=1;T<10;T++)m[T]=this.h[T]+u,u=m[T]>>>13,m[T]&=8191;for(m[9]-=1<<13,v=(u^1)-1,T=0;T<10;T++)m[T]&=v;for(v=~v,T=0;T<10;T++)this.h[T]=this.h[T]&v|m[T];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,k=this.h[0]+this.pad[0],this.h[0]=k&65535,T=1;T<8;T++)k=(this.h[T]+this.pad[T]|0)+(k>>>16)|0,this.h[T]=k&65535;h[y+0]=this.h[0]>>>0&255,h[y+1]=this.h[0]>>>8&255,h[y+2]=this.h[1]>>>0&255,h[y+3]=this.h[1]>>>8&255,h[y+4]=this.h[2]>>>0&255,h[y+5]=this.h[2]>>>8&255,h[y+6]=this.h[3]>>>0&255,h[y+7]=this.h[3]>>>8&255,h[y+8]=this.h[4]>>>0&255,h[y+9]=this.h[4]>>>8&255,h[y+10]=this.h[5]>>>0&255,h[y+11]=this.h[5]>>>8&255,h[y+12]=this.h[6]>>>0&255,h[y+13]=this.h[6]>>>8&255,h[y+14]=this.h[7]>>>0&255,h[y+15]=this.h[7]>>>8&255},at.prototype.update=function(h,y,m){var u,v;if(this.leftover){for(v=16-this.leftover,v>m&&(v=m),u=0;u<v;u++)this.buffer[this.leftover+u]=h[y+u];if(m-=v,y+=v,this.leftover+=v,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(m>=16&&(v=m-m%16,this.blocks(h,y,v),y+=v,m-=v),m){for(u=0;u<m;u++)this.buffer[this.leftover+u]=h[y+u];this.leftover+=m}};function lt(h,y,m,u,v,k){var T=new at(k);return T.update(m,u,v),T.finish(h,y),0}function Rt(h,y,m,u,v,k){var T=new Uint8Array(16);return lt(T,0,m,u,v,k),I(h,y,T,0)}function $e(h,y,m,u,v){var k;if(m<32)return-1;for(Y(h,0,y,0,m,u,v),lt(h,16,h,32,m-32,h),k=0;k<16;k++)h[k]=0;return 0}function Lt(h,y,m,u,v){var k,T=new Uint8Array(32);if(m<32||(Fe(T,0,32,u,v),Rt(y,16,y,32,m-32,T)!==0))return-1;for(Y(h,0,y,0,m,u,v),k=0;k<32;k++)h[k]=0;return 0}function _t(h,y){var m;for(m=0;m<16;m++)h[m]=y[m]|0}function Ut(h){var y,m,u=1;for(y=0;y<16;y++)m=h[y]+u+65535,u=Math.floor(m/65536),h[y]=m-u*65536;h[0]+=u-1+37*(u-1)}function H(h,y,m){for(var u,v=~(m-1),k=0;k<16;k++)u=v&(h[k]^y[k]),h[k]^=u,y[k]^=u}function de(h,y){var m,u,v,k=n(),T=n();for(m=0;m<16;m++)T[m]=y[m];for(Ut(T),Ut(T),Ut(T),u=0;u<2;u++){for(k[0]=T[0]-65517,m=1;m<15;m++)k[m]=T[m]-65535-(k[m-1]>>16&1),k[m-1]&=65535;k[15]=T[15]-32767-(k[14]>>16&1),v=k[15]>>16&1,k[14]&=65535,H(T,k,1-v)}for(m=0;m<16;m++)h[2*m]=T[m]&255,h[2*m+1]=T[m]>>8}function Ce(h,y){var m=new Uint8Array(32),u=new Uint8Array(32);return de(m,h),de(u,y),C(m,0,u,0)}function He(h){var y=new Uint8Array(32);return de(y,h),y[0]&1}function Ze(h,y){var m;for(m=0;m<16;m++)h[m]=y[2*m]+(y[2*m+1]<<8);h[15]&=32767}function pt(h,y,m){for(var u=0;u<16;u++)h[u]=y[u]+m[u]}function qe(h,y,m){for(var u=0;u<16;u++)h[u]=y[u]-m[u]}function he(h,y,m){var u,v,k=0,T=0,L=0,W=0,ce=0,Z=0,We=0,ne=0,be=0,we=0,Re=0,Oe=0,Ee=0,ke=0,Pe=0,ie=0,fe=0,te=0,se=0,le=0,X=0,R=0,M=0,U=0,N=0,j=0,V=0,ve=0,Me=0,Ie=0,De=0,b=m[0],je=m[1],Ke=m[2],Ye=m[3],Le=m[4],ze=m[5],Ve=m[6],wt=m[7],nt=m[8],gt=m[9],vt=m[10],xt=m[11],It=m[12],Jt=m[13],Qt=m[14],qt=m[15];u=y[0],k+=u*b,T+=u*je,L+=u*Ke,W+=u*Ye,ce+=u*Le,Z+=u*ze,We+=u*Ve,ne+=u*wt,be+=u*nt,we+=u*gt,Re+=u*vt,Oe+=u*xt,Ee+=u*It,ke+=u*Jt,Pe+=u*Qt,ie+=u*qt,u=y[1],T+=u*b,L+=u*je,W+=u*Ke,ce+=u*Ye,Z+=u*Le,We+=u*ze,ne+=u*Ve,be+=u*wt,we+=u*nt,Re+=u*gt,Oe+=u*vt,Ee+=u*xt,ke+=u*It,Pe+=u*Jt,ie+=u*Qt,fe+=u*qt,u=y[2],L+=u*b,W+=u*je,ce+=u*Ke,Z+=u*Ye,We+=u*Le,ne+=u*ze,be+=u*Ve,we+=u*wt,Re+=u*nt,Oe+=u*gt,Ee+=u*vt,ke+=u*xt,Pe+=u*It,ie+=u*Jt,fe+=u*Qt,te+=u*qt,u=y[3],W+=u*b,ce+=u*je,Z+=u*Ke,We+=u*Ye,ne+=u*Le,be+=u*ze,we+=u*Ve,Re+=u*wt,Oe+=u*nt,Ee+=u*gt,ke+=u*vt,Pe+=u*xt,ie+=u*It,fe+=u*Jt,te+=u*Qt,se+=u*qt,u=y[4],ce+=u*b,Z+=u*je,We+=u*Ke,ne+=u*Ye,be+=u*Le,we+=u*ze,Re+=u*Ve,Oe+=u*wt,Ee+=u*nt,ke+=u*gt,Pe+=u*vt,ie+=u*xt,fe+=u*It,te+=u*Jt,se+=u*Qt,le+=u*qt,u=y[5],Z+=u*b,We+=u*je,ne+=u*Ke,be+=u*Ye,we+=u*Le,Re+=u*ze,Oe+=u*Ve,Ee+=u*wt,ke+=u*nt,Pe+=u*gt,ie+=u*vt,fe+=u*xt,te+=u*It,se+=u*Jt,le+=u*Qt,X+=u*qt,u=y[6],We+=u*b,ne+=u*je,be+=u*Ke,we+=u*Ye,Re+=u*Le,Oe+=u*ze,Ee+=u*Ve,ke+=u*wt,Pe+=u*nt,ie+=u*gt,fe+=u*vt,te+=u*xt,se+=u*It,le+=u*Jt,X+=u*Qt,R+=u*qt,u=y[7],ne+=u*b,be+=u*je,we+=u*Ke,Re+=u*Ye,Oe+=u*Le,Ee+=u*ze,ke+=u*Ve,Pe+=u*wt,ie+=u*nt,fe+=u*gt,te+=u*vt,se+=u*xt,le+=u*It,X+=u*Jt,R+=u*Qt,M+=u*qt,u=y[8],be+=u*b,we+=u*je,Re+=u*Ke,Oe+=u*Ye,Ee+=u*Le,ke+=u*ze,Pe+=u*Ve,ie+=u*wt,fe+=u*nt,te+=u*gt,se+=u*vt,le+=u*xt,X+=u*It,R+=u*Jt,M+=u*Qt,U+=u*qt,u=y[9],we+=u*b,Re+=u*je,Oe+=u*Ke,Ee+=u*Ye,ke+=u*Le,Pe+=u*ze,ie+=u*Ve,fe+=u*wt,te+=u*nt,se+=u*gt,le+=u*vt,X+=u*xt,R+=u*It,M+=u*Jt,U+=u*Qt,N+=u*qt,u=y[10],Re+=u*b,Oe+=u*je,Ee+=u*Ke,ke+=u*Ye,Pe+=u*Le,ie+=u*ze,fe+=u*Ve,te+=u*wt,se+=u*nt,le+=u*gt,X+=u*vt,R+=u*xt,M+=u*It,U+=u*Jt,N+=u*Qt,j+=u*qt,u=y[11],Oe+=u*b,Ee+=u*je,ke+=u*Ke,Pe+=u*Ye,ie+=u*Le,fe+=u*ze,te+=u*Ve,se+=u*wt,le+=u*nt,X+=u*gt,R+=u*vt,M+=u*xt,U+=u*It,N+=u*Jt,j+=u*Qt,V+=u*qt,u=y[12],Ee+=u*b,ke+=u*je,Pe+=u*Ke,ie+=u*Ye,fe+=u*Le,te+=u*ze,se+=u*Ve,le+=u*wt,X+=u*nt,R+=u*gt,M+=u*vt,U+=u*xt,N+=u*It,j+=u*Jt,V+=u*Qt,ve+=u*qt,u=y[13],ke+=u*b,Pe+=u*je,ie+=u*Ke,fe+=u*Ye,te+=u*Le,se+=u*ze,le+=u*Ve,X+=u*wt,R+=u*nt,M+=u*gt,U+=u*vt,N+=u*xt,j+=u*It,V+=u*Jt,ve+=u*Qt,Me+=u*qt,u=y[14],Pe+=u*b,ie+=u*je,fe+=u*Ke,te+=u*Ye,se+=u*Le,le+=u*ze,X+=u*Ve,R+=u*wt,M+=u*nt,U+=u*gt,N+=u*vt,j+=u*xt,V+=u*It,ve+=u*Jt,Me+=u*Qt,Ie+=u*qt,u=y[15],ie+=u*b,fe+=u*je,te+=u*Ke,se+=u*Ye,le+=u*Le,X+=u*ze,R+=u*Ve,M+=u*wt,U+=u*nt,N+=u*gt,j+=u*vt,V+=u*xt,ve+=u*It,Me+=u*Jt,Ie+=u*Qt,De+=u*qt,k+=38*fe,T+=38*te,L+=38*se,W+=38*le,ce+=38*X,Z+=38*R,We+=38*M,ne+=38*U,be+=38*N,we+=38*j,Re+=38*V,Oe+=38*ve,Ee+=38*Me,ke+=38*Ie,Pe+=38*De,v=1,u=k+v+65535,v=Math.floor(u/65536),k=u-v*65536,u=T+v+65535,v=Math.floor(u/65536),T=u-v*65536,u=L+v+65535,v=Math.floor(u/65536),L=u-v*65536,u=W+v+65535,v=Math.floor(u/65536),W=u-v*65536,u=ce+v+65535,v=Math.floor(u/65536),ce=u-v*65536,u=Z+v+65535,v=Math.floor(u/65536),Z=u-v*65536,u=We+v+65535,v=Math.floor(u/65536),We=u-v*65536,u=ne+v+65535,v=Math.floor(u/65536),ne=u-v*65536,u=be+v+65535,v=Math.floor(u/65536),be=u-v*65536,u=we+v+65535,v=Math.floor(u/65536),we=u-v*65536,u=Re+v+65535,v=Math.floor(u/65536),Re=u-v*65536,u=Oe+v+65535,v=Math.floor(u/65536),Oe=u-v*65536,u=Ee+v+65535,v=Math.floor(u/65536),Ee=u-v*65536,u=ke+v+65535,v=Math.floor(u/65536),ke=u-v*65536,u=Pe+v+65535,v=Math.floor(u/65536),Pe=u-v*65536,u=ie+v+65535,v=Math.floor(u/65536),ie=u-v*65536,k+=v-1+37*(v-1),v=1,u=k+v+65535,v=Math.floor(u/65536),k=u-v*65536,u=T+v+65535,v=Math.floor(u/65536),T=u-v*65536,u=L+v+65535,v=Math.floor(u/65536),L=u-v*65536,u=W+v+65535,v=Math.floor(u/65536),W=u-v*65536,u=ce+v+65535,v=Math.floor(u/65536),ce=u-v*65536,u=Z+v+65535,v=Math.floor(u/65536),Z=u-v*65536,u=We+v+65535,v=Math.floor(u/65536),We=u-v*65536,u=ne+v+65535,v=Math.floor(u/65536),ne=u-v*65536,u=be+v+65535,v=Math.floor(u/65536),be=u-v*65536,u=we+v+65535,v=Math.floor(u/65536),we=u-v*65536,u=Re+v+65535,v=Math.floor(u/65536),Re=u-v*65536,u=Oe+v+65535,v=Math.floor(u/65536),Oe=u-v*65536,u=Ee+v+65535,v=Math.floor(u/65536),Ee=u-v*65536,u=ke+v+65535,v=Math.floor(u/65536),ke=u-v*65536,u=Pe+v+65535,v=Math.floor(u/65536),Pe=u-v*65536,u=ie+v+65535,v=Math.floor(u/65536),ie=u-v*65536,k+=v-1+37*(v-1),h[0]=k,h[1]=T,h[2]=L,h[3]=W,h[4]=ce,h[5]=Z,h[6]=We,h[7]=ne,h[8]=be,h[9]=we,h[10]=Re,h[11]=Oe,h[12]=Ee,h[13]=ke,h[14]=Pe,h[15]=ie}function Ae(h,y){he(h,y,y)}function ln(h,y){var m=n(),u;for(u=0;u<16;u++)m[u]=y[u];for(u=253;u>=0;u--)Ae(m,m),u!==2&&u!==4&&he(m,m,y);for(u=0;u<16;u++)h[u]=m[u]}function rr(h,y){var m=n(),u;for(u=0;u<16;u++)m[u]=y[u];for(u=250;u>=0;u--)Ae(m,m),u!==1&&he(m,m,y);for(u=0;u<16;u++)h[u]=m[u]}function E(h,y,m){var u=new Uint8Array(32),v=new Float64Array(80),k,T,L=n(),W=n(),ce=n(),Z=n(),We=n(),ne=n();for(T=0;T<31;T++)u[T]=y[T];for(u[31]=y[31]&127|64,u[0]&=248,Ze(v,m),T=0;T<16;T++)W[T]=v[T],Z[T]=L[T]=ce[T]=0;for(L[0]=Z[0]=1,T=254;T>=0;--T)k=u[T>>>3]>>>(T&7)&1,H(L,W,k),H(ce,Z,k),pt(We,L,ce),qe(L,L,ce),pt(ce,W,Z),qe(W,W,Z),Ae(Z,We),Ae(ne,L),he(L,ce,L),he(ce,W,We),pt(We,L,ce),qe(L,L,ce),Ae(W,L),qe(ce,Z,ne),he(L,ce,a),pt(L,L,Z),he(ce,ce,L),he(L,Z,ne),he(Z,W,v),Ae(W,We),H(L,W,k),H(ce,Z,k);for(T=0;T<16;T++)v[T+16]=L[T],v[T+32]=ce[T],v[T+48]=W[T],v[T+64]=Z[T];var be=v.subarray(32),we=v.subarray(16);return ln(be,be),he(we,we,be),de(h,we),0}function O(h,y){return E(h,y,o)}function F(h,y){return r(y,32),O(h,y)}function xe(h,y,m){var u=new Uint8Array(32);return E(u,m,y),B(h,i,u,K)}var me=$e,pe=Lt;function ot(h,y,m,u,v,k){var T=new Uint8Array(32);return xe(T,v,k),me(h,y,m,u,T)}function et(h,y,m,u,v,k){var T=new Uint8Array(32);return xe(T,v,k),pe(h,y,m,u,T)}var jt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function D(h,y,m,u){for(var v=new Int32Array(16),k=new Int32Array(16),T,L,W,ce,Z,We,ne,be,we,Re,Oe,Ee,ke,Pe,ie,fe,te,se,le,X,R,M,U,N,j,V,ve=h[0],Me=h[1],Ie=h[2],De=h[3],b=h[4],je=h[5],Ke=h[6],Ye=h[7],Le=y[0],ze=y[1],Ve=y[2],wt=y[3],nt=y[4],gt=y[5],vt=y[6],xt=y[7],It=0;u>=128;){for(le=0;le<16;le++)X=8*le+It,v[le]=m[X+0]<<24|m[X+1]<<16|m[X+2]<<8|m[X+3],k[le]=m[X+4]<<24|m[X+5]<<16|m[X+6]<<8|m[X+7];for(le=0;le<80;le++)if(T=ve,L=Me,W=Ie,ce=De,Z=b,We=je,ne=Ke,be=Ye,we=Le,Re=ze,Oe=Ve,Ee=wt,ke=nt,Pe=gt,ie=vt,fe=xt,R=Ye,M=xt,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=(b>>>14|nt<<32-14)^(b>>>18|nt<<32-18)^(nt>>>41-32|b<<32-(41-32)),M=(nt>>>14|b<<32-14)^(nt>>>18|b<<32-18)^(b>>>41-32|nt<<32-(41-32)),U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,R=b&je^~b&Ke,M=nt&gt^~nt&vt,U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,R=jt[le*2],M=jt[le*2+1],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,R=v[le%16],M=k[le%16],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,te=j&65535|V<<16,se=U&65535|N<<16,R=te,M=se,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=(ve>>>28|Le<<32-28)^(Le>>>34-32|ve<<32-(34-32))^(Le>>>39-32|ve<<32-(39-32)),M=(Le>>>28|ve<<32-28)^(ve>>>34-32|Le<<32-(34-32))^(ve>>>39-32|Le<<32-(39-32)),U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,R=ve&Me^ve&Ie^Me&Ie,M=Le&ze^Le&Ve^ze&Ve,U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,be=j&65535|V<<16,fe=U&65535|N<<16,R=ce,M=Ee,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=te,M=se,U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,ce=j&65535|V<<16,Ee=U&65535|N<<16,Me=T,Ie=L,De=W,b=ce,je=Z,Ke=We,Ye=ne,ve=be,ze=we,Ve=Re,wt=Oe,nt=Ee,gt=ke,vt=Pe,xt=ie,Le=fe,le%16===15)for(X=0;X<16;X++)R=v[X],M=k[X],U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=v[(X+9)%16],M=k[(X+9)%16],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,te=v[(X+1)%16],se=k[(X+1)%16],R=(te>>>1|se<<32-1)^(te>>>8|se<<32-8)^te>>>7,M=(se>>>1|te<<32-1)^(se>>>8|te<<32-8)^(se>>>7|te<<32-7),U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,te=v[(X+14)%16],se=k[(X+14)%16],R=(te>>>19|se<<32-19)^(se>>>61-32|te<<32-(61-32))^te>>>6,M=(se>>>19|te<<32-19)^(te>>>61-32|se<<32-(61-32))^(se>>>6|te<<32-6),U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,v[X]=j&65535|V<<16,k[X]=U&65535|N<<16;R=ve,M=Le,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=h[0],M=y[0],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,h[0]=ve=j&65535|V<<16,y[0]=Le=U&65535|N<<16,R=Me,M=ze,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=h[1],M=y[1],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,h[1]=Me=j&65535|V<<16,y[1]=ze=U&65535|N<<16,R=Ie,M=Ve,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=h[2],M=y[2],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,h[2]=Ie=j&65535|V<<16,y[2]=Ve=U&65535|N<<16,R=De,M=wt,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=h[3],M=y[3],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,h[3]=De=j&65535|V<<16,y[3]=wt=U&65535|N<<16,R=b,M=nt,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=h[4],M=y[4],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,h[4]=b=j&65535|V<<16,y[4]=nt=U&65535|N<<16,R=je,M=gt,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=h[5],M=y[5],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,h[5]=je=j&65535|V<<16,y[5]=gt=U&65535|N<<16,R=Ke,M=vt,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=h[6],M=y[6],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,h[6]=Ke=j&65535|V<<16,y[6]=vt=U&65535|N<<16,R=Ye,M=xt,U=M&65535,N=M>>>16,j=R&65535,V=R>>>16,R=h[7],M=y[7],U+=M&65535,N+=M>>>16,j+=R&65535,V+=R>>>16,N+=U>>>16,j+=N>>>16,V+=j>>>16,h[7]=Ye=j&65535|V<<16,y[7]=xt=U&65535|N<<16,It+=128,u-=128}return u}function A(h,y,m){var u=new Int32Array(8),v=new Int32Array(8),k=new Uint8Array(256),T,L=m;for(u[0]=1779033703,u[1]=3144134277,u[2]=1013904242,u[3]=2773480762,u[4]=1359893119,u[5]=2600822924,u[6]=528734635,u[7]=1541459225,v[0]=4089235720,v[1]=2227873595,v[2]=4271175723,v[3]=1595750129,v[4]=2917565137,v[5]=725511199,v[6]=4215389547,v[7]=327033209,D(u,v,y,m),m%=128,T=0;T<m;T++)k[T]=y[L-m+T];for(k[m]=128,m=256-128*(m<112?1:0),k[m-9]=0,x(k,m-8,L/536870912|0,L<<3),D(u,v,k,m),T=0;T<8;T++)x(h,8*T,u[T],v[T]);return 0}function z(h,y){var m=n(),u=n(),v=n(),k=n(),T=n(),L=n(),W=n(),ce=n(),Z=n();qe(m,h[1],h[0]),qe(Z,y[1],y[0]),he(m,m,Z),pt(u,h[0],h[1]),pt(Z,y[0],y[1]),he(u,u,Z),he(v,h[3],y[3]),he(v,v,f),he(k,h[2],y[2]),pt(k,k,k),qe(T,u,m),qe(L,k,v),pt(W,k,v),pt(ce,u,m),he(h[0],T,L),he(h[1],ce,W),he(h[2],W,L),he(h[3],T,ce)}function ae(h,y,m){var u;for(u=0;u<4;u++)H(h[u],y[u],m)}function q(h,y){var m=n(),u=n(),v=n();ln(v,y[2]),he(m,y[0],v),he(u,y[1],v),de(h,u),h[31]^=He(m)<<7}function ye(h,y,m){var u,v;for(_t(h[0],s),_t(h[1],l),_t(h[2],l),_t(h[3],s),v=255;v>=0;--v)u=m[v/8|0]>>(v&7)&1,ae(h,y,u),z(y,h),z(h,h),ae(h,y,u)}function _e(h,y){var m=[n(),n(),n(),n()];_t(m[0],d),_t(m[1],p),_t(m[2],l),he(m[3],d,p),ye(h,m,y)}function Ne(h,y,m){var u=new Uint8Array(64),v=[n(),n(),n(),n()],k;for(m||r(y,32),A(u,y,32),u[0]&=248,u[31]&=127,u[31]|=64,_e(v,u),q(h,v),k=0;k<32;k++)y[k+32]=h[k];return 0}var ge=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ct(h,y){var m,u,v,k;for(u=63;u>=32;--u){for(m=0,v=u-32,k=u-12;v<k;++v)y[v]+=m-16*y[u]*ge[v-(u-32)],m=Math.floor((y[v]+128)/256),y[v]-=m*256;y[v]+=m,y[u]=0}for(m=0,v=0;v<32;v++)y[v]+=m-(y[31]>>4)*ge[v],m=y[v]>>8,y[v]&=255;for(v=0;v<32;v++)y[v]-=m*ge[v];for(u=0;u<32;u++)y[u+1]+=y[u]>>8,h[u]=y[u]&255}function Te(h){var y=new Float64Array(64),m;for(m=0;m<64;m++)y[m]=h[m];for(m=0;m<64;m++)h[m]=0;ct(h,y)}function tt(h,y,m,u){var v=new Uint8Array(64),k=new Uint8Array(64),T=new Uint8Array(64),L,W,ce=new Float64Array(64),Z=[n(),n(),n(),n()];A(v,u,32),v[0]&=248,v[31]&=127,v[31]|=64;var We=m+64;for(L=0;L<m;L++)h[64+L]=y[L];for(L=0;L<32;L++)h[32+L]=v[32+L];for(A(T,h.subarray(32),m+32),Te(T),_e(Z,T),q(h,Z),L=32;L<64;L++)h[L]=u[L];for(A(k,h,m+64),Te(k),L=0;L<64;L++)ce[L]=0;for(L=0;L<32;L++)ce[L]=T[L];for(L=0;L<32;L++)for(W=0;W<32;W++)ce[L+W]+=k[L]*v[W];return ct(h.subarray(32),ce),We}function cn(h,y){var m=n(),u=n(),v=n(),k=n(),T=n(),L=n(),W=n();return _t(h[2],l),Ze(h[1],y),Ae(v,h[1]),he(k,v,c),qe(v,v,h[2]),pt(k,h[2],k),Ae(T,k),Ae(L,T),he(W,L,T),he(m,W,v),he(m,m,k),rr(m,m),he(m,m,v),he(m,m,k),he(m,m,k),he(h[0],m,k),Ae(u,h[0]),he(u,u,k),Ce(u,v)&&he(h[0],h[0],S),Ae(u,h[0]),he(u,u,k),Ce(u,v)?-1:(He(h[0])===y[31]>>7&&qe(h[0],s,h[0]),he(h[3],h[0],h[1]),0)}function un(h,y,m,u){var v,k=new Uint8Array(32),T=new Uint8Array(64),L=[n(),n(),n(),n()],W=[n(),n(),n(),n()];if(m<64||cn(W,u))return-1;for(v=0;v<m;v++)h[v]=y[v];for(v=0;v<32;v++)h[v+32]=u[v];if(A(T,h,m),Te(T),ye(L,W,T),_e(W,y.subarray(32)),z(L,W),q(k,L),m-=64,C(y,0,k,0)){for(v=0;v<m;v++)h[v]=0;return-1}for(v=0;v<m;v++)h[v]=y[v+64];return m}var gr=32,vr=24,ir=32,Pn=16,xr=32,bt=32,Mt=32,kn=32,Sr=32,Ur=vr,nc=ir,rc=Pn,Dt=64,fn=32,Cr=64,_o=32,ic=64;t.lowlevel={crypto_core_hsalsa20:B,crypto_stream_xor:Y,crypto_stream:Fe,crypto_stream_salsa20_xor:J,crypto_stream_salsa20:Q,crypto_onetimeauth:lt,crypto_onetimeauth_verify:Rt,crypto_verify_16:I,crypto_verify_32:C,crypto_secretbox:$e,crypto_secretbox_open:Lt,crypto_scalarmult:E,crypto_scalarmult_base:O,crypto_box_beforenm:xe,crypto_box_afternm:me,crypto_box:ot,crypto_box_open:et,crypto_box_keypair:F,crypto_hash:A,crypto_sign:tt,crypto_sign_keypair:Ne,crypto_sign_open:un,crypto_secretbox_KEYBYTES:gr,crypto_secretbox_NONCEBYTES:vr,crypto_secretbox_ZEROBYTES:ir,crypto_secretbox_BOXZEROBYTES:Pn,crypto_scalarmult_BYTES:xr,crypto_scalarmult_SCALARBYTES:bt,crypto_box_PUBLICKEYBYTES:Mt,crypto_box_SECRETKEYBYTES:kn,crypto_box_BEFORENMBYTES:Sr,crypto_box_NONCEBYTES:Ur,crypto_box_ZEROBYTES:nc,crypto_box_BOXZEROBYTES:rc,crypto_sign_BYTES:Dt,crypto_sign_PUBLICKEYBYTES:fn,crypto_sign_SECRETKEYBYTES:Cr,crypto_sign_SEEDBYTES:_o,crypto_hash_BYTES:ic,gf:n,D:c,L:ge,pack25519:de,unpack25519:Ze,M:he,A:pt,S:Ae,Z:qe,pow2523:rr,add:z,set25519:_t,modL:ct,scalarmult:ye,scalarbase:_e};function Hd(h,y){if(h.length!==gr)throw new Error("bad key size");if(y.length!==vr)throw new Error("bad nonce size")}function i1(h,y){if(h.length!==Mt)throw new Error("bad public key size");if(y.length!==kn)throw new Error("bad secret key size")}function Tn(){for(var h=0;h<arguments.length;h++)if(!(arguments[h]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Wd(h){for(var y=0;y<h.length;y++)h[y]=0}t.randomBytes=function(h){var y=new Uint8Array(h);return r(y,h),y},t.secretbox=function(h,y,m){Tn(h,y,m),Hd(m,y);for(var u=new Uint8Array(ir+h.length),v=new Uint8Array(u.length),k=0;k<h.length;k++)u[k+ir]=h[k];return $e(v,u,u.length,y,m),v.subarray(Pn)},t.secretbox.open=function(h,y,m){Tn(h,y,m),Hd(m,y);for(var u=new Uint8Array(Pn+h.length),v=new Uint8Array(u.length),k=0;k<h.length;k++)u[k+Pn]=h[k];return u.length<32||Lt(v,u,u.length,y,m)!==0?null:v.subarray(ir)},t.secretbox.keyLength=gr,t.secretbox.nonceLength=vr,t.secretbox.overheadLength=Pn,t.scalarMult=function(h,y){if(Tn(h,y),h.length!==bt)throw new Error("bad n size");if(y.length!==xr)throw new Error("bad p size");var m=new Uint8Array(xr);return E(m,h,y),m},t.scalarMult.base=function(h){if(Tn(h),h.length!==bt)throw new Error("bad n size");var y=new Uint8Array(xr);return O(y,h),y},t.scalarMult.scalarLength=bt,t.scalarMult.groupElementLength=xr,t.box=function(h,y,m,u){var v=t.box.before(m,u);return t.secretbox(h,y,v)},t.box.before=function(h,y){Tn(h,y),i1(h,y);var m=new Uint8Array(Sr);return xe(m,h,y),m},t.box.after=t.secretbox,t.box.open=function(h,y,m,u){var v=t.box.before(m,u);return t.secretbox.open(h,y,v)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var h=new Uint8Array(Mt),y=new Uint8Array(kn);return F(h,y),{publicKey:h,secretKey:y}},t.box.keyPair.fromSecretKey=function(h){if(Tn(h),h.length!==kn)throw new Error("bad secret key size");var y=new Uint8Array(Mt);return O(y,h),{publicKey:y,secretKey:new Uint8Array(h)}},t.box.publicKeyLength=Mt,t.box.secretKeyLength=kn,t.box.sharedKeyLength=Sr,t.box.nonceLength=Ur,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(h,y){if(Tn(h,y),y.length!==Cr)throw new Error("bad secret key size");var m=new Uint8Array(Dt+h.length);return tt(m,h,h.length,y),m},t.sign.open=function(h,y){if(Tn(h,y),y.length!==fn)throw new Error("bad public key size");var m=new Uint8Array(h.length),u=un(m,h,h.length,y);if(u<0)return null;for(var v=new Uint8Array(u),k=0;k<v.length;k++)v[k]=m[k];return v},t.sign.detached=function(h,y){for(var m=t.sign(h,y),u=new Uint8Array(Dt),v=0;v<u.length;v++)u[v]=m[v];return u},t.sign.detached.verify=function(h,y,m){if(Tn(h,y,m),y.length!==Dt)throw new Error("bad signature size");if(m.length!==fn)throw new Error("bad public key size");var u=new Uint8Array(Dt+h.length),v=new Uint8Array(Dt+h.length),k;for(k=0;k<Dt;k++)u[k]=y[k];for(k=0;k<h.length;k++)u[k+Dt]=h[k];return un(v,u,u.length,m)>=0},t.sign.keyPair=function(){var h=new Uint8Array(fn),y=new Uint8Array(Cr);return Ne(h,y),{publicKey:h,secretKey:y}},t.sign.keyPair.fromSecretKey=function(h){if(Tn(h),h.length!==Cr)throw new Error("bad secret key size");for(var y=new Uint8Array(fn),m=0;m<y.length;m++)y[m]=h[32+m];return{publicKey:y,secretKey:new Uint8Array(h)}},t.sign.keyPair.fromSeed=function(h){if(Tn(h),h.length!==_o)throw new Error("bad seed size");for(var y=new Uint8Array(fn),m=new Uint8Array(Cr),u=0;u<32;u++)m[u]=h[u];return Ne(y,m,!0),{publicKey:y,secretKey:m}},t.sign.publicKeyLength=fn,t.sign.secretKeyLength=Cr,t.sign.seedLength=_o,t.sign.signatureLength=Dt,t.hash=function(h){Tn(h);var y=new Uint8Array(ic);return A(y,h,h.length),y},t.hash.hashLength=ic,t.verify=function(h,y){return Tn(h,y),h.length===0||y.length===0||h.length!==y.length?!1:_(h,0,y,0,h.length)===0},t.setPRNG=function(h){r=h},function(){var h=typeof self<"u"?self.crypto||self.msCrypto:null;if(h&&h.getRandomValues){var y=65536;t.setPRNG(function(m,u){var v,k=new Uint8Array(u);for(v=0;v<u;v+=y)h.getRandomValues(k.subarray(v,v+Math.min(u-v,y)));for(v=0;v<u;v++)m[v]=k[v];Wd(k)})}else typeof V_<"u"&&(h=K_,h&&h.randomBytes&&t.setPRNG(function(m,u){var v,k=h.randomBytes(u);for(v=0;v<u;v++)m[v]=k[v];Wd(k)}))}()})(e.exports?e.exports:self.nacl=self.nacl||{})})(G_);var ml={},Y_={get exports(){return ml},set exports(e){ml=e}};(function(e){(function(t,n){e.exports?e.exports=n():(t.nacl||(t.nacl={}),t.nacl.util=n())})(zn,function(){var t={};function n(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var i,o=unescape(encodeURIComponent(r)),s=new Uint8Array(o.length);for(i=0;i<o.length;i++)s[i]=o.charCodeAt(i);return s},t.encodeUTF8=function(r){var i,o=[];for(i=0;i<r.length;i++)o.push(String.fromCharCode(r[i]));return decodeURIComponent(escape(o.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(t.encodeBase64=function(r){return Buffer.from(r).toString("base64")},t.decodeBase64=function(r){return n(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(t.encodeBase64=function(r){return new Buffer(r).toString("base64")},t.decodeBase64=function(r){return n(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(t.encodeBase64=function(r){var i,o=[],s=r.length;for(i=0;i<s;i++)o.push(String.fromCharCode(r[i]));return btoa(o.join(""))},t.decodeBase64=function(r){n(r);var i,o=atob(r),s=new Uint8Array(o.length);for(i=0;i<o.length;i++)s[i]=o.charCodeAt(i);return s}),t})})(Y_);function Zn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function uo(e){return!!e&&!!e[Nn]}function Ii(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===nb}(e)||Array.isArray(e)||!!e[qh]||!!(!((t=e.constructor)===null||t===void 0)&&t[qh])||vd(e)||xd(e))}function Os(e,t,n){n===void 0&&(n=!1),xo(e)===0?(n?Object.keys:wd)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function xo(e){var t=e[Nn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:vd(e)?2:xd(e)?3:0}function Zu(e,t){return xo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function J_(e,t){return xo(e)===2?e.get(t):e[t]}function Fv(e,t,n){var r=xo(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Q_(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function vd(e){return eb&&e instanceof Map}function xd(e){return tb&&e instanceof Set}function yi(e){return e.o||e.t}function Sd(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=rb(e);delete t[Nn];for(var n=wd(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Cd(e,t){return t===void 0&&(t=!1),_d(e)||uo(e)||!Ii(e)||(xo(e)>1&&(e.set=e.add=e.clear=e.delete=q_),Object.freeze(e),t&&Os(e,function(n,r){return Cd(r,!0)},!0)),e}function q_(){Zn(2)}function _d(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function fr(e){var t=ib[e];return t||Zn(18,e),t}function Gh(){return Rs}function Lc(e,t){t&&(fr("Patches"),e.u=[],e.s=[],e.v=t)}function yl(e){ef(e),e.p.forEach(X_),e.p=null}function ef(e){e===Rs&&(Rs=e.l)}function Hh(e){return Rs={p:[],l:Rs,h:e,m:!0,_:0}}function X_(e){var t=e[Nn];t.i===0||t.i===1?t.j():t.O=!0}function jc(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||fr("ES5").S(t,e,r),r?(n[Nn].P&&(yl(t),Zn(4)),Ii(e)&&(e=gl(t,e),t.l||vl(t,e)),t.u&&fr("Patches").M(n[Nn].t,e,t.u,t.s)):e=gl(t,n,[]),yl(t),t.u&&t.v(t.u,t.s),e!==Uv?e:void 0}function gl(e,t,n){if(_d(t))return t;var r=t[Nn];if(!r)return Os(t,function(o,s){return Wh(e,r,t,o,s,n)},!0),t;if(r.A!==e)return t;if(!r.P)return vl(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Sd(r.k):r.o;Os(r.i===3?new Set(i):i,function(o,s){return Wh(e,r,i,o,s,n)}),vl(e,i,!1),n&&e.u&&fr("Patches").R(r,n,e.u,e.s)}return r.o}function Wh(e,t,n,r,i,o){if(uo(i)){var s=gl(e,i,o&&t&&t.i!==3&&!Zu(t.D,r)?o.concat(r):void 0);if(Fv(n,r,s),!uo(s))return;e.m=!1}if(Ii(i)&&!_d(i)){if(!e.h.F&&e._<1)return;gl(e,i),t&&t.A.l||vl(e,i)}}function vl(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Cd(t,n)}function Bc(e,t){var n=e[Nn];return(n?yi(n):e)[t]}function Kh(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function tf(e){e.P||(e.P=!0,e.l&&tf(e.l))}function Fc(e){e.o||(e.o=Sd(e.t))}function nf(e,t,n){var r=vd(t)?fr("MapSet").N(t,n):xd(t)?fr("MapSet").T(t,n):e.g?function(i,o){var s=Array.isArray(i),l={i:s?1:0,A:o?o.A:Gh(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},a=l,c=rf;s&&(a=[l],c=Wo);var f=Proxy.revocable(a,c),d=f.revoke,p=f.proxy;return l.k=p,l.j=d,p}(t,n):fr("ES5").J(t,n);return(n?n.A:Gh()).p.push(r),r}function Z_(e){return uo(e)||Zn(22,e),function t(n){if(!Ii(n))return n;var r,i=n[Nn],o=xo(n);if(i){if(!i.P&&(i.i<4||!fr("ES5").K(i)))return i.t;i.I=!0,r=Yh(n,o),i.I=!1}else r=Yh(n,o);return Os(r,function(s,l){i&&J_(i.t,s)===l||Fv(r,s,t(l))}),o===3?new Set(r):r}(e)}function Yh(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Sd(e)}var Jh,Rs,bd=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",eb=typeof Map<"u",tb=typeof Set<"u",Qh=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Uv=bd?Symbol.for("immer-nothing"):((Jh={})["immer-nothing"]=!0,Jh),qh=bd?Symbol.for("immer-draftable"):"__$immer_draftable",Nn=bd?Symbol.for("immer-state"):"__$immer_state",nb=""+Object.prototype.constructor,wd=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,rb=Object.getOwnPropertyDescriptors||function(e){var t={};return wd(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},ib={},rf={get:function(e,t){if(t===Nn)return e;var n=yi(e);if(!Zu(n,t))return function(i,o,s){var l,a=Kh(o,s);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ii(r)?r:r===Bc(e.t,t)?(Fc(e),e.o[t]=nf(e.A.h,r,e)):r},has:function(e,t){return t in yi(e)},ownKeys:function(e){return Reflect.ownKeys(yi(e))},set:function(e,t,n){var r=Kh(yi(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Bc(yi(e),t),o=i==null?void 0:i[Nn];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Q_(n,i)&&(n!==void 0||Zu(e.t,t)))return!0;Fc(e),tf(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Bc(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Fc(e),tf(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=yi(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Zn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Zn(12)}},Wo={};Os(rf,function(e,t){Wo[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Wo.deleteProperty=function(e,t){return Wo.set.call(this,e,t,void 0)},Wo.set=function(e,t,n){return rf.set.call(this,e[0],t,n,e[0])};var ob=function(){function e(n){var r=this;this.g=Qh,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var l=o;o=i;var a=r;return function(_){var I=this;_===void 0&&(_=l);for(var C=arguments.length,g=Array(C>1?C-1:0),w=1;w<C;w++)g[w-1]=arguments[w];return a.produce(_,function(P){var B;return(B=o).call.apply(B,[I,P].concat(g))})}}var c;if(typeof o!="function"&&Zn(6),s!==void 0&&typeof s!="function"&&Zn(7),Ii(i)){var f=Hh(r),d=nf(r,i,void 0),p=!0;try{c=o(d),p=!1}finally{p?yl(f):ef(f)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(_){return Lc(f,s),jc(_,f)},function(_){throw yl(f),_}):(Lc(f,s),jc(c,f))}if(!i||typeof i!="object"){if((c=o(i))===void 0&&(c=i),c===Uv&&(c=void 0),r.F&&Cd(c,!0),s){var S=[],x=[];fr("Patches").M(i,c,S,x),s(S,x)}return c}Zn(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(c){for(var f=arguments.length,d=Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return r.produceWithPatches(c,function(S){return i.apply(void 0,[S].concat(d))})};var s,l,a=r.produce(i,o,function(c,f){s=c,l=f});return typeof Promise<"u"&&a instanceof Promise?a.then(function(c){return[c,s,l]}):[a,s,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ii(n)||Zn(8),uo(n)&&(n=Z_(n));var r=Hh(this),i=nf(this,n,void 0);return i[Nn].C=!0,ef(r),i},t.finishDraft=function(n,r){var i=n&&n[Nn],o=i.A;return Lc(o,r),jc(void 0,o)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Qh&&Zn(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=fr("Patches").$;return uo(n)?s(n,r):this.produce(n,function(l){return s(l,r)})},e}(),Ln=new ob,sb=Ln.produce;Ln.produceWithPatches.bind(Ln);Ln.setAutoFreeze.bind(Ln);Ln.setUseProxies.bind(Ln);Ln.applyPatches.bind(Ln);Ln.createDraft.bind(Ln);Ln.finishDraft.bind(Ln);const ab=sb;class lb{constructor(t){const n=cb();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function cb(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let o=.02519603282416938*e;e=o>>>0,o-=e,o*=e,e=o>>>0,o-=e,e+=o*4294967296}return(e>>>0)*23283064365386963e-26}}function Xh(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function $v(e,t){const n=new lb(e),r=n.next.bind(n);return t&&Xh(t,n),r.state=()=>Xh(n,{}),r}class Zh{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=$v(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const o in n){const s=n[o];r[o]=l=>l===void 0?Math.floor(t()*s)+1:Array.from({length:l}).map(()=>Math.floor(t()*s)+1)}function i(o=6,s){return s===void 0?Math.floor(t()*o)+1:Array.from({length:s}).map(()=>Math.floor(t()*o)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:o=>{const s=[...o];let l=o.length,a=0;const c=Array.from({length:l});for(;l;){const f=Math.trunc(l*t());c[a++]=s[f],s[f]=s[--l]}return c},_private:this}}}const ub={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new Zh(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=Zh.seed()),{seed:t}},playerView:()=>{}};var fb=Function.prototype,db=fb.toString;db.call(Object);const Ms="MAKE_MOVE",Hl="GAME_EVENT",Wl="REDO",Ed="RESET",Pd="SYNC",Kl="UNDO",kd="UPDATE",Td="PATCH",zv="PLUGIN",Yl="STRIP_TRANSIENTS",Vv=(e,t,n,r)=>({type:Ms,payload:{type:e,args:t,playerID:n,credentials:r}}),os=(e,t,n,r)=>({type:Hl,payload:{type:e,args:t,playerID:n,credentials:r}}),Gv=(e,t,n,r)=>({type:Hl,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),Hv=e=>({type:Pd,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),Wv=(e,t,n,r)=>({type:Td,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),Kv=(e,t)=>({type:kd,state:e,deltalog:t,clientOnly:!0}),Yv=e=>({type:Ed,state:e,clientOnly:!0}),Jv=(e,t)=>({type:Kl,payload:{type:null,args:null,playerID:e,credentials:t}}),Qv=(e,t)=>({type:Wl,payload:{type:null,args:null,playerID:e,credentials:t}}),pb=(e,t,n,r)=>({type:zv,payload:{type:e,args:t,playerID:n,credentials:r}}),qv=()=>({type:Yl});var hb=Object.freeze({__proto__:null,makeMove:Vv,gameEvent:os,automaticGameEvent:Gv,sync:Hv,patch:Wv,update:Kv,reset:Yv,undo:Jv,redo:Qv,plugin:pb,stripTransients:qv});const of="INVALID_MOVE",mb={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=ab(t.G,o=>{const s=e({...t,G:o},...n);if(s===of){r=!0;return}return s});return r?of:i}};var nn;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(nn||(nn={}));var wr;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(wr||(wr={}));class yb{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},o)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:o+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const o=this.dispatch[i],s=o.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(o.error,wr.MaxTurnEndings);if(o.calledFrom===void 0)return r(o.error,wr.CalledOutsideHook);if(t.ctx.gameover)break e;switch(o.type){case"endStage":case"setStage":case"setActivePlayers":{switch(o.calledFrom){case nn.TURN_ON_END:case nn.PHASE_ON_END:return r(o.error,wr.StageEventInOnEnd);case nn.PHASE_ON_BEGIN:return r(o.error,wr.StageEventInPhaseBegin);case nn.TURN_ON_BEGIN:if(o.type==="setActivePlayers")break;return r(o.error,wr.StageEventInTurnBegin)}if(s)continue e;break}case"endTurn":{if(o.calledFrom===nn.TURN_ON_END||o.calledFrom===nn.PHASE_ON_END)return r(o.error,wr.EndTurnInOnEnd);if(s)continue e;break}case"endPhase":case"setPhase":{if(o.calledFrom===nn.PHASE_ON_END)return r(o.error,wr.PhaseEventInOnEnd);if(o.phase!==t.ctx.phase)continue e;break}}const a=Gv(o.type,o.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const Od={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const o=e(n,...r);return i&&i._private.unsetCurrentMethod(),o},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new yb(e.flow,t,n).api()},gb={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},vb={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},xb=(...e)=>console.error(...e);function Xe(e){xb("ERROR:",e)}const Rd=[mb,ub,gb,vb],zs=[...Rd,Od],Sb=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,o=e.plugins[i]||{data:{}},s=r.action(o.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...o,data:s}}}}),e),fo=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),Xv=(e,t,n)=>[...Rd,...n,Od].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),Cb=(e,t)=>([...zs,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),sf=(e,t)=>([...zs,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},o=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:o}}}}),e),_b=(e,t)=>([...Rd,...t.game.plugins,Od].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const o=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:o}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const o=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:o}}}}}),e),bb=(e,t)=>[...zs,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),wb=(e,t)=>[...zs,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,o=e.plugins[i],s=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:o&&o.data});return s?{plugin:i,message:s}:!1}).find(r=>r)||!1,Zv=(e,t)=>{const n=_b(e,t),r=wb(n,t);if(!r)return[n];const{plugin:i,message:o}=r;return Xe(`${i} plugin declared action invalid:
${o}`),[e,r]},e0=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...zs,...r.plugins].forEach(({name:o,playerView:s})=>{if(!s)return;const{data:l}=n[o]||{data:{}},a=s({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[o]:{data:a}}}),n);function xl(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function Sl(e,t){let n={},r=[],i=null,o={},s={};if(Array.isArray(t)){const a={};t.forEach(c=>a[c]=Cl.NULL),n=a}else{if(xl(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&fa(n,o,s,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const c=e.playOrder[a];c!==e.currentPlayer&&fa(n,o,s,c,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const c=e.playOrder[a];fa(n,o,s,c,t.all)}if(t.value)for(const a in t.value)fa(n,o,s,a,t.value[a]);if(t.minMoves)for(const a in n)o[a]===void 0&&(o[a]=t.minMoves);if(t.maxMoves)for(const a in n)s[a]===void 0&&(s[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(o).length===0&&(o=null),Object.keys(s).length===0&&(s=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:o,_activePlayersMaxMoves:s,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function Eb(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:o,_nextActivePlayers:s}=e;if(t&&Object.keys(t).length===0)if(s)e=Sl(e,s),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:o}=e;else if(o.length>0){const l=o.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=o[l]),o=o.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:o}}function fa(e,t,n,r,i){(typeof i!="object"||i===Cl.NULL)&&(i={stage:i}),i.stage!==void 0&&(xl(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function af(e,t){return e[t]+""}function Pb(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,s={...fo(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((p,S)=>S+"");l.playOrder!==void 0&&(a=l.playOrder(s));const c=l.first(s),f=typeof c;f!=="number"&&Xe(`invalid value returned by turn.order.first  expected number got ${f} ${c}.`);const d=af(a,c);return r={...r,currentPlayer:d,playOrderPos:c,playOrder:a},r=Sl(r,t.activePlayers||{}),r}function kb(e,t,n,r){const i=n.order;let{G:o,ctx:s}=e,l=s.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&Xe(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(c=>{switch(c){case"remove":t=af(s.playOrder,l);break;case"next":l=s.playOrder.indexOf(r.next),t=r.next;break;default:Xe(`invalid argument to endTurn: ${c}`)}});else{const f={...fo(e),G:o,ctx:s},d=i.next(f),p=typeof d;d!==void 0&&p!=="number"&&Xe(`invalid value returned by turn.order.next  expected number or undefined got ${p} ${d}.`),d===void 0?a=!0:(l=d,t=af(s.playOrder,l))}return s={...s,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:s}}const Tb={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},RESET:{first:()=>0,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},CONTINUE:{first:({ctx:e})=>e.playOrderPos,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length},ONCE:{first:()=>0,next:({ctx:e})=>{if(e.playOrderPos<e.playOrder.length-1)return e.playOrderPos+1}},CUSTOM:e=>({playOrder:()=>e,first:()=>0,next:({ctx:t})=>(t.playOrderPos+1)%t.playOrder.length}),CUSTOM_FROM:e=>({playOrder:({G:t})=>t[e],first:()=>0,next:({ctx:t})=>(t.playOrderPos+1)%t.playOrder.length})},Cl={NULL:null};var Pi={},Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Pointer=void 0;function Ob(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Rb(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Mb=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(Ob);if(n[0]!=="")throw new Error("Invalid JSON Pointer: "+t);return new e(n)},e.prototype.toString=function(){return this.tokens.map(Rb).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,o=1,s=this.tokens.length;o<s;o++)n=i,r=this.tokens[o],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){for(var r=t,i=1,o=this.tokens.length-1,s=this.tokens[i];i<o;i++)r=(r||{})[s];r&&(r[this.tokens[this.tokens.length-1]]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Vs.Pointer=Mb;var St={},Md={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var o=i.length,s=new Array(o),l=0;l<o;l++)s[l]=r(i[l]);return s}if(i.constructor==Date){var a=new Date(+i);return a}var c={};for(var f in i)e.hasOwnProperty.call(i,f)&&(c[f]=r(i[f]));return c}e.clone=r})(Md);var hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.diffAny=hn.diffObjects=hn.diffArrays=hn.intersection=hn.subtract=hn.isDestructive=void 0;var Ds=Md;function Db(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}hn.isDestructive=Db;function lf(e,t){var n={};for(var r in e)Ds.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)Ds.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}hn.subtract=lf;function t0(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var o in i)Ds.hasOwnProperty.call(i,o)&&i[o]!==void 0&&(n[o]=(n[o]||0)+1)}for(var o in n)n[o]<t&&delete n[o];return Object.keys(n)}hn.intersection=t0;function Ib(e){return e.op==="add"}function Ab(e){return e.op==="remove"}function Uc(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function n0(e,t,n,r){r===void 0&&(r=Jl);var i={"0,0":{operations:[],cost:0}};function o(f,d){var p=f+","+d,S=i[p];if(S===void 0){if(f>0&&d>0&&!r(e[f-1],t[d-1],n.add(String(f-1))).length)S=o(f-1,d-1);else{var x=[];if(f>0){var _=o(f-1,d),I={op:"remove",index:f-1};x.push(Uc(_,I))}if(d>0){var C=o(f,d-1),g={op:"add",index:f-1,value:t[d-1]};x.push(Uc(C,g))}if(f>0&&d>0){var w=o(f-1,d-1),P={op:"replace",index:f-1,original:e[f-1],value:t[d-1]};x.push(Uc(w,P))}var B=x.sort(function(K,J){return K.cost-J.cost})[0];S=B}i[p]=S}return S}var s=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=o(s,l).operations,c=a.reduce(function(f,d){var p=f[0],S=f[1];if(Ib(d)){var x=d.index+1+S,_=x<s+S?String(x):"-",I={op:d.op,path:n.add(_).toString(),value:d.value};return[p.concat(I),S+1]}else if(Ab(d)){var I={op:d.op,path:n.add(String(d.index+S)).toString()};return[p.concat(I),S-1]}else{var C=n.add(String(d.index+S)),g=r(d.original,d.value,C);return[p.concat.apply(p,g),S]}},[[],0])[0];return c}hn.diffArrays=n0;function r0(e,t,n,r){r===void 0&&(r=Jl);var i=[];return lf(e,t).forEach(function(o){i.push({op:"remove",path:n.add(o).toString()})}),lf(t,e).forEach(function(o){i.push({op:"add",path:n.add(o).toString(),value:t[o]})}),t0([e,t]).forEach(function(o){i.push.apply(i,r(e[o],t[o],n.add(o)))}),i}hn.diffObjects=r0;function Jl(e,t,n,r){if(r===void 0&&(r=Jl),e===t)return[];var i=Ds.objectType(e),o=Ds.objectType(t);return i=="array"&&o=="array"?n0(e,t,n,r):i=="object"&&o=="object"?r0(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}hn.diffAny=Jl;var Dd=zn&&zn.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(St,"__esModule",{value:!0});St.apply=St.InvalidOperationError=St.test=St.copy=St.move=St.replace=St.remove=St.add=St.TestError=St.MissingError=void 0;var Lr=Vs,i0=Md,Nb=hn,dr=function(e){Dd(t,e);function t(n){var r=e.call(this,"Value required at path: "+n)||this;return r.path=n,r.name="MissingError",r}return t}(Error);St.MissingError=dr;var o0=function(e){Dd(t,e);function t(n,r){var i=e.call(this,"Test failed: "+n+" != "+r)||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);St.TestError=o0;function Id(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function s0(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function a0(e,t){var n=Lr.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new dr(t.path):(Id(n.parent,n.key,i0.clone(t.value)),null)}St.add=a0;function l0(e,t){var n=Lr.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new dr(t.path):(s0(n.parent,n.key),null)}St.remove=l0;function c0(e,t){var n=Lr.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new dr(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new dr(t.path)}else if(n.value===void 0)return new dr(t.path);return n.parent[n.key]=t.value,null}St.replace=c0;function u0(e,t){var n=Lr.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new dr(t.from);var r=Lr.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new dr(t.path):(s0(n.parent,n.key),Id(r.parent,r.key,n.value),null)}St.move=u0;function f0(e,t){var n=Lr.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new dr(t.from);var r=Lr.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new dr(t.path):(Id(r.parent,r.key,i0.clone(n.value)),null)}St.copy=f0;function d0(e,t){var n=Lr.Pointer.fromJSON(t.path).evaluate(e);return Nb.diffAny(n.value,t.value,new Lr.Pointer).length?new o0(n.value,t.value):null}St.test=d0;var p0=function(e){Dd(t,e);function t(n){var r=e.call(this,"Invalid operation: "+n.op)||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);St.InvalidOperationError=p0;function Lb(e,t){switch(t.op){case"add":return a0(e,t);case"remove":return l0(e,t);case"replace":return c0(e,t);case"move":return u0(e,t);case"copy":return f0(e,t);case"test":return d0(e,t)}return new p0(t)}St.apply=Lb;Object.defineProperty(Pi,"__esModule",{value:!0});Pi.createTests=y0=Pi.createPatch=m0=Pi.applyPatch=void 0;var h0=Vs,jb=St,Ad=hn;function Bb(e,t){return t.map(function(n){return jb.apply(e,n)})}var m0=Pi.applyPatch=Bb;function Fb(e){function t(n,r,i){var o=e(n,r,i);return Array.isArray(o)?o:Ad.diffAny(n,r,i,t)}return t}function Ub(e,t,n){var r=new h0.Pointer;return(n?Fb(n):Ad.diffAny)(e,t,r)}var y0=Pi.createPatch=Ub;function em(e,t){var n=h0.Pointer.fromJSON(t).evaluate(e);if(n!==void 0)return{op:"test",path:t,value:n.value}}function $b(e,t){var n=new Array;return t.filter(Ad.isDestructive).forEach(function(r){var i=em(e,r.path);if(i&&n.push(i),"from"in r){var o=em(e,r.from);o&&n.push(o)}}),n}Pi.createTests=$b;function zb({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:o,plugins:s}){e===void 0&&(e={}),o===void 0&&(o={}),s===void 0&&(s=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:E})=>E),i||(i={});const l={...t};""in l&&Xe("cannot specify phase with empty name"),l[""]={};const a={},c=new Set;let f=null;Object.keys(e).forEach(E=>c.add(E));const d=(E,O)=>{const F=Xv(E,O,s);return xe=>{const me=fo(xe);return F({...me,G:xe.G,ctx:xe.ctx,playerID:xe.playerID})}},p=E=>O=>{const F=fo(O);return E({...F,G:O.G,ctx:O.ctx})},S={onEnd:d(r,nn.GAME_ON_END),endIf:p(n)};for(const E in l){const O=l[E];if(O.start===!0&&(f=E),O.moves!==void 0)for(const F of Object.keys(O.moves))a[E+"."+F]=O.moves[F],c.add(F);O.endIf===void 0&&(O.endIf=()=>{}),O.onBegin===void 0&&(O.onBegin=({G:F})=>F),O.onEnd===void 0&&(O.onEnd=({G:F})=>F),O.turn===void 0&&(O.turn=i),O.turn.order===void 0&&(O.turn.order=Tb.DEFAULT),O.turn.onBegin===void 0&&(O.turn.onBegin=({G:F})=>F),O.turn.onEnd===void 0&&(O.turn.onEnd=({G:F})=>F),O.turn.endIf===void 0&&(O.turn.endIf=()=>!1),O.turn.onMove===void 0&&(O.turn.onMove=({G:F})=>F),O.turn.stages===void 0&&(O.turn.stages={}),xl(O.turn,!0);for(const F in O.turn.stages){const me=O.turn.stages[F].moves||{};for(const pe of Object.keys(me)){const ot=E+"."+F+"."+pe;a[ot]=me[pe],c.add(pe)}}if(O.wrapped={onBegin:d(O.onBegin,nn.PHASE_ON_BEGIN),onEnd:d(O.onEnd,nn.PHASE_ON_END),endIf:p(O.endIf)},O.turn.wrapped={onMove:d(O.turn.onMove,nn.TURN_ON_MOVE),onBegin:d(O.turn.onBegin,nn.TURN_ON_BEGIN),onEnd:d(O.turn.onEnd,nn.TURN_ON_END),endIf:p(O.turn.endIf)},typeof O.next!="function"){const{next:F}=O;O.next=()=>F||null}O.wrapped.next=p(O.next)}function x(E){return E.phase?l[E.phase]:l[""]}function _(E){return E}function I(E,O){const F=new Set,xe=new Set;for(let me=0;me<O.length;me++){const{fn:pe,arg:ot,...et}=O[me];if(pe===lt){xe.clear();const z=E.ctx.phase;if(F.has(z)){const ae={...E.ctx,phase:null};return{...E,ctx:ae}}F.add(z)}const jt=[];if(E=pe(E,{...et,arg:ot,next:jt}),pe===at)break;const D=Q(E);if(D){O.push({fn:at,arg:D,turn:E.ctx.turn,phase:E.ctx.phase,automatic:!0});continue}const A=Fe(E);if(A){O.push({fn:lt,arg:A,turn:E.ctx.turn,phase:E.ctx.phase,automatic:!0});continue}if([_,K,J].includes(pe)){const z=Y(E);if(z){O.push({fn:Rt,arg:z,turn:E.ctx.turn,phase:E.ctx.phase,automatic:!0});continue}}O.push(...jt)}return E}function C(E,{next:O}){return O.push({fn:g}),E}function g(E,{next:O}){let{G:F,ctx:xe}=E;return F=x(xe).wrapped.onBegin(E),O.push({fn:w}),{...E,G:F,ctx:xe}}function w(E,{currentPlayer:O}){let{ctx:F}=E;const xe=x(F);O?(F={...F,currentPlayer:O},xe.turn.activePlayers&&(F=Sl(F,xe.turn.activePlayers))):F=Pb(E,xe.turn);const me=F.turn+1;F={...F,turn:me,numMoves:0,_prevActivePlayers:[]};const pe=xe.turn.wrapped.onBegin({...E,ctx:F});return{...E,G:pe,ctx:F,_undo:[],_redo:[]}}function P(E,{arg:O,next:F,phase:xe}){const me=x({phase:xe});let{ctx:pe}=E;if(O&&O.next)if(O.next in l)pe={...pe,phase:O.next};else return Xe("invalid phase: "+O.next),E;else pe={...pe,phase:me.wrapped.next(E)||null};return E={...E,ctx:pe},F.push({fn:g}),E}function B(E,{arg:O,currentPlayer:F,next:xe}){let{G:me,ctx:pe}=E;const ot=x(pe),{endPhase:et,ctx:jt}=kb(E,F,ot.turn,O);return pe=jt,E={...E,G:me,ctx:pe},et?xe.push({fn:lt,turn:pe.turn,phase:pe.phase}):xe.push({fn:w,currentPlayer:pe.currentPlayer}),E}function K(E,{arg:O,playerID:F}){if((typeof O=="string"||O===Cl.NULL)&&(O={stage:O}),typeof O!="object")return E;xl(O);let{ctx:xe}=E,{activePlayers:me,_activePlayersMinMoves:pe,_activePlayersMaxMoves:ot,_activePlayersNumMoves:et}=xe;return O.stage!==void 0&&(me===null&&(me={}),me[F]=O.stage,et[F]=0,O.minMoves&&(pe===null&&(pe={}),pe[F]=O.minMoves),O.maxMoves&&(ot===null&&(ot={}),ot[F]=O.maxMoves)),xe={...xe,activePlayers:me,_activePlayersMinMoves:pe,_activePlayersMaxMoves:ot,_activePlayersNumMoves:et},{...E,ctx:xe}}function J(E,{arg:O}){return{...E,ctx:Sl(E.ctx,O)}}function Q(E){return S.endIf(E)}function Fe(E){return x(E.ctx).wrapped.endIf(E)}function Y(E){const O=x(E.ctx),F=E.ctx.numMoves||0;return O.turn.maxMoves&&F>=O.turn.maxMoves?!0:O.turn.wrapped.endIf(E)}function at(E,{arg:O,phase:F}){E=lt(E,{phase:F}),O===void 0&&(O=!0),E={...E,ctx:{...E.ctx,gameover:O}};const xe=S.onEnd(E);return{...E,G:xe}}function lt(E,{arg:O,next:F,turn:xe,automatic:me}){E=Rt(E,{turn:xe,force:!0,automatic:!0});const{phase:pe,turn:ot}=E.ctx;if(F&&F.push({fn:P,arg:O,phase:pe}),pe===null)return E;const jt=x(E.ctx).wrapped.onEnd(E),D={...E.ctx,phase:null},A=os("endPhase",O),{_stateID:z}=E,ae={action:A,_stateID:z,turn:ot,phase:pe};me&&(ae.automatic=!0);const q=[...E.deltalog||[],ae];return{...E,G:jt,ctx:D,deltalog:q}}function Rt(E,{arg:O,next:F,turn:xe,force:me,automatic:pe,playerID:ot}){if(xe!==E.ctx.turn)return E;const{currentPlayer:et,numMoves:jt,phase:D,turn:A}=E.ctx,z=x(E.ctx),ae=jt||0;if(!me&&z.turn.minMoves&&ae<z.turn.minMoves)return`${z.turn.minMoves}`,E;const q=z.turn.wrapped.onEnd(E);F&&F.push({fn:B,arg:O,currentPlayer:et});let ye={...E.ctx,activePlayers:null};if(O&&O.remove){ot=ot||et;const Te=ye.playOrder.filter(cn=>cn!=ot),tt=ye.playOrderPos>Te.length-1?0:ye.playOrderPos;if(ye={...ye,playOrder:Te,playOrderPos:tt},Te.length===0)return F.push({fn:lt,turn:A,phase:D}),E}const _e=os("endTurn",O),{_stateID:Ne}=E,ge={action:_e,_stateID:Ne,turn:A,phase:D};pe&&(ge.automatic=!0);const ct=[...E.deltalog||[],ge];return{...E,G:q,ctx:ye,deltalog:ct,_undo:[],_redo:[]}}function $e(E,{arg:O,next:F,automatic:xe,playerID:me}){me=me||E.ctx.currentPlayer;let{ctx:pe,_stateID:ot}=E,{activePlayers:et,_activePlayersNumMoves:jt,_activePlayersMinMoves:D,_activePlayersMaxMoves:A,phase:z,turn:ae}=pe;const q=et!==null&&me in et,ye=x(pe);if(!O&&q){const Te=ye.turn.stages[et[me]];Te&&Te.next&&(O=Te.next)}if(F&&F.push({fn:K,arg:O,playerID:me}),!q)return E;const _e=jt[me]||0;if(D&&D[me]&&_e<D[me])return`${D[me]}`,E;et={...et},delete et[me],D&&(D={...D},delete D[me]),A&&(A={...A},delete A[me]),pe=Eb({...pe,activePlayers:et,_activePlayersMinMoves:D,_activePlayersMaxMoves:A});const ge={action:os("endStage",O),_stateID:ot,turn:ae,phase:z};xe&&(ge.automatic=!0);const ct=[...E.deltalog||[],ge];return{...E,ctx:pe,deltalog:ct}}function Lt(E,O,F){const xe=x(E),me=xe.turn.stages,{activePlayers:pe}=E;if(pe&&pe[F]!==void 0&&pe[F]!==Cl.NULL&&me[pe[F]]!==void 0&&me[pe[F]].moves!==void 0){const et=me[pe[F]].moves;if(O in et)return et[O]}else if(xe.moves){if(O in xe.moves)return xe.moves[O]}else if(O in e)return e[O];return null}function _t(E,O){const{playerID:F,type:xe}=O,{currentPlayer:me,activePlayers:pe,_activePlayersMaxMoves:ot}=E.ctx,et=Lt(E.ctx,xe,F),jt=!et||typeof et=="function"||et.noLimit!==!0;let{numMoves:D,_activePlayersNumMoves:A}=E.ctx;jt&&(F===me&&D++,pe&&A[F]++),E={...E,ctx:{...E.ctx,numMoves:D,_activePlayersNumMoves:A}},ot&&A[F]>=ot[F]&&(E=$e(E,{playerID:F,automatic:!0}));const ae=x(E.ctx).turn.wrapped.onMove({...E,playerID:F});return E={...E,G:ae},I(E,[{fn:_}])}function Ut(E,O,F){return I(E,[{fn:$e,arg:F,playerID:O}])}function H(E,O){return I(E,[{fn:$e,playerID:O}])}function de(E,O,F){return I(E,[{fn:J,arg:F}])}function Ce(E,O,F){return I(E,[{fn:lt,phase:E.ctx.phase,turn:E.ctx.turn,arg:{next:F}}])}function He(E){return I(E,[{fn:lt,phase:E.ctx.phase,turn:E.ctx.turn}])}function Ze(E,O,F){return I(E,[{fn:Rt,turn:E.ctx.turn,phase:E.ctx.phase,arg:F}])}function pt(E,O,F){return I(E,[{fn:Rt,turn:E.ctx.turn,phase:E.ctx.phase,force:!0,arg:F}])}function qe(E,O,F){return I(E,[{fn:at,turn:E.ctx.turn,phase:E.ctx.phase,arg:F}])}const he={endStage:H,setStage:Ut,endTurn:Ze,pass:pt,endPhase:He,setPhase:Ce,endGame:qe,setActivePlayers:de},Ae=[];o.endTurn!==!1&&Ae.push("endTurn"),o.pass!==!1&&Ae.push("pass"),o.endPhase!==!1&&Ae.push("endPhase"),o.setPhase!==!1&&Ae.push("setPhase"),o.endGame!==!1&&Ae.push("endGame"),o.setActivePlayers!==!1&&Ae.push("setActivePlayers"),o.endStage!==!1&&Ae.push("endStage"),o.setStage!==!1&&Ae.push("setStage");function ln(E,O){const{type:F,playerID:xe,args:me}=O.payload;return typeof he[F]!="function"?E:he[F](E,xe,...Array.isArray(me)?me:[me])}function rr(E,O,F){return O.activePlayers?F in O.activePlayers:O.currentPlayer===F}return{ctx:E=>({numPlayers:E,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:E})].map((O,F)=>F+""),playOrderPos:0,phase:f,activePlayers:null}),init:E=>I(E,[{fn:C}]),isPlayerActive:rr,eventHandlers:he,eventNames:Object.keys(he),enabledEventNames:Ae,moveMap:a,moveNames:[...c.values()],processMove:_t,processEvent:ln,getMove:Lt}}function Vb(e){return e.processMove!==void 0}function Gs(e){if(Vb(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=zb(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(g0(i)&&(i=i.move),i instanceof Function){const o=Xv(i,nn.MOVE,e.plugins);let s=[];r.args!==void 0&&(s=Array.isArray(r.args)?r.args:[r.args]);const l={...fo(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return o(l,...s)}return Xe(`invalid move object: ${r.type}`),n.G}}}function g0(e){return e instanceof Object&&e.move!==void 0}var cf;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(cf||(cf={}));var tn;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(tn||(tn={}));const da=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,Gb=(e,t,n)=>{function r(o){return o.undoable!==void 0}function i(o){return o instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function tm(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function $c(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function zc(e,t,n){const[r,i]=Zv(e,n);return i?[r,dn(t,tn.PluginActionInvalid,i)]:[r]}function v0(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function dn(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const x0=e=>t=>n=>{const r=t(n);switch(n.type){case Yl:return r;default:{const[,i]=v0(e.getState());return typeof i<"u"?(e.dispatch(qv()),{...r,transients:i}):r}}};function Ql({game:e,isClient:t}){return e=Gs(e),(n=null,r)=>{let[i]=v0(n);switch(r.type){case Yl:return i;case Hl:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return Xe("cannot call event after game end"),dn(i,tn.GameOver);if(da(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return Xe(`disallowed event: ${r.payload.type}`),dn(i,tn.InactivePlayer);i=sf(i,{game:e,isClient:!1,playerID:r.payload.playerID});let o=e.flow.processEvent(i,r),s;return[o,s]=zc(o,i,{game:e,isClient:!1}),s||(o=tm(o,{game:e,action:r}),{...o,_stateID:i._stateID+1})}case Ms:{const o=i={...i,deltalog:[]},s=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(s===null)return Xe(`disallowed move: ${r.payload.type}`),dn(i,tn.UnavailableMove);if(t&&s.client===!1)return i;if(i.ctx.gameover!==void 0)return Xe("cannot make move after game end"),dn(i,tn.GameOver);if(da(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return Xe(`disallowed move: ${r.payload.type}`),dn(i,tn.InactivePlayer);i=sf(i,{game:e,isClient:t,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===of)return Xe(`invalid move: ${r.payload.type} args: ${r.payload.args}`),dn(i,tn.InvalidMove);const a={...i,G:l};if(t&&bb(a,{game:e}))return i;if(i=a,t){let f;return[i,f]=zc(i,o,{game:e,isClient:!0}),f||{...i,_stateID:i._stateID+1}}i=$c(i,r,s),i=e.flow.processMove(i,r.payload);let c;return[i,c]=zc(i,o,{game:e}),c||(i=tm(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case Ed:case kd:case Pd:return r.state;case Kl:{if(i={...i,deltalog:[]},e.disableUndo)return Xe("Undo is not enabled"),dn(i,tn.ActionDisabled);const{G:o,ctx:s,_undo:l,_redo:a,_stateID:c}=i;if(l.length<2)return Xe("No moves to undo"),dn(i,tn.ActionInvalid);const f=l[l.length-1],d=l[l.length-2];if(da(r)&&r.payload.playerID!==f.playerID)return Xe("Cannot undo other players' moves"),dn(i,tn.ActionInvalid);if(f.moveType){const p=e.flow.getMove(d.ctx,f.moveType,f.playerID);if(!Gb(o,s,p))return Xe("Move cannot be undone"),dn(i,tn.ActionInvalid)}return i=$c(i,r),{...i,G:d.G,ctx:d.ctx,plugins:d.plugins,_stateID:c+1,_undo:l.slice(0,-1),_redo:[f,...a]}}case Wl:{if(i={...i,deltalog:[]},e.disableUndo)return Xe("Redo is not enabled"),dn(i,tn.ActionDisabled);const{_undo:o,_redo:s,_stateID:l}=i;if(s.length===0)return Xe("No moves to redo"),dn(i,tn.ActionInvalid);const a=s[0];return da(r)&&r.payload.playerID!==a.playerID?(Xe("Cannot redo other players' moves"),dn(i,tn.ActionInvalid)):(i=$c(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...o,a],_redo:s.slice(1)})}case zv:return Sb(i,r,{game:e});case Td:{const o=i,s=JSON.parse(JSON.stringify(o)),l=m0(s,r.patch);return l.some(c=>c!==null)?(Xe(`Patch ${JSON.stringify(r.patch)} apply failed`),dn(o,cf.PatchFailed,l)):s}default:return i}}}function Nd({game:e,numPlayers:t,setupData:n}){e=Gs(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=Cb(i,{game:e}),i=sf(i,{game:e,playerID:void 0});const o=fo(i);i.G=e.setup({...o,ctx:i.ctx},n);let s={...i,_undo:[],_redo:[],_stateID:0};return s=e.flow.init(s),[s]=Zv(s,{game:e}),e.disableUndo||(s._undo=[{G:s.G,ctx:s.ctx,plugins:s.plugins}]),s}let ql=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:o,numPlayers:s}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=o,this.numPlayers=s||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};var Is;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Is||(Is={}));function fi(e){return e.type()===Is.SYNC}class Hb{type(){return Is.ASYNC}async createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}async listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}class S0{type(){return Is.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const Wb=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!!t,players:{},createdAt:Date.now(),updatedAt:Date.now()};n!==void 0&&(i.setupData=n);for(let o=0;o<r;o++)i.players[o]={id:o};return i},C0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const o=Wb({game:e,numPlayers:t,setupData:n,unlisted:r}),s=Nd({game:e,numPlayers:t,setupData:n});return{metadata:o,initialState:s}},pa=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:e0(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),_0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,o,s]=n.args,l=Vc(s.deltalog,t),a=pa(e,t,s),c=s._stateID,f=pa(e,t,o),d=y0(f,a);return{type:"patch",args:[r,i,c,d,l]}}case"update":{const[r,i]=n.args,o=Vc(i.deltalog,t),s=pa(e,t,i);return{type:"update",args:[r,s,o]}}case"sync":{const[r,i]=n.args,o=pa(e,t,i.state),s=Vc(i.log,t),l={...i,state:o,log:s};return{type:"sync",args:[r,l]}}default:return n}};function Vc(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:o,...s}=i;return s})}const Kb=Object.freeze(Object.defineProperty({__proto__:null,CreateGameReducer:Ql,ProcessGameConfig:Gs,InitializeGame:Nd,Transport:ql,Async:Hb,Sync:S0,createMatch:C0,getFilterPlayerView:_0},Symbol.toStringTag,{value:"Module"})),Ld=_l(Kb);var Xl={};function As(e){return As=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(e)}function Yb(e,t){if(As(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(As(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jb(e){var t=Yb(e,"string");return As(t)==="symbol"?t:String(t)}function Qb(e,t,n){return t=Jb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nm(Object(n),!0).forEach(function(r){Qb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function On(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var im=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Gc=function(){return Math.random().toString(36).substring(7).split("").join(".")},om={INIT:"@@redux/INIT"+Gc(),REPLACE:"@@redux/REPLACE"+Gc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Gc()}};function qb(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function jd(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(On(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(On(1));return n(jd)(e,t)}if(typeof e!="function")throw new Error(On(2));var i=e,o=t,s=[],l=s,a=!1;function c(){l===s&&(l=s.slice())}function f(){if(a)throw new Error(On(3));return o}function d(_){if(typeof _!="function")throw new Error(On(4));if(a)throw new Error(On(5));var I=!0;return c(),l.push(_),function(){if(I){if(a)throw new Error(On(6));I=!1,c();var g=l.indexOf(_);l.splice(g,1),s=null}}}function p(_){if(!qb(_))throw new Error(On(7));if(typeof _.type>"u")throw new Error(On(8));if(a)throw new Error(On(9));try{a=!0,o=i(o,_)}finally{a=!1}for(var I=s=l,C=0;C<I.length;C++){var g=I[C];g()}return _}function S(_){if(typeof _!="function")throw new Error(On(10));i=_,p({type:om.REPLACE})}function x(){var _,I=d;return _={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(On(11));function w(){g.next&&g.next(f())}w();var P=I(w);return{unsubscribe:P}}},_[im]=function(){return this},_}return p({type:om.INIT}),r={dispatch:p,subscribe:d,getState:f,replaceReducer:S},r[im]=x,r}function b0(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function w0(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(On(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=t.map(function(a){return a(s)});return o=b0.apply(void 0,l)(i.dispatch),rm(rm({},i),{},{dispatch:o})}}}const sm=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),Xb=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class E0{constructor(t,n,r,i){this.game=Gs(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let o;if(fi(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:o}))return{error:"unauthorized action"};const s=Xb(t),l=r;let a;if(fi(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return Xe(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){Xe(`game over - matchID=[${l}] - playerID=[${i}] - action[${s.payload.type}]`);return}const c=Ql({game:this.game}),f=w0(x0),d=jd(c,a,f);if(s.type==Kl||s.type==Wl){const C=a.ctx.activePlayers!==null,g=a.ctx.currentPlayer===i;if(!C&&!g||C&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){Xe(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){Xe(`player not active - playerID=[${i}] - action[${s.payload.type}]`);return}const p=s.type==Ms?this.game.flow.getMove(a.ctx,s.payload.type,i):null;if(s.type==Ms&&!p){Xe(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${s.payload.type}]`);return}if(a._stateID!==n&&!(p&&g0(p)&&p.ignoreStaleStateID)){Xe(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${s.payload.type}]`);return}const S=d.getState();d.dispatch(s),a=d.getState(),this.subscribeCallback({state:a,action:s,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,S,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:x,..._}=a;let I;if(o&&(o.gameover===void 0||o.gameover===null)&&(I={...o,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(I.gameover=a.ctx.gameover)),fi(this.storageAPI))this.storageAPI.setState(l,_,x),I&&this.storageAPI.setMetadata(l,I);else{const C=[this.storageAPI.setState(l,_,x)];I&&C.push(this.storageAPI.setMetadata(l,I)),await Promise.all(C)}}async onSync(t,n,r,i=2){const o=t,s={state:!0,metadata:!0,log:!0,initialState:!0},l=fi(this.storageAPI)?this.storageAPI.fetch(o,s):await this.storageAPI.fetch(o,s);let{state:a,initialState:c,log:f,metadata:d}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:d}))return{error:"unauthorized"};if(a===void 0){const x=C0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in x)return{error:"game requires setupData"};c=a=x.initialState,d=x.metadata,this.subscribeCallback({state:a,matchID:t}),fi(this.storageAPI)?this.storageAPI.createMatch(o,{initialState:c,metadata:d}):await this.storageAPI.createMatch(o,{initialState:c,metadata:d})}const p=d?sm(d):void 0,S={state:a,log:f,filteredMetadata:p,initialState:c};this.transportAPI.send({playerID:n,type:"sync",args:[t,S]})}async onConnectionChange(t,n,r,i){const o=t;if(n==null)return;let s;if(fi(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(o,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(o,{metadata:!0}),s===void 0)return Xe(`metadata not found for matchID=[${o}]`),{error:"metadata not found"};if(s.players[n]===void 0)return Xe(`Player not in the match, matchID=[${o}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:s}))return{error:"unauthorized"};s.players[n].isConnected=i;const l=sm(s);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),fi(this.storageAPI)?this.storageAPI.setMetadata(o,s):await this.storageAPI.setMetadata(o,s)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:o}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:o}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const Zb=Object.freeze(Object.defineProperty({__proto__:null,Master:E0},Symbol.toStringTag,{value:"Module"})),ew=_l(Zb);var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.P2PDB=void 0;const tw=Ld;class nw extends tw.Sync{constructor(){super(...arguments),this.initialState=new Map,this.state=new Map,this.log=new Map,this.metadata=new Map}connect(){}createMatch(t,n){this.initialState.set(t,n.initialState),this.state.set(t,n.initialState),this.log.set(t,[]),this.metadata.set(t,n.metadata)}setState(t,n,r){this.state.set(t,n),r&&this.log.set(t,[...this.log.get(t)||[],...r])}setMetadata(t,n){this.metadata.set(t,n)}fetch(t){return{initialState:this.initialState.get(t),state:this.state.get(t),log:this.log.get(t),metadata:this.metadata.get(t)}}getStateFromLocalStore(t){window.localStorage.getItem()}wipe(t){this.initialState.delete(t),this.state.delete(t),this.log.delete(t),this.metadata.delete(t)}listMatches(){return[...this.metadata.keys()]}}Zl.P2PDB=nw;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.authenticate=pr.signMessage=pr.generateCredentials=void 0;const Bd=hl,ki=ml;function rw(){return(0,ki.encodeBase64)((0,Bd.randomBytes)(64))}pr.generateCredentials=rw;function iw(e,t,n){try{const r=Bd.sign.open((0,ki.decodeBase64)(e),(0,ki.decodeBase64)(t));return r!==null&&(0,ki.encodeUTF8)(r)===n}catch{return!1}}function ow(e,t){return(0,ki.encodeBase64)((0,Bd.sign)((0,ki.decodeUTF8)(e),(0,ki.decodeBase64)(t)))}pr.signMessage=ow;function sw(e,t,n){const{playerID:r,credentials:i,message:o}=t,{metadata:s}=n.fetch(e);if(r==null||!(+r in s.players))return!0;const l=s.players[+r].credentials,a=i?!!o&&iw(o,i,r):!1;return!l&&a?(n.setMetadata(e,Object.assign(Object.assign({},s),{players:Object.assign(Object.assign({},s.players),{[+r]:Object.assign(Object.assign({},s.players[+r]),{credentials:i})})})),!0):!!(!l&&!i||l&&l===i&&a)}pr.authenticate=sw;var aw=zn&&zn.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.P2PHost=void 0;const am=Ld,lw=ew,cw=Zl,uw=pr;class fw{constructor({game:t,numPlayers:n=2,matchID:r}){this.clients=new Map,this.matchID=r,(!t.name||t.name==="default")&&console.error('Using "default" as your game name.\nPlease set the `name` property of your game definition to a unique string to help avoid peer ID conflicts.');const i=(0,am.createMatch)({game:t,numPlayers:n,unlisted:!1,setupData:void 0});if("setupDataError"in i)throw new Error("setupData Error: "+i.setupDataError);this.db=new cw.P2PDB,this.db.createMatch(this.matchID,i);const o=(0,am.getFilterPlayerView)(t);this.master=new lw.Master(t,this.db,{send:s=>{var{playerID:l}=s,a=aw(s,["playerID"]);const c=o(l,a);for(const[f]of this.clients)f.metadata.playerID===l&&f.send(c)},sendAll:s=>{for(const[l]of this.clients){const a=o(l.metadata.playerID,s);l.send(a)}}})}registerClient(t){if(!this.authenticateClient(t))return;const{playerID:r,credentials:i}=t.metadata;this.clients.set(t,t),this.master.onConnectionChange(this.matchID,r,i,!0)}authenticateClient(t){return(0,uw.authenticate)(this.matchID,t.metadata,this.db)}unregisterClient(t){const{credentials:n,playerID:r}=t.metadata;this.clients.delete(t),this.master.onConnectionChange(this.matchID,r,n,!1)}processAction(t){switch(t.type){case"update":this.master.onUpdate(...t.args);break;case"chat":this.master.onChatMessage(...t.args);break;case"sync":this.master.onSync(...t.args);break}}}Xl.P2PHost=fw;(function(e){var t=zn&&zn.__rest||function(S,x){var _={};for(var I in S)Object.prototype.hasOwnProperty.call(S,I)&&x.indexOf(I)<0&&(_[I]=S[I]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,I=Object.getOwnPropertySymbols(S);C<I.length;C++)x.indexOf(I[C])<0&&Object.prototype.propertyIsEnumerable.call(S,I[C])&&(_[I[C]]=S[I[C]]);return _},n=zn&&zn.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.P2P=e.generateCredentials=void 0;const r=n(z_),i=hl,o=ml,s=Ld,l=Xl,a=pr;var c=pr;Object.defineProperty(e,"generateCredentials",{enumerable:!0,get:function(){return c.generateCredentials}});class f{constructor(){this.initialInterval=500,this.maxInterval=32e3,this.interval=this.initialInterval}cancelTask(){this.taskID&&(clearTimeout(this.taskID),delete this.taskID)}schedule(x){this.cancelTask(),this.taskID=setTimeout(()=>{this.interval<this.maxInterval&&(this.interval*=2),x()},this.interval)}clear(){this.cancelTask(),this.interval=this.initialInterval}}class d extends s.Transport{constructor(x){var{isHost:_,onError:I=()=>{},peerOptions:C={}}=x,g=t(x,["isHost","onError","peerOptions"]);super(g),this.peer=null,this.isHost=Boolean(_),this.onError=I,this.peerOptions=C,this.game=g.game,this.retryHandler=new f,this.setCredentials(g.credentials)}get hostID(){if(!this.matchID)throw new Error("matchID must be provided");return`boardgameio-${this.gameName}-matchid-${this.matchID}`.replace(/([^A-Za-z0-9_-]|^[_-]+|[_-]+$)/g,"").replace(/([_-])[_-]+/g,"$1")}setCredentials(x){if(!x){this.privateKey=this.credentials=void 0;return}const _=(0,i.hash)((0,o.decodeUTF8)(x)).slice(0,32),{publicKey:I,secretKey:C}=i.sign.keyPair.fromSeed(_);this.credentials=(0,o.encodeBase64)(I),this.privateKey=(0,o.encodeBase64)(C)}get metadata(){return{playerID:this.playerID,credentials:this.credentials,message:this.playerID&&this.privateKey?(0,a.signMessage)(this.playerID,this.privateKey):void 0}}connect(){if(this.peer=new r.default(this.isHost?this.hostID:void 0,this.peerOptions),this.isHost){const x=new l.P2PHost({game:this.game,numPlayers:this.numPlayers,matchID:this.matchID});this.emit=_=>void x.processAction(_),x.registerClient({send:_=>void this.notifyClient(_),metadata:this.metadata}),this.peer.on("connection",_=>{x.registerClient(_),_.on("data",I=>{x.processAction(I)}),_.on("close",()=>void x.unregisterClient(_)),window&&window.addEventListener("beforeunload",()=>_.close())}),this.peer.on("error",_=>this.onError(_)),this.onConnect()}else this.peer.on("open",()=>void this.connectToHost()),this.peer.on("error",x=>{const _=x;_.type==="network"||_.type==="peer-unavailable"?this.retryHandler.schedule(()=>void this.connectToHost()):this.onError(_)})}connectToHost(){if(!this.peer)return;const x=this.peer.connect(this.hostID,{metadata:this.metadata});this.emit=_=>void x.send(_),x.on("open",()=>void this.onConnect()),x.on("data",_=>void this.notifyClient(_)),window&&window.addEventListener("beforeunload",()=>x.close())}onConnect(){this.retryHandler.clear(),this.setConnectionStatus(!0),this.requestSync()}disconnect(){this.peer&&this.peer.destroy(),this.peer=null,this.retryHandler.clear(),this.setConnectionStatus(!1)}requestSync(){this.emit&&this.emit({type:"sync",args:[this.matchID,this.playerID,this.credentials,this.numPlayers]})}sendAction(x,_){this.emit&&this.emit({type:"update",args:[_,x._stateID,this.matchID,this.playerID]})}sendChatMessage(x,_){this.emit&&this.emit({type:"chat",args:[x,_,this.credentials]})}reconnect(){this.disconnect(),this.connect()}updateMatchID(x){this.matchID=x,this.reconnect()}updatePlayerID(x){this.playerID=x,this.reconnect()}updateCredentials(x){this.setCredentials(x),this.reconnect()}}const p=(S={})=>x=>new d(Object.assign(Object.assign({},x),S));e.P2P=p})(ks);let ha;const dw=new Uint8Array(16);function pw(){if(!ha&&(ha=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ha))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ha(dw)}const $t=[];for(let e=0;e<256;++e)$t.push((e+256).toString(16).slice(1));function hw(e,t=0){return($t[e[t+0]]+$t[e[t+1]]+$t[e[t+2]]+$t[e[t+3]]+"-"+$t[e[t+4]]+$t[e[t+5]]+"-"+$t[e[t+6]]+$t[e[t+7]]+"-"+$t[e[t+8]]+$t[e[t+9]]+"-"+$t[e[t+10]]+$t[e[t+11]]+$t[e[t+12]]+$t[e[t+13]]+$t[e[t+14]]+$t[e[t+15]]).toLowerCase()}const mw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lm={randomUUID:mw};function P0(e,t,n){if(lm.randomUUID&&!t&&!e)return lm.randomUUID();e=e||{};const r=e.random||(e.rng||pw)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return hw(r)}const cm=ks.generateCredentials(),yw=P0(),um=P0(),gw=()=>{const[e,t]=ee.useState("");return $("div",{className:"player min-h-screen",children:$("div",{className:"player-content text-center",children:ar("div",{className:"max-w-md",children:[$("h1",{className:"text-5xl font-bold",children:"Welcome to Briscola"}),$("p",{className:"py-6",children:"Create a match and invite a friend to play!"}),$(vh,{to:Ps.match,state:{isHost:!0,playerID:"0",credentials:cm,matchID:yw},className:"btn btn-primary",children:"Create Match"}),$("div",{className:"divider mt-32 mb-32",children:"OR"}),$("h3",{className:"text-xl mb-8",children:"Have a friend's match ID? Enter it here to join!"}),ar("div",{className:"form-control gap-4",children:[ar("label",{className:"input-group input-group-vertical",children:[$("span",{children:"Match ID"}),$("input",{type:"text",placeholder:um,className:"input input-bordered",onInput:n=>t(n.currentTarget.value),value:e})]}),e.length===um.length?$(vh,{className:"btn btn-secondary w-full",to:`${Ps.match}?matchID=${e}`,state:{isHost:!1,playerID:"1",credentials:cm,matchID:e},children:"Connect"}):$("div",{className:"tooltip","data-tip":"Please enter a match ID.",children:$("button",{className:"btn btn-secondary w-full btn-disabled",disabled:!0,children:"Connect"})})]})]})})})};let vw="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",xw=(e=21)=>{let t="",n=e;for(;n--;)t+=vw[Math.random()*64|0];return t};(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,o=e.document,s;function l(g){typeof g!="function"&&(g=new Function(""+g));for(var w=new Array(arguments.length-1),P=0;P<w.length;P++)w[P]=arguments[P+1];var B={callback:g,args:w};return r[n]=B,s(n),n++}function a(g){delete r[g]}function c(g){var w=g.callback,P=g.args;switch(P.length){case 0:w();break;case 1:w(P[0]);break;case 2:w(P[0],P[1]);break;case 3:w(P[0],P[1],P[2]);break;default:w.apply(t,P);break}}function f(g){if(i)setTimeout(f,0,g);else{var w=r[g];if(w){i=!0;try{c(w)}finally{a(g),i=!1}}}}function d(){s=function(g){process.nextTick(function(){f(g)})}}function p(){if(e.postMessage&&!e.importScripts){var g=!0,w=e.onmessage;return e.onmessage=function(){g=!1},e.postMessage("","*"),e.onmessage=w,g}}function S(){var g="setImmediate$"+Math.random()+"$",w=function(P){P.source===e&&typeof P.data=="string"&&P.data.indexOf(g)===0&&f(+P.data.slice(g.length))};e.addEventListener?e.addEventListener("message",w,!1):e.attachEvent("onmessage",w),s=function(P){e.postMessage(g+P,"*")}}function x(){var g=new MessageChannel;g.port1.onmessage=function(w){var P=w.data;f(P)},s=function(w){g.port2.postMessage(w)}}function _(){var g=o.documentElement;s=function(w){var P=o.createElement("script");P.onreadystatechange=function(){f(w),P.onreadystatechange=null,g.removeChild(P),P=null},g.appendChild(P)}}function I(){s=function(g){setTimeout(f,0,g)}}var C=Object.getPrototypeOf&&Object.getPrototypeOf(e);C=C&&C.setTimeout?C:e,{}.toString.call(e.process)==="[object process]"?d():p()?S():e.MessageChannel?x():o&&"onreadystatechange"in o.createElement("script")?_():I(),C.setImmediate=l,C.clearImmediate=a})(typeof self>"u"?zn:self);class Sw{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(o=>{if("payload"in o)return o;if("move"in o)return Vv(o.move,o.args,r);if("event"in o)return os(o.event,o.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=$v(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Cw=25;class _w extends Sw{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:o,playoutDepth:s,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Ql({game:i}),this.iterations=o,this.playoutDepth=s,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof o=="number"?o:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof s=="number"?s:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:o,ctx:s}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(o,s,i),a=this.objectives(o,s,i);else if(s.activePlayers)for(const c in s.activePlayers)l.push(...this.enumerate(o,s,c)),a.push(this.objectives(o,s,c));else l=this.enumerate(o,s,s.currentPlayer),a=this.objectives(o,s,s.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const o=i.visits+Number.EPSILON,s=i.value/o+Math.sqrt(2*Math.log(t.visits)/o);(n==null||s>r)&&(r=s,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const o=this.reducer(t.state,i),s=this.createNode({state:o,parentAction:i,parent:t});return t.children.push(s),s}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:o}=t;let s=o.currentPlayer;o.activePlayers&&(s=Object.keys(o.activePlayers)[0]);const l=this.enumerate(i,o,s),a=this.objectives(i,o,s),c=Object.keys(a).reduce((p,S)=>{const x=a[S];return x.checker(i,o)?p+x.weight:p},0);if(c>0)return{score:c};if(!l||l.length===0)return;const f=this.random(l.length);t=this.reducer(t,l[f])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const o=()=>{let s=null;for(const c of r.children)(s==null||c.visits>s.visits)&&(s=c);return{action:s&&s.parentAction,metadata:r}};return new Promise(s=>{const l=()=>{for(let a=0;a<Cw&&this.iterationCounter<i;a++){const c=this.select(r),f=this.expand(c),d=this.playout(f);this.backpropagate(f,d),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):s(o())};a()}else{for(;this.iterationCounter<i;)l();s(o())}})}}Promise.resolve();class bw extends ql{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const ww=e=>new bw(e);class Ew{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Pw=new Ew;function uf(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Fd(e,t,n,r,i,o){const s={};for(const l of t)s[l]=(...a)=>{const c=hb[e](l,a,uf(r,n,o),i);n.dispatch(c)};return s}const kw=Fd.bind(null,"makeMove"),Tw=Fd.bind(null,"gameEvent"),Ow=Fd.bind(null,"plugin");class Rw{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:o,playerID:s,credentials:l,enhancer:a}){this.game=Gs(t),this.playerID=s,this.matchID=o||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=Pw,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Ql({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=Nd({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(Yv(this.initialState))},this.undo=()=>{const S=Jv(uf(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(S)},this.redo=()=>{const S=Qv(uf(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(S)},this.log=[];const p=w0(x0,()=>S=>x=>{const _=S(x);return this.notifySubscribers(),_},S=>x=>_=>{const I=S.getState(),C=x(_);return!("clientOnly"in _)&&_.type!==Yl&&this.transport.sendAction(I,_),C},S=>x=>_=>{const I=x(_),C=S.getState();switch(_.type){case Ms:case Hl:case Kl:case Wl:{const g=C.deltalog;this.log=[...this.log,...g];break}case Ed:{this.log=[];break}case Td:case kd:{let g=-1;this.log.length>0&&(g=this.log[this.log.length-1]._stateID);let w=_.deltalog||[];w=w.filter(P=>P._stateID>g),this.log=[...this.log,...w];break}case Pd:{this.initialState=_.initialState,this.log=_.log||[];break}}return I});a=a!==void 0?b0(p,a):p,this.store=jd(this.reducer,this.initialState,a),i||(i=ww),this.transport=i({transportDataCallback:S=>this.receiveTransportData(S),gameKey:t,game:this.game,matchID:o,playerID:s,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=S=>{this.transport.sendChatMessage(this.matchID,{id:xw(7),sender:this.playerID,payload:S})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=Hv(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,o=this.store.getState();if(r._stateID>=o._stateID){const s=Kv(r,i);this.store.dispatch(s)}break}case"patch":{const[,r,i,o,s]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=Wv(r,i,o,s);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:e0(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=kw(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Tw(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Ow(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function Mw(e){return new Rw(e)}const k0=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},di=e=>k0(e,"game name"),No=e=>k0(e,"match ID"),Lo=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],o=e[n];if(!i.includes(typeof o)){const s=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${s}, got ${o}.`)}}};class Dw extends Error{constructor(t,n){super(t),this.details=n}}class Iw{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(o){i=o.message}}throw new Dw(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){di(t);let i="";if(n){const o=[],{isGameover:s,updatedBefore:l,updatedAfter:a}=n;s!==void 0&&o.push(`isGameover=${s}`),l&&o.push(`updatedBefore=${l}`),a&&o.push(`updatedAfter=${a}`),o.length>0&&(i="?"+o.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return di(t),No(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return di(t),Lo(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return di(t),No(n),Lo(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){di(t),No(n),Lo(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){di(t),No(n),Lo(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return di(t),No(n),Lo(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var $n={},Aw={get exports(){return $n},set exports(e){$n=e}},Nw="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Lw=Nw,jw=Lw;function T0(){}function O0(){}O0.resetWarningCache=T0;var Bw=function(){function e(r,i,o,s,l,a){if(a!==jw){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:O0,resetWarningCache:T0};return n.PropTypes=n,n};Aw.exports=Bw();var Fr={},Ud={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */Ud.parse=zw;Ud.serialize=Vw;var Fw=decodeURIComponent,Uw=encodeURIComponent,$w=/; */,ma=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function zw(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split($w),o=r.decode||Fw,s=0;s<i.length;s++){var l=i[s],a=l.indexOf("=");if(!(a<0)){var c=l.substr(0,a).trim(),f=l.substr(++a,l.length).trim();f[0]=='"'&&(f=f.slice(1,-1)),n[c]==null&&(n[c]=Gw(f,o))}}return n}function Vw(e,t,n){var r=n||{},i=r.encode||Uw;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!ma.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!ma.test(o))throw new TypeError("argument val is invalid");var s=e+"="+o;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");s+="; Max-Age="+Math.floor(l)}if(r.domain){if(!ma.test(r.domain))throw new TypeError("option domain is invalid");s+="; Domain="+r.domain}if(r.path){if(!ma.test(r.path))throw new TypeError("option path is invalid");s+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return s}function Gw(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var fm=Object.getOwnPropertySymbols,Hw=Object.prototype.hasOwnProperty,Ww=Object.prototype.propertyIsEnumerable;function Kw(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Yw(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Jw=Yw()?Object.assign:function(e,t){for(var n,r=Kw(e),i,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var s in n)Hw.call(n,s)&&(r[s]=n[s]);if(fm){i=fm(n);for(var l=0;l<i.length;l++)Ww.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r};Object.defineProperty(Fr,"__esModule",{value:!0});var Qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Fr.load=I0;Fr.loadAll=A0;Fr.select=N0;Fr.save=L0;Fr.remove=j0;Fr.setRawCookie=$d;Fr.plugToRequest=B0;var qw=Ud,So=M0(qw),Xw=Jw,R0=M0(Xw);function M0(e){return e&&e.__esModule?e:{default:e}}var ec=typeof document>"u"||typeof process<"u"&&process.env&&!1,Dn={},oi=void 0;function D0(){return oi&&!oi.headersSent}function I0(e,t){var n=ec?Dn:So.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function A0(e){var t=ec?Dn:So.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function N0(e){var t=ec?Dn:So.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,R0.default)({},n,i)},{}):t:{}}function L0(e,t,n){Dn[e]=t,(typeof t>"u"?"undefined":Qw(t))==="object"&&(Dn[e]=JSON.stringify(t)),ec||(document.cookie=So.default.serialize(e,Dn[e],n)),D0()&&oi.cookie&&oi.cookie(e,t,n)}function j0(e,t){delete Dn[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,R0.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=So.default.serialize(e,"",t)),D0()&&oi.clearCookie&&oi.clearCookie(e,t)}function $d(e){e?Dn=So.default.parse(e):Dn={}}function B0(e,t){return e.cookie?Dn=e.cookie:e.cookies?Dn=e.cookies:e.headers&&e.headers.cookie?$d(e.headers.cookie):Dn={},oi=t,function(){oi=null,Dn={}}}var dm=Fr.default={setRawCookie:$d,load:I0,loadAll:A0,select:N0,save:L0,remove:j0,plugToRequest:B0};const mr=Object.create(null);mr.open="0";mr.close="1";mr.ping="2";mr.pong="3";mr.message="4";mr.upgrade="5";mr.noop="6";const Aa=Object.create(null);Object.keys(mr).forEach(e=>{Aa[mr[e]]=e});const Zw={type:"error",data:"parser error"},eE=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",tE=typeof ArrayBuffer=="function",nE=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,F0=({type:e,data:t},n,r)=>eE&&t instanceof Blob?n?r(t):pm(t,r):tE&&(t instanceof ArrayBuffer||nE(t))?n?r(t):pm(new Blob([t]),r):r(mr[e]+(t||"")),pm=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+r)},n.readAsDataURL(e)},hm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ko=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<hm.length;e++)Ko[hm.charCodeAt(e)]=e;const rE=e=>{let t=e.length*.75,n=e.length,r,i=0,o,s,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const c=new ArrayBuffer(t),f=new Uint8Array(c);for(r=0;r<n;r+=4)o=Ko[e.charCodeAt(r)],s=Ko[e.charCodeAt(r+1)],l=Ko[e.charCodeAt(r+2)],a=Ko[e.charCodeAt(r+3)],f[i++]=o<<2|s>>4,f[i++]=(s&15)<<4|l>>2,f[i++]=(l&3)<<6|a&63;return c},iE=typeof ArrayBuffer=="function",U0=(e,t)=>{if(typeof e!="string")return{type:"message",data:$0(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:oE(e.substring(1),t)}:Aa[n]?e.length>1?{type:Aa[n],data:e.substring(1)}:{type:Aa[n]}:Zw},oE=(e,t)=>{if(iE){const n=rE(e);return $0(n,t)}else return{base64:!0,data:e}},$0=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}},z0=String.fromCharCode(30),sE=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((o,s)=>{F0(o,!1,l=>{r[s]=l,++i===n&&t(r.join(z0))})})},aE=(e,t)=>{const n=e.split(z0),r=[];for(let i=0;i<n.length;i++){const o=U0(n[i],t);if(r.push(o),o.type==="error")break}return r},V0=4;function Ot(e){if(e)return lE(e)}function lE(e){for(var t in Ot.prototype)e[t]=Ot.prototype[t];return e}Ot.prototype.on=Ot.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ot.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Ot.prototype.off=Ot.prototype.removeListener=Ot.prototype.removeAllListeners=Ot.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Ot.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};Ot.prototype.emitReserved=Ot.prototype.emit;Ot.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ot.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Yr=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function G0(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const cE=setTimeout,uE=clearTimeout;function tc(e,t){t.useNativeTimers?(e.setTimeoutFn=cE.bind(Yr),e.clearTimeoutFn=uE.bind(Yr)):(e.setTimeoutFn=setTimeout.bind(Yr),e.clearTimeoutFn=clearTimeout.bind(Yr))}const fE=1.33;function dE(e){return typeof e=="string"?pE(e):Math.ceil((e.byteLength||e.size)*fE)}function pE(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}class hE extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class H0 extends Ot{constructor(t){super(),this.writable=!1,tc(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,n,r){return super.emitReserved("error",new hE(t,n,r)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=U0(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const W0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ff=64,mE={};let mm=0,ya=0,ym;function gm(e){let t="";do t=W0[e%ff]+t,e=Math.floor(e/ff);while(e>0);return t}function K0(){const e=gm(+new Date);return e!==ym?(mm=0,ym=e):e+"."+gm(mm++)}for(;ya<ff;ya++)mE[W0[ya]]=ya;function Y0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function yE(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}let J0=!1;try{J0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const gE=J0;function Q0(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||gE))return new XMLHttpRequest}catch{}if(!t)try{return new Yr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function vE(){}const xE=function(){return new Q0({xdomain:!1}).responseType!=null}();class SE extends H0{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==r}const n=t&&t.forceBase64;this.supportsBinary=xE&&!n}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};aE(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,sE(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const n=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=K0()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(n==="https"&&Number(this.opts.port)!==443||n==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const i=Y0(t),o=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Mr(this.uri(),t)}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}let Mr=class extends Ot{constructor(t,n){super(),tc(this,n),this.opts=n,this.method=n.method||"GET",this.uri=t,this.async=n.async!==!1,this.data=n.data!==void 0?n.data:null,this.create()}create(){const t=G0(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const n=this.xhr=new Q0(t);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=Mr.requestsCount++,Mr.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=vE,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Mr.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Mr.requestsCount=0;Mr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",vm);else if(typeof addEventListener=="function"){const e="onpagehide"in Yr?"pagehide":"unload";addEventListener(e,vm,!1)}}function vm(){for(let e in Mr.requests)Mr.requests.hasOwnProperty(e)&&Mr.requests[e].abort()}const q0=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0))(),ga=Yr.WebSocket||Yr.MozWebSocket,xm=!0,CE="arraybuffer",Sm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _E extends H0{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,r=Sm?{}:G0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=xm&&!Sm?n?new ga(t,n):new ga(t):new ga(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||CE,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;F0(r,this.supportsBinary,o=>{const s={};try{xm&&this.ws.send(o)}catch{}i&&q0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const n=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(n==="wss"&&Number(this.opts.port)!==443||n==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=K0()),this.supportsBinary||(t.b64=1);const i=Y0(t),o=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}check(){return!!ga}}const bE={websocket:_E,polling:SE},wE=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,EE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function df(e){const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=wE.exec(e||""),o={},s=14;for(;s--;)o[EE[s]]=i[s]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=PE(o,o.path),o.queryKey=kE(o,o.query),o}function PE(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function kE(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}let xi=class extends Ot{constructor(t,n={}){super(),t&&typeof t=="object"&&(n=t,t=null),t?(t=df(t),n.hostname=t.host,n.secure=t.protocol==="https"||t.protocol==="wss",n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=df(n.host).host),tc(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=yE(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=V0,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts.transportOptions[t],this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new bE[t](r)}open(){let t;if(this.opts.rememberUpgrade&&xi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(t){let n=this.createTransport(t),r=!1;xi.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;xi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function o(){r||(r=!0,f(),n.close(),n=null)}const s=d=>{const p=new Error("probe error: "+d);p.transport=n.name,o(),this.emitReserved("upgradeError",p)};function l(){s("transport closed")}function a(){s("socket closed")}function c(d){n&&d.name!==n.name&&o()}const f=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",l),this.off("close",a),this.off("upgrading",c)};n.once("open",i),n.once("error",s),n.once("close",l),this.once("close",a),this.once("upgrading",c),n.open()}onOpen(){if(this.readyState="open",xi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0;const n=this.upgrades.length;for(;t<n;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=t.data,this.onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=dE(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(t,n,r){return this.sendPacket("message",t,n,r),this}send(t,n,r){return this.sendPacket("message",t,n,r),this}sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}onError(t){xi.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const n=[];let r=0;const i=t.length;for(;r<i;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}};xi.protocol=V0;function TE(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=df(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const OE=typeof ArrayBuffer=="function",RE=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,X0=Object.prototype.toString,ME=typeof Blob=="function"||typeof Blob<"u"&&X0.call(Blob)==="[object BlobConstructor]",DE=typeof File=="function"||typeof File<"u"&&X0.call(File)==="[object FileConstructor]";function zd(e){return OE&&(e instanceof ArrayBuffer||RE(e))||ME&&e instanceof Blob||DE&&e instanceof File}function Na(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Na(e[n]))return!0;return!1}if(zd(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Na(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Na(e[n]))return!0;return!1}function IE(e){const t=[],n=e.data,r=e;return r.data=pf(n,t),r.attachments=t.length,{packet:r,buffers:t}}function pf(e,t){if(!e)return e;if(zd(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=pf(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=pf(e[r],t));return n}return e}function AE(e,t){return e.data=hf(e.data,t),e.attachments=void 0,e}function hf(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=hf(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=hf(e[n],t));return e}const NE=5;var Ge;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Ge||(Ge={}));class LE{constructor(t){this.replacer=t}encode(t){return(t.type===Ge.EVENT||t.type===Ge.ACK)&&Na(t)?(t.type=t.type===Ge.EVENT?Ge.BINARY_EVENT:Ge.BINARY_ACK,this.encodeAsBinary(t)):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Ge.BINARY_EVENT||t.type===Ge.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=IE(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Vd extends Ot{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t),n.type===Ge.BINARY_EVENT||n.type===Ge.BINARY_ACK?(this.reconstructor=new jE(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(zd(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Ge[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ge.BINARY_EVENT||r.type===Ge.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const s=t.substring(o,n);if(s!=Number(s)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const s=t.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(Vd.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Ge.CONNECT:return typeof n=="object";case Ge.DISCONNECT:return n===void 0;case Ge.CONNECT_ERROR:return typeof n=="string"||typeof n=="object";case Ge.EVENT:case Ge.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case Ge.ACK:case Ge.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class jE{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=AE(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const BE=Object.freeze(Object.defineProperty({__proto__:null,protocol:NE,get PacketType(){return Ge},Encoder:LE,Decoder:Vd},Symbol.toStringTag,{value:"Module"}));function Qn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const FE=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Z0 extends Ot{constructor(t,n,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Qn(t,"open",this.onopen.bind(this)),Qn(t,"packet",this.onpacket.bind(this)),Qn(t,"error",this.onerror.bind(this)),Qn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(FE.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');n.unshift(t);const r={type:Ge.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const s=this.ids++,l=n.pop();this._registerAckCallback(s,l),r.id=s}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,n){const r=this.flags.timeout;if(r===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},r);this.acks[t]=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,[null,...o])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:Ge.CONNECT,data:t})}):this.packet({type:Ge.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ge.CONNECT:if(t.data&&t.data.sid){const i=t.data.sid;this.onconnect(i)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ge.EVENT:case Ge.BINARY_EVENT:this.onevent(t);break;case Ge.ACK:case Ge.BINARY_ACK:this.onack(t);break;case Ge.DISCONNECT:this.ondisconnect();break;case Ge.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t)}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Ge.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(n.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ge.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Co(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Co.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Co.prototype.reset=function(){this.attempts=0};Co.prototype.setMin=function(e){this.ms=e};Co.prototype.setMax=function(e){this.max=e};Co.prototype.setJitter=function(e){this.jitter=e};class mf extends Ot{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,tc(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Co({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||BE;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new xi(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Qn(n,"open",function(){r.onopen(),t&&t()}),o=Qn(n,"error",s=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",s),t?t(s):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const s=this._timeout;s===0&&i();const l=this.setTimeoutFn(()=>{i(),n.close(),n.emit("error",new Error("timeout"))},s);this.opts.autoUnref&&l.unref(),this.subs.push(function(){clearTimeout(l)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Qn(t,"ping",this.onping.bind(this)),Qn(t,"data",this.ondata.bind(this)),Qn(t,"error",this.onerror.bind(this)),Qn(t,"close",this.onclose.bind(this)),Qn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){q0(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r||(r=new Z0(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const jo={};function La(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=TE(e,t.path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=jo[i]&&o in jo[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||s;let a;return l?a=new mf(r,t):(jo[i]||(jo[i]=new mf(r,t)),a=jo[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(La,{Manager:mf,Socket:Z0,io:La,connect:La});class e1 extends S0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class UE extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class $E extends e1{constructor(t="bgio"){super();const n=r=>new UE(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function zE(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class VE extends E0{constructor({game:t,bots:n,storageKey:r,persist:i}){const o={},s={};if(t&&t.ai&&n)for(const d in n){const p=n[d];s[d]=new p({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:d,...p})=>{const S=o[d];S!==void 0&&S(a(d,p))},a=_0(t),c={send:l,sendAll:d=>{for(const p in o)l({playerID:p,...d})}},f=i?new $E(r):new e1;super(t,f,c),this.connect=(d,p)=>{o[d]=p},this.subscribe(({state:d,matchID:p})=>{if(!n)return;const S=zE(d,s);S!==null&&setTimeout(async()=>{const x=await s[S].play(d,S);await this.onUpdate(x.action,d._stateID,p,x.action.payload.playerID)},100)})}}class GE extends ql{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const Cm=new Map;function HE({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:o}=r;let s;const l=Cm.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(s=l.master),s||(s=new VE({game:o,bots:e,persist:t,storageKey:n}),Cm.set(i,{master:s,bots:e,persist:t,storageKey:n})),new GE({master:s,...r})}}const _m=La;class WE extends ql{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=_m(t+this.gameName,this.socketOpts)}else this.socket=_m("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,o)=>{this.notifyClient({type:"patch",args:[t,n,r,i,o]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function bm({server:e,socketOpts:t}={}){return n=>new WE({server:e,socketOpts:t,...n})}function yf(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:o,enhancer:s}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>ue.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends ue.Component{constructor(f){super(f),a===void 0&&(a=f.debug),this.client=Mw({game:n,debug:a,numPlayers:r,multiplayer:o,matchID:f.matchID,playerID:f.playerID,credentials:f.credentials,enhancer:s})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(f){this.props.matchID!=f.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=f.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=f.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const f=this.client.getState();if(f===null)return ue.createElement(l);let d=null;return i&&(d=ue.createElement(i,{...f,...this.props,isMultiplayer:!!o,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),ue.createElement("div",{className:"bgio-client"},d)}},t.propTypes={matchID:$n.string,playerID:$n.string,credentials:$n.string,debug:$n.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class KE{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new Iw({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const o=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=o.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function YE(e){return new KE(e)}class t1 extends ue.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return ue.createElement("div",null,ue.createElement("p",{className:"phase-title"},"Choose a player name:"),ue.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),ue.createElement("span",{className:"buttons"},ue.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),ue.createElement("br",null),ue.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,ue.createElement("br",null)))}}t1.defaultProps={playerName:""};class JE extends ue.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>ue.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>ue.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>ue.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>ue.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?ue.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),ue.createElement("tr",{key:"line-"+t.matchID},ue.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),ue.createElement("td",{key:"cell-status-"+t.matchID},n),ue.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),ue.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class QE extends ue.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>ue.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>ue.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return ue.createElement("div",null,ue.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),ue.createElement("span",null,"Players:"),ue.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),ue.createElement("span",{className:"buttons"},ue.createElement("button",{onClick:this.onClickCreate},"Create")))}}var xn;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(xn||(xn={}));class n1 extends ue.Component{constructor(t){super(t),this.state={phase:xn.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=YE({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const o=Object.assign({},i.credentialStore);return o[n]=r,{credentialStore:o}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:xn.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:xn.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(o){this.setState({errorMsg:o.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let o;if(r.numPlayers>1&&(o=this.props.gameServer?bm({server:this.props.gameServer}):bm()),r.numPlayers==1){const a=i.game.maxPlayers,c={};for(let f=1;f<a;f++)c[f+""]=_w;o=HE({bots:c})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:o}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:xn.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:xn.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:o,gameName:s,players:l}=i;return ue.createElement(JE,{key:"instance-"+o,match:{matchID:o,gameName:s,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=dm.load("lobbyState")||{};t.phase&&t.phase===xn.PLAY&&(t.phase=xn.LIST),t.phase&&t.phase!==xn.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||xn.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const o={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};dm.save("lobbyState",o,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:o,runningMatch:s}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:o,playerName:i,runningMatch:s,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):ue.createElement("div",{id:"lobby-view",style:{padding:50}},ue.createElement("div",{className:this._getPhaseVisibility(xn.ENTER)},ue.createElement(t1,{key:i,playerName:i,onEnter:this._enterLobby})),ue.createElement("div",{className:this._getPhaseVisibility(xn.LIST)},ue.createElement("p",null,"Welcome, ",i),ue.createElement("div",{className:"phase-title",id:"match-creation"},ue.createElement("span",null,"Create a match:"),ue.createElement(QE,{games:t,createMatch:this._createMatch})),ue.createElement("p",{className:"phase-title"},"Join a match:"),ue.createElement("div",{id:"instances"},ue.createElement("table",null,ue.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),ue.createElement("span",{className:"error-msg"},r,ue.createElement("br",null))),ue.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),ue.createElement("div",{className:this._getPhaseVisibility(xn.PLAY)},s&&ue.createElement(s.app,{matchID:s.matchID,playerID:s.playerID,credentials:s.credentials}),ue.createElement("div",{className:"buttons",id:"match-exit"},ue.createElement("button",{onClick:this._exitMatch},"Exit match"))),ue.createElement("div",{className:"buttons",id:"lobby-exit"},ue.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}n1.propTypes={gameComponents:$n.array.isRequired,lobbyServer:$n.string,gameServer:$n.string,debug:$n.bool,clientFactory:$n.func,refreshInterval:$n.number};n1.defaultProps={debug:!1,clientFactory:yf,refreshInterval:2e3};const qE="_interactable_1jlsy_1",XE="_disabled_1jlsy_5",ZE="_card_1jlsy_9",eP="_cardRear_1jlsy_13",tP="_cardWrapper_1jlsy_19",nP="_briscola_1jlsy_36",rP="_briscolaWrapper_1jlsy_41",iP="_deck_1jlsy_53",oP="_pile_1jlsy_59",on={interactable:qE,disabled:XE,card:ZE,cardRear:eP,cardWrapper:tP,briscola:nP,briscolaWrapper:rP,deck:iP,pile:oP,"player-won":"_player-won_1jlsy_86","opponent-won":"_opponent-won_1jlsy_94"},sP="/briscola/assets/twoOfCoins-e6a0b3f0.webp";function aP(e){return $("img",{src:sP,alt:"Two of Coins",...e})}const lP="/briscola/assets/fourOfCoins-6954a7e1.webp";function cP(e){return $("img",{src:lP,alt:"Four of Coins",...e})}const uP="/briscola/assets/fiveOfCoins-ffb71c4f.webp";function fP(e){return $("img",{src:uP,alt:"Five of Coins",...e})}const dP="/briscola/assets/sixOfCoins-5fd3a106.webp";function pP(e){return $("img",{src:dP,alt:"Six of Coins",...e})}const hP="/briscola/assets/sevenOfCoins-38986a46.webp";function mP(e){return $("img",{src:hP,alt:"Seven of Coins",...e})}const yP="/briscola/assets/knaveOfCoins-0269da45.webp";function gP(e){return $("img",{src:yP,alt:"Knave of Coins",...e})}const vP="/briscola/assets/knightOfCoins-f3ff07e6.webp";function xP(e){return $("img",{src:vP,alt:"Knight of Coins",...e})}const SP="/briscola/assets/kingOfCoins-d471b1fb.webp";function CP(e){return $("img",{src:SP,alt:"King of Coins",...e})}const _P="/briscola/assets/threeOfCoins-463d4648.webp";function bP(e){return $("img",{src:_P,alt:"Three of Coins",...e})}const wP="/briscola/assets/aceOfCoins-093988f4.webp";function EP(e){return $("img",{src:wP,alt:"Ace of Coins",...e})}const PP="/briscola/assets/twoOfSwords-45485f9d.webp";function kP(e){return $("img",{src:PP,alt:"Two of Swords",...e})}const TP="/briscola/assets/fourOfSwords-0f5fcad6.webp";function OP(e){return $("img",{src:TP,alt:"Four of Swords",...e})}const RP="/briscola/assets/fiveOfSwords-6f4026b7.webp";function MP(e){return $("img",{src:RP,alt:"Five of Swords",...e})}const DP="/briscola/assets/sixOfSwords-5f2679e2.webp";function IP(e){return $("img",{src:DP,alt:"Six of Swords",...e})}const AP="/briscola/assets/sevenOfSwords-2d34d06e.webp";function NP(e){return $("img",{src:AP,alt:"Seven of Swords",...e})}const LP="/briscola/assets/knaveOfSwords-f5dc0e9f.webp";function jP(e){return $("img",{src:LP,alt:"Knave of Swords",...e})}const BP="/briscola/assets/knightOfSwords-412d09bd.webp";function FP(e){return $("img",{src:BP,alt:"Knight of Swords",...e})}const UP="/briscola/assets/kingOfSwords-82bf1642.webp";function $P(e){return $("img",{src:UP,alt:"King of Swords",...e})}const zP="/briscola/assets/threeOfSwords-ead311a5.webp";function VP(e){return $("img",{src:zP,alt:"Three of Swords",...e})}const GP="/briscola/assets/aceOfSwords-4efb3053.webp";function HP(e){return $("img",{src:GP,alt:"Ace of Swords",...e})}const WP="/briscola/assets/twoOfCups-0a4efe16.webp";function KP(e){return $("img",{src:WP,alt:"Two of Cups",...e})}const YP="/briscola/assets/fourOfCups-441ee154.webp";function JP(e){return $("img",{src:YP,alt:"Four of Cups",...e})}const QP="/briscola/assets/fiveOfCups-bbd454b9.webp";function qP(e){return $("img",{src:QP,alt:"Five of Cups",...e})}const XP="/briscola/assets/sixOfCups-e7455d3e.webp";function ZP(e){return $("img",{src:XP,alt:"Six of Cups",...e})}const ek="/briscola/assets/sevenOfCups-e389c74b.webp";function tk(e){return $("img",{src:ek,alt:"Seven of Cups",...e})}const nk="/briscola/assets/knaveOfCups-9ff42bc8.webp";function rk(e){return $("img",{src:nk,alt:"Knave of Cups",...e})}const ik="/briscola/assets/knightOfCups-e4c8c9a2.webp";function ok(e){return $("img",{src:ik,alt:"Knight of Cups",...e})}const sk="/briscola/assets/kingOfCups-2af8e4eb.webp";function ak(e){return $("img",{src:sk,alt:"King of Cups",...e})}const lk="/briscola/assets/threeOfCups-34fce41c.webp";function ck(e){return $("img",{src:lk,alt:"Three of Cups",...e})}const uk="/briscola/assets/aceOfCups-e62cd458.webp";function fk(e){return $("img",{src:uk,alt:"Ace of Cups",...e})}const dk="/briscola/assets/twoOfClubs-46fb6245.webp";function pk(e){return $("img",{src:dk,alt:"Two of Clubs",...e})}const hk="/briscola/assets/fourOfClubs-4089e054.webp";function mk(e){return $("img",{src:hk,alt:"Four of Clubs",...e})}const yk="/briscola/assets/fiveOfClubs-f0e04966.webp";function gk(e){return $("img",{src:yk,alt:"Five of Clubs",...e})}const vk="/briscola/assets/sixOfClubs-f8787e16.webp";function xk(e){return $("img",{src:vk,alt:"Six of Clubs",...e})}const Sk="/briscola/assets/sevenOfClubs-a81d9011.webp";function Ck(e){return $("img",{src:Sk,alt:"Seven of Clubs",...e})}const _k="/briscola/assets/knaveOfClubs-063cc042.webp";function bk(e){return $("img",{src:_k,alt:"Knave of Clubs",...e})}const wk="/briscola/assets/knightOfClubs-7744e9e4.webp";function Ek(e){return $("img",{src:wk,alt:"Knight of Clubs",...e})}const Pk="/briscola/assets/kingOfClubs-6e160b7c.webp";function kk(e){return $("img",{src:Pk,alt:"King of Clubs",...e})}const Tk="/briscola/assets/threeOfClubs-409e754d.webp";function Ok(e){return $("img",{src:Tk,alt:"Three of Clubs",...e})}const Rk="/briscola/assets/aceOfClubs-708379ce.webp";function Mk(e){return $("img",{src:Rk,alt:"Ace of Clubs",...e})}const Dk={key:"twoOfCoins",suit:"Coins",strength:1,points:0,imagePath:"/images/cards/twoOfCoins.webp",alt:"Two of Coins"},Ik={key:"fourOfCoins",suit:"Coins",strength:2,points:0,imagePath:"/images/cards/fourOfCoins.webp",alt:"Four of Coins"},Ak={key:"fiveOfCoins",suit:"Coins",strength:3,points:0,imagePath:"/images/cards/fiveOfCoins.webp",alt:"Five of Coins"},Nk={key:"sixOfCoins",suit:"Coins",strength:4,points:0,imagePath:"/images/cards/sixOfCoins.webp",alt:"Six of Coins"},Lk={key:"sevenOfCoins",suit:"Coins",strength:5,points:0,imagePath:"/images/cards/sevenOfCoins.webp",alt:"Seven of Coins"},jk={key:"knaveOfCoins",suit:"Coins",strength:6,points:2,imagePath:"/images/cards/knaveOfCoins.webp",alt:"Knave of Coins"},Bk={key:"knightOfCoins",suit:"Coins",strength:7,points:3,imagePath:"/images/cards/knightOfCoins.webp",alt:"Knight of Coins"},Fk={key:"kingOfCoins",suit:"Coins",strength:8,points:4,imagePath:"/images/cards/kingOfCoins.webp",alt:"King of Coins"},Uk={key:"threeOfCoins",suit:"Coins",strength:9,points:10,imagePath:"/images/cards/threeOfCoins.webp",alt:"Three of Coins"},$k={key:"aceOfCoins",suit:"Coins",strength:10,points:11,imagePath:"/images/cards/aceOfCoins.webp",alt:"Ace of Coins"},zk={key:"twoOfSwords",suit:"Swords",strength:1,points:0,imagePath:"/images/cards/twoOfSwords.webp",alt:"Two of Swords"},Vk={key:"fourOfSwords",suit:"Swords",strength:2,points:0,imagePath:"/images/cards/fourOfSwords.webp",alt:"Four of Swords"},Gk={key:"fiveOfSwords",suit:"Swords",strength:3,points:0,imagePath:"/images/cards/fiveOfSwords.webp",alt:"Five of Swords"},Hk={key:"sixOfSwords",suit:"Swords",strength:4,points:0,imagePath:"/images/cards/sixOfSwords.webp",alt:"Six of Swords"},Wk={key:"sevenOfSwords",suit:"Swords",strength:5,points:0,imagePath:"/images/cards/sevenOfSwords.webp",alt:"Seven of Swords"},Kk={key:"knaveOfSwords",suit:"Swords",strength:6,points:2,imagePath:"/images/cards/knaveOfSwords.webp",alt:"Knave of Swords"},Yk={key:"knightOfSwords",suit:"Swords",strength:7,points:3,imagePath:"/images/cards/knightOfSwords.webp",alt:"Knight of Swords"},Jk={key:"kingOfSwords",suit:"Swords",strength:8,points:4,imagePath:"/images/cards/kingOfSwords.webp",alt:"King of Swords"},Qk={key:"threeOfSwords",suit:"Swords",strength:9,points:10,imagePath:"/images/cards/threeOfSwords.webp",alt:"Three of Swords"},qk={key:"aceOfSwords",suit:"Swords",strength:10,points:11,imagePath:"/images/cards/aceOfSwords.webp",alt:"Ace of Swords"},Xk={key:"twoOfCups",suit:"Cups",strength:1,points:0,imagePath:"/images/cards/twoOfCups.webp",alt:"Two of Cups"},Zk={key:"fourOfCups",suit:"Cups",strength:2,points:0,imagePath:"/images/cards/fourOfCups.webp",alt:"Four of Cups"},e2={key:"fiveOfCups",suit:"Cups",strength:3,points:0,imagePath:"/images/cards/fiveOfCups.webp",alt:"Five of Cups"},t2={key:"sixOfCups",suit:"Cups",strength:4,points:0,imagePath:"/images/cards/sixOfCups.webp",alt:"Six of Cups"},n2={key:"sevenOfCups",suit:"Cups",strength:5,points:0,imagePath:"/images/cards/sevenOfCups.webp",alt:"Seven of Cups"},r2={key:"knaveOfCups",suit:"Cups",strength:6,points:2,imagePath:"/images/cards/knaveOfCups.webp",alt:"Knave of Cups"},i2={key:"knightOfCups",suit:"Cups",strength:7,points:3,imagePath:"/images/cards/knightOfCups.webp",alt:"Knight of Cups"},o2={key:"kingOfCups",suit:"Cups",strength:8,points:4,imagePath:"/images/cards/kingOfCups.webp",alt:"King of Cups"},s2={key:"threeOfCups",suit:"Cups",strength:9,points:10,imagePath:"/images/cards/threeOfCups.webp",alt:"Three of Cups"},a2={key:"aceOfCups",suit:"Cups",strength:10,points:11,imagePath:"/images/cards/aceOfCups.webp",alt:"Ace of Cups"},l2={key:"twoOfClubs",suit:"Clubs",strength:1,points:0,imagePath:"/images/cards/twoOfClubs.webp",alt:"Two of Clubs"},c2={key:"fourOfClubs",suit:"Clubs",strength:2,points:0,imagePath:"/images/cards/fourOfClubs.webp",alt:"Four of Clubs"},u2={key:"fiveOfClubs",suit:"Clubs",strength:3,points:0,imagePath:"/images/cards/fiveOfClubs.webp",alt:"Five of Clubs"},f2={key:"sixOfClubs",suit:"Clubs",strength:4,points:0,imagePath:"/images/cards/sixOfClubs.webp",alt:"Six of Clubs"},d2={key:"sevenOfClubs",suit:"Clubs",strength:5,points:0,imagePath:"/images/cards/sevenOfClubs.webp",alt:"Seven of Clubs"},p2={key:"knaveOfClubs",suit:"Clubs",strength:6,points:2,imagePath:"/images/cards/knaveOfClubs.webp",alt:"Knave of Clubs"},h2={key:"knightOfClubs",suit:"Clubs",strength:7,points:3,imagePath:"/images/cards/knightOfClubs.webp",alt:"Knight of Clubs"},m2={key:"kingOfClubs",suit:"Clubs",strength:8,points:4,imagePath:"/images/cards/kingOfClubs.webp",alt:"King of Clubs"},y2={key:"threeOfClubs",suit:"Clubs",strength:9,points:10,imagePath:"/images/cards/threeOfClubs.webp",alt:"Three of Clubs"},g2={key:"aceOfClubs",suit:"Clubs",strength:10,points:11,imagePath:"/images/cards/aceOfClubs.webp",alt:"Ace of Clubs"},v2=[Dk,Ik,Ak,Nk,Lk,jk,Bk,Fk,Uk,$k],x2=[zk,Vk,Gk,Hk,Wk,Kk,Yk,Jk,Qk,qk],S2=[Xk,Zk,e2,t2,n2,r2,i2,o2,s2,a2],C2=[l2,c2,u2,f2,d2,p2,h2,m2,y2,g2],_2=[...v2,...x2,...S2,...C2],Gd={twoOfCoins:aP,fourOfCoins:cP,fiveOfCoins:fP,sixOfCoins:pP,sevenOfCoins:mP,knaveOfCoins:gP,knightOfCoins:xP,kingOfCoins:CP,threeOfCoins:bP,aceOfCoins:EP,twoOfSwords:kP,fourOfSwords:OP,fiveOfSwords:MP,sixOfSwords:IP,sevenOfSwords:NP,knaveOfSwords:jP,knightOfSwords:FP,kingOfSwords:$P,threeOfSwords:VP,aceOfSwords:HP,twoOfCups:KP,fourOfCups:JP,fiveOfCups:qP,sixOfCups:ZP,sevenOfCups:tk,knaveOfCups:rk,knightOfCups:ok,kingOfCups:ak,threeOfCups:ck,aceOfCups:fk,twoOfClubs:pk,fourOfClubs:mk,fiveOfClubs:gk,sixOfClubs:xk,sevenOfClubs:Ck,knaveOfClubs:bk,knightOfClubs:Ek,kingOfClubs:kk,threeOfClubs:Ok,aceOfClubs:Mk};function b2({onClick:e,card:t,isInteractable:n,disabled:r}){const i=Gd[t.key],o=[on.cardWrapper,...n?[on.interactable]:[],...r?[on.disabled]:[]];return $("div",{onClick:e,className:o.length>0?o.join(" "):void 0,children:$(i,{className:on.card})})}function w2({G:e,playerID:t,ctx:n,moves:r}){const{currentPlayer:i}=n,s=e[t==="0"?"player_0":"player_1"].cards;return $(wl,{children:s.map((l,a)=>$(b2,{onClick:()=>{r.playCard({cardIndex:a})},isInteractable:i===t,card:l,disabled:i!==t},l.alt))})}const r1="/briscola/assets/cardRear-291795cc.webp";function E2(){return $("img",{src:r1,alt:"cardRear",className:on.cardRear})}function P2({playerID:e,G:t}){const i=t[e==="0"?"player_1":"player_0"].cards;return $(wl,{children:i.map(o=>$(E2,{},o.alt))})}function k2({onClick:e,card:t,className:n}){const r=Gd[t.key];return $("div",{onClick:e,className:n?`${on.cardWrapper} ${on[n]}`:`${on.cardWrapper}`,children:$(r,{className:on.card})})}function T2({G:e,playerID:t}){const{middle:n,previousRound:r}=e,{winner:i}=e,[o,s]=ee.useState(n),[l,a]=ee.useState(!1);return ee.useEffect(()=>{let c;return n.length===0&&r.length>0?(s(r),a(!0),c=setTimeout(()=>{s([]),a(!1)},2e3)):n.length===1&&s(n),()=>clearTimeout(c)},[n]),$("div",{className:"w-64 h-48 flex gap-4 items-center",children:o.map(c=>$(k2,{card:c,className:l?i===t?"player-won":"opponent-won":void 0},c.alt))})}const O2="_container_19o47_1",R2="_Middle_19o47_17",M2="_OpponentHand_19o47_26",D2="_PlayerHand_19o47_34",I2="_Deck_19o47_42",A2="_PlayerPile_19o47_51",N2="_OpponentPile_19o47_55",pi={container:O2,Middle:R2,OpponentHand:M2,PlayerHand:D2,Deck:I2,PlayerPile:A2,OpponentPile:N2},L2="/briscola/assets/deck-1c9f657b.webp";function j2({G:e}){const{briscola:t}=e,n=e.deckOnBoard.length;if(n===0)return null;const r=Gd[t.key];return ar(wl,{children:[ar("div",{className:"flex justify-center items-center",children:[$("div",{className:`${on.cardWrapper} ${on.briscolaWrapper}`,children:$(r,{className:`${on.card} ${on.briscola}`})}),$("img",{src:n>1?L2:r1,alt:"backside",className:on.deck})]}),$("p",{className:"max-sm:hidden ml-auto mr-4",children:`${n} card${n>1?"s":""} remaining`}),$("p",{className:"sm:hidden ml-auto",children:`${n}`})]})}function B2({matchID:e}){var i;const[t,n]=ee.useState(!1);return ee.useEffect(()=>{n(!1)},[e]),(i=navigator==null?void 0:navigator.clipboard)!=null&&i.writeText?$("span",{children:$("button",{type:"button",onClick:()=>{const o=new URL(Ps.match,window.location.href);o.searchParams.set("matchID",e),navigator.clipboard.writeText(o.toString()).then(()=>n(!0))},className:"btn btn-secondary w-40",children:t?"Copied!":"Copy Match Link"})}):null}const wm="/briscola/assets/pile-9e0dfbbc.webp";function F2(e){const t=e.reduce((n,r)=>n+r.points,0);return t<60?`You've lost with a score of ${t} points to ${120-t} points.`:t===60?"It's a tie! You both had 60 points.":`You've won with a score of ${t} points to ${120-t} points.`}function Em({G:e,ctx:t,moves:n,playerID:r,matchData:i,matchID:o}){var p;const{turn:s}=t;if(r!=="0"&&r!=="1"||!(n!=null&&n.playCard))return null;const l=r==="0"?"player_0":"player_1",a=r==="0"?"player_1":"player_0",c=r==="0",f=((p=i==null?void 0:i[1])==null?void 0:p.isConnected)===!0,d=i==null?void 0:i.filter(S=>(S==null?void 0:S.isConnected)===!0).length;return $("div",{className:"flex flex-col justify-center items-center",children:s<41?ar(wl,{children:[$("h1",{className:"text-lg lg:text-3xl lg:mb-2 mb-1",children:"Briscola"}),ar("h3",{className:"lg:text-xl lg:mb-8 mb-4",children:[d," of 2 players connected"]}),c&&!f?ar("div",{className:"alert shadow-lg mb-12 max-w-xl bg-base-100",children:[ar("div",{children:[$("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-gray-500 flex-shrink-0 w-6 h-6",children:$("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),$("div",{children:$("p",{children:"Share this link with a friend to invite them."})})]}),$(B2,{matchID:o})]}):null,ar("div",{className:pi.container,children:[$("div",{className:`${pi.Middle} bg-lime-800 rounded-lg`,children:$(T2,{playerID:r,G:e,ctx:t})}),$("div",{className:pi.OpponentHand,children:$(P2,{playerID:r,G:e})}),$("div",{className:pi.PlayerHand,children:$(w2,{playerID:r,G:e,ctx:t,moves:n})}),$("div",{className:pi.Deck,children:$(j2,{G:e})}),$("div",{className:pi.PlayerPile,children:e[l].pile.length>0?$("img",{src:wm,alt:"backside",className:on.pile}):null}),$("div",{className:pi.OpponentPile,children:e[a].pile.length>0?$("img",{src:wm,alt:"backside",className:on.pile}):null})]})]}):$("p",{children:F2(e[l].pile)})})}function U2(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function Pm(e,t){localStorage.setItem(`${e}-credentials`,JSON.stringify(t))}function km(e){const t=localStorage.getItem(`${e}-credentials`);if(t)try{return JSON.parse(t)}catch(n){return console.error(n),null}return null}const Tm={name:"Briscola",setup:$2,phases:{draw:{moves:{},next:"play",start:!0,endIf:({G:e})=>e.player_0.cards.length===3&&e.player_1.cards.length===3||e.deckOnBoard.length===0,onBegin({G:e}){const t=e.winner==="0"?"player_0":"player_1",n=e.loser==="0"?"player_0":"player_1";e.deckOnBoard.length>1?(e[t].cards.push(e.deckOnBoard.splice(e.deckOnBoard.length-1,1)[0]),e[n].cards.push(e.deckOnBoard.splice(e.deckOnBoard.length-1,1)[0])):e.deckOnBoard.length===1&&(e[t].cards.push(e.deckOnBoard.splice(e.deckOnBoard.length-1,1)[0]),e[n].cards.push(e.briscola))}},play:{turn:{order:{first:({G:e})=>parseInt(e.winner),next:({G:e})=>parseInt(e.loser)}},moves:{playCard:({ctx:e,G:t,events:n},{cardIndex:r})=>{if(typeof r!="number")throw new Error(`cardIndex was not a number ${JSON.stringify(r)}`);const i=e.currentPlayer==="0"?"player_0":"player_1",o=t[i];o.played=o.cards.splice(r,1)[0],t.middle.push(o.played),n.endTurn()}},next:"compare",endIf:({G:e})=>e.player_0.played!==null&&e.player_1.played!==null,start:!1},compare:{moves:{},onBegin:({G:e})=>z2(e),endIf:({G:e})=>e.evaluated,onEnd:({G:e})=>{e.player_0.played=null,e.player_1.played=null,e.middle=[],e.evaluated=!1},next:"draw"}},minPlayers:2,maxPlayers:2,endIf:({ctx:e})=>e.turn===41};function $2(){const e=U2([..._2]);if(e&&e.length!==40)throw new Error("Deck is not 40 cards long");const t=e.pop();if(!t)throw new Error("Failed to draw briscola");const n={player_0:{cards:[],pile:[],played:null},player_1:{cards:[],pile:[],played:null},briscola:t,deckOnBoard:e,evaluated:!1,winner:"0",loser:"1",middle:[],previousRound:[],secret:"SECRET"};return n.player_0.cards=n.deckOnBoard.splice(n.deckOnBoard.length-3,3),n.player_1.cards=n.deckOnBoard.splice(n.deckOnBoard.length-3,3),n}function z2(e){const t=e.briscola,n=e.player_0.played,r=e.player_1.played,i=e.player_0.pile,o=e.player_1.pile;if(n&&r){if(e.previousRound[0]=n,e.previousRound[1]=r,n.suit===r.suit)n.strength>r.strength?(i.push(n),i.push(r),e.winner="0",e.loser="1"):(o.push(n),o.push(r),e.winner="1",e.loser="0");else if(t.suit===n.suit&&t.suit!==r.suit)i.push(n),i.push(r),e.winner="0",e.loser="1";else if(t.suit!==n.suit&&t.suit===r.suit)o.push(n),o.push(r),e.winner="1",e.loser="0";else{const s=e.winner==="0"?"player_0":"player_1";e[s].pile.push(n),e[s].pile.push(r)}e.evaluated=!0}}const Om=ks.generateCredentials(),Hc="1";function V2(){const[e]=o_(),t=go();if(t.state){const{isHost:r,playerID:i,credentials:o,matchID:s}=t.state;if(r&&s&&o&&i){const l=yf({game:Tm,board:Em,multiplayer:ks.P2P({isHost:r,onError:c=>{console.error(c.type)}}),loading:()=>$("progress",{className:"progress w-56 m-auto"}),debug:!1}),a=km(i);return a||Pm(i,o),$(l,{credentials:a??o,matchID:s,playerID:i})}}const n=e.get("matchID");if(n){const r=yf({game:Tm,board:Em,multiplayer:ks.P2P({isHost:!1,onError:o=>{console.error(o.type)}}),loading:()=>$("progress",{className:"progress w-56 m-auto"}),debug:!1}),i=km(Hc);return i||Pm(Hc,Om),$(r,{credentials:i??Om,matchID:n,playerID:Hc})}return console.error("No matchID provided"),sC("/"),null}const G2=t_([{path:Ps.home,element:$(gw,{})},{path:Ps.match,element:$(V2,{})}]);Kc.createRoot(document.getElementById("root")).render($(ue.StrictMode,{children:$("main",{className:"flex items-center justify-center flex-1 min-h-screen  pt-2 lg:pt-8 bg-lime-900",children:$(WC,{router:G2})})}));
